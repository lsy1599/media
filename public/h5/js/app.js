/*! For license information please see app.js.LICENSE.txt */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}({1:function(e,t,n){e.exports=n("UvjS")},PSD3:function(e,t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,n){return(l=s()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}var d=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},p=function(e){return Object.keys(e).map((function(t){return e[t]}))},f=function(e){return Array.prototype.slice.call(e)},h=function(t){console.warn("".concat("SweetAlert2:"," ").concat("object"===e(t)?t.join(" "):t))},g=function(e){console.error("".concat("SweetAlert2:"," ").concat(e))},y=[],m=function(e,t){var n;n='"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(t,'" instead.'),-1===y.indexOf(n)&&(y.push(n),h(n))},v=function(e){return"function"==typeof e?e():e},b=function(e){return e&&"function"==typeof e.toPromise},x=function(e){return b(e)?e.toPromise():Promise.resolve(e)},w=function(e){return e&&Promise.resolve(e)===e},_=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),k=function(t){return t instanceof Element||function(t){return"object"===e(t)&&t.jquery}(t)},E=function(e){var t={};for(var n in e)t[e[n]]="swal2-"+e[n];return t},T=E(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","toast-column","show","hide","close","title","header","content","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),S=E(["success","warning","info","question","error"]),C=function(){return document.body.querySelector(".".concat(T.container))},A=function(e){var t=C();return t?t.querySelector(e):null},D=function(e){return A(".".concat(e))},O=function(){return D(T.popup)},R=function(){return D(T.icon)},L=function(){return D(T.title)},P=function(){return D(T.content)},M=function(){return D(T["html-container"])},B=function(){return D(T.image)},U=function(){return D(T["progress-steps"])},I=function(){return D(T["validation-message"])},j=function(){return A(".".concat(T.actions," .").concat(T.confirm))},z=function(){return A(".".concat(T.actions," .").concat(T.deny))},F=function(){return A(".".concat(T.loader))},N=function(){return A(".".concat(T.actions," .").concat(T.cancel))},q=function(){return D(T.actions)},H=function(){return D(T.header)},V=function(){return D(T.footer)},G=function(){return D(T["timer-progress-bar"])},W=function(){return D(T.close)},Y=function(){var e=f(O().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((function(e,t){return(e=parseInt(e.getAttribute("tabindex")))>(t=parseInt(t.getAttribute("tabindex")))?1:e<t?-1:0})),t=f(O().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter((function(e){return"-1"!==e.getAttribute("tabindex")}));return function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(e.concat(t)).filter((function(e){return pe(e)}))},X=function(){return!$()&&!document.body.classList.contains(T["no-backdrop"])},$=function(){return document.body.classList.contains(T["toast-shown"])},K={previousBodyPadding:null},Z=function(e,t){if(e.textContent="",t){var n=(new DOMParser).parseFromString(t,"text/html");f(n.querySelector("head").childNodes).forEach((function(t){e.appendChild(t)})),f(n.querySelector("body").childNodes).forEach((function(t){e.appendChild(t)}))}},J=function(e,t){if(!t)return!1;for(var n=t.split(/\s+/),i=0;i<n.length;i++)if(!e.classList.contains(n[i]))return!1;return!0},Q=function(t,n,i){if(function(e,t){f(e.classList).forEach((function(n){-1===p(T).indexOf(n)&&-1===p(S).indexOf(n)&&-1===p(t.showClass).indexOf(n)&&e.classList.remove(n)}))}(t,n),n.customClass&&n.customClass[i]){if("string"!=typeof n.customClass[i]&&!n.customClass[i].forEach)return h("Invalid type of customClass.".concat(i,'! Expected string or iterable object, got "').concat(e(n.customClass[i]),'"'));re(t,n.customClass[i])}};function ee(e,t){if(!t)return null;switch(t){case"select":case"textarea":case"file":return oe(e,T[t]);case"checkbox":return e.querySelector(".".concat(T.checkbox," input"));case"radio":return e.querySelector(".".concat(T.radio," input:checked"))||e.querySelector(".".concat(T.radio," input:first-child"));case"range":return e.querySelector(".".concat(T.range," input"));default:return oe(e,T.input)}}var te,ne=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},ie=function(e,t,n){e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((function(t){e.forEach?e.forEach((function(e){n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},re=function(e,t){ie(e,t,!0)},ae=function(e,t){ie(e,t,!1)},oe=function(e,t){for(var n=0;n<e.childNodes.length;n++)if(J(e.childNodes[n],t))return e.childNodes[n]},se=function(e,t,n){n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style[t]="number"==typeof n?"".concat(n,"px"):n:e.style.removeProperty(t)},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e.style.display=t},ue=function(e){e.style.display="none"},ce=function(e,t,n,i){var r=e.querySelector(t);r&&(r.style[n]=i)},de=function(e,t,n){t?le(e,n):ue(e)},pe=function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},fe=function(e){return!!(e.scrollHeight>e.clientHeight)},he=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),i=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||i>0},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=G();pe(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((function(){n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"}),10))},ye=function(){return"undefined"==typeof window||"undefined"==typeof document},me='\n <div aria-labelledby="'.concat(T.title,'" aria-describedby="').concat(T.content,'" class="').concat(T.popup,'" tabindex="-1">\n   <div class="').concat(T.header,'">\n     <ul class="').concat(T["progress-steps"],'"></ul>\n     <div class="').concat(T.icon,'"></div>\n     <img class="').concat(T.image,'" />\n     <h2 class="').concat(T.title,'" id="').concat(T.title,'"></h2>\n     <button type="button" class="').concat(T.close,'"></button>\n   </div>\n   <div class="').concat(T.content,'">\n     <div id="').concat(T.content,'" class="').concat(T["html-container"],'"></div>\n     <input class="').concat(T.input,'" />\n     <input type="file" class="').concat(T.file,'" />\n     <div class="').concat(T.range,'">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="').concat(T.select,'"></select>\n     <div class="').concat(T.radio,'"></div>\n     <label for="').concat(T.checkbox,'" class="').concat(T.checkbox,'">\n       <input type="checkbox" />\n       <span class="').concat(T.label,'"></span>\n     </label>\n     <textarea class="').concat(T.textarea,'"></textarea>\n     <div class="').concat(T["validation-message"],'" id="').concat(T["validation-message"],'"></div>\n   </div>\n   <div class="').concat(T.actions,'">\n     <div class="').concat(T.loader,'"></div>\n     <button type="button" class="').concat(T.confirm,'"></button>\n     <button type="button" class="').concat(T.deny,'"></button>\n     <button type="button" class="').concat(T.cancel,'"></button>\n   </div>\n   <div class="').concat(T.footer,'"></div>\n   <div class="').concat(T["timer-progress-bar-container"],'">\n     <div class="').concat(T["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),ve=function(e){jn.isVisible()&&te!==e.target.value&&jn.resetValidationMessage(),te=e.target.value},be=function(e){var t,n=!!(t=C())&&(t.parentNode.removeChild(t),ae([document.documentElement,document.body],[T["no-backdrop"],T["toast-shown"],T["has-column"]]),!0);if(ye())g("SweetAlert2 requires document to initialize");else{var i=document.createElement("div");i.className=T.container,n&&re(i,T["no-transition"]),Z(i,me);var r,a,o,s,l,u,c,d,p,f="string"==typeof(r=e.target)?document.querySelector(r):r;f.appendChild(i),function(e){var t=O();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")}(e),function(e){"rtl"===window.getComputedStyle(e).direction&&re(C(),T.rtl)}(f),a=P(),o=oe(a,T.input),s=oe(a,T.file),l=a.querySelector(".".concat(T.range," input")),u=a.querySelector(".".concat(T.range," output")),c=oe(a,T.select),d=a.querySelector(".".concat(T.checkbox," input")),p=oe(a,T.textarea),o.oninput=ve,s.onchange=ve,c.onchange=ve,d.onchange=ve,p.oninput=ve,l.oninput=function(e){ve(e),u.value=l.value},l.onchange=function(e){ve(e),l.nextSibling.value=l.value}}},xe=function(t,n){t instanceof HTMLElement?n.appendChild(t):"object"===e(t)?we(t,n):t&&Z(n,t)},we=function(e,t){e.jquery?_e(t,e):Z(t,e.toString())},_e=function(e,t){if(e.textContent="",0 in t)for(var n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ke=function(){if(ye())return!1;var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&void 0!==e.style[n])return t[n];return!1}(),Ee=function(e,t){var n=q(),i=F(),r=j(),a=z(),o=N();t.showConfirmButton||t.showDenyButton||t.showCancelButton||ue(n),Q(n,t,"actions"),Te(r,"confirm",t),Te(a,"deny",t),Te(o,"cancel",t),function(e,t,n,i){if(!i.buttonsStyling)return ae([e,t,n],T.styled);re([e,t,n],T.styled),i.confirmButtonColor&&(e.style.backgroundColor=i.confirmButtonColor),i.denyButtonColor&&(t.style.backgroundColor=i.denyButtonColor),i.cancelButtonColor&&(n.style.backgroundColor=i.cancelButtonColor)}(r,a,o,t),t.reverseButtons&&(n.insertBefore(o,i),n.insertBefore(a,i),n.insertBefore(r,i)),Z(i,t.loaderHtml),Q(i,t,"loader")};function Te(e,t,n){de(e,n["show".concat(d(t),"Button")],"inline-block"),Z(e,n["".concat(t,"ButtonText")]),e.setAttribute("aria-label",n["".concat(t,"ButtonAriaLabel")]),e.className=T[t],Q(e,n,"".concat(t,"Button")),re(e,n["".concat(t,"ButtonClass")])}var Se=function(e,t){var n=C();if(n){!function(e,t){"string"==typeof t?e.style.background=t:t||re([document.documentElement,document.body],T["no-backdrop"])}(n,t.backdrop),!t.backdrop&&t.allowOutsideClick&&h('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(e,t){t in T?re(e,T[t]):(h('The "position" parameter is not valid, defaulting to "center"'),re(e,T.center))}(n,t.position),function(e,t){if(t&&"string"==typeof t){var n="grow-".concat(t);n in T&&re(e,T[n])}}(n,t.grow),Q(n,t,"container");var i=document.body.getAttribute("data-swal2-queue-step");i&&(n.setAttribute("data-queue-step",i),document.body.removeAttribute("data-swal2-queue-step"))}},Ce={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap},Ae=["input","file","range","select","radio","checkbox","textarea"],De=function(e){if(!Be[e.input])return g('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(e.input,'"'));var t=Me(e.input),n=Be[e.input](t,e);le(n),setTimeout((function(){ne(n)}))},Oe=function(e,t){var n=ee(P(),e);if(n)for(var i in function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t].name;-1===["type","value","style"].indexOf(n)&&e.removeAttribute(n)}}(n),t)"range"===e&&"placeholder"===i||n.setAttribute(i,t[i])},Re=function(e){var t=Me(e.input);e.customClass&&re(t,e.customClass.input)},Le=function(e,t){e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},Pe=function(e,t,n){if(n.inputLabel){e.id=T.input;var i=document.createElement("label"),r=T["input-label"];i.setAttribute("for",e.id),i.className=r,re(i,n.customClass.inputLabel),i.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",i)}},Me=function(e){var t=T[e]?T[e]:T.input;return oe(P(),t)},Be={};Be.text=Be.email=Be.password=Be.number=Be.tel=Be.url=function(t,n){return"string"==typeof n.inputValue||"number"==typeof n.inputValue?t.value=n.inputValue:w(n.inputValue)||h('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(e(n.inputValue),'"')),Pe(t,t,n),Le(t,n),t.type=n.input,t},Be.file=function(e,t){return Pe(e,e,t),Le(e,t),e},Be.range=function(e,t){var n=e.querySelector("input"),i=e.querySelector("output");return n.value=t.inputValue,n.type=t.input,i.value=t.inputValue,Pe(n,e,t),e},Be.select=function(e,t){if(e.textContent="",t.inputPlaceholder){var n=document.createElement("option");Z(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Pe(e,e,t),e},Be.radio=function(e){return e.textContent="",e},Be.checkbox=function(e,t){var n=ee(P(),"checkbox");n.value=1,n.id=T.checkbox,n.checked=Boolean(t.inputValue);var i=e.querySelector("span");return Z(i,t.inputPlaceholder),e},Be.textarea=function(e,t){e.value=t.inputValue,Le(e,t),Pe(e,e,t);var n=function(e){return parseInt(window.getComputedStyle(e).paddingLeft)+parseInt(window.getComputedStyle(e).paddingRight)};if("MutationObserver"in window){var i=parseInt(window.getComputedStyle(O()).width);new MutationObserver((function(){var t=e.offsetWidth+n(O())+n(P());O().style.width=t>i?"".concat(t,"px"):null})).observe(e,{attributes:!0,attributeFilter:["style"]})}return e};var Ue=function(e,t){var n=M();Q(n,t,"htmlContainer"),t.html?(xe(t.html,n),le(n,"block")):t.text?(n.textContent=t.text,le(n,"block")):ue(n),function(e,t){var n=P(),i=Ce.innerParams.get(e),r=!i||t.input!==i.input;Ae.forEach((function(e){var i=T[e],a=oe(n,i);Oe(e,t.inputAttributes),a.className=i,r&&ue(a)})),t.input&&(r&&De(t),Re(t))}(e,t),Q(P(),t,"content")},Ie=function(e,t){for(var n in S)t.icon!==n&&ae(e,S[n]);re(e,S[t.icon]),Fe(e,t),je(),Q(e,t,"icon")},je=function(){for(var e=O(),t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),i=0;i<n.length;i++)n[i].style.backgroundColor=t},ze=function(e,t){e.textContent="",t.iconHtml?Z(e,Ne(t.iconHtml)):"success"===t.icon?Z(e,'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    '):"error"===t.icon?Z(e,'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    '):Z(e,Ne({question:"?",warning:"!",info:"i"}[t.icon]))},Fe=function(e,t){if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(var n=0,i=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];n<i.length;n++)ce(e,i[n],"backgroundColor",t.iconColor);ce(e,".swal2-success-ring","borderColor",t.iconColor)}},Ne=function(e){return'<div class="'.concat(T["icon-content"],'">').concat(e,"</div>")},qe=[],He=function(){return C()&&C().getAttribute("data-queue-step")},Ve=function(e,t){var n=U();if(!t.progressSteps||0===t.progressSteps.length)return ue(n);le(n),n.textContent="";var i=parseInt(void 0===t.currentProgressStep?He():t.currentProgressStep);i>=t.progressSteps.length&&h("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach((function(e,r){var a=function(e){var t=document.createElement("li");return re(t,T["progress-step"]),Z(t,e),t}(e);if(n.appendChild(a),r===i&&re(a,T["active-progress-step"]),r!==t.progressSteps.length-1){var o=function(e){var t=document.createElement("li");return re(t,T["progress-step-line"]),e.progressStepsDistance&&(t.style.width=e.progressStepsDistance),t}(t);n.appendChild(o)}}))},Ge=function(e,t){var n=H();Q(n,t,"header"),Ve(0,t),function(e,t){var n=Ce.innerParams.get(e),i=R();n&&t.icon===n.icon?(ze(i,t),Ie(i,t)):t.icon||t.iconHtml?t.icon&&-1===Object.keys(S).indexOf(t.icon)?(g('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),ue(i)):(le(i),ze(i,t),Ie(i,t),re(i,t.showClass.icon)):ue(i)}(e,t),function(e,t){var n=B();if(!t.imageUrl)return ue(n);le(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt),se(n,"width",t.imageWidth),se(n,"height",t.imageHeight),n.className=T.image,Q(n,t,"image")}(0,t),function(e,t){var n=L();de(n,t.title||t.titleText),t.title&&xe(t.title,n),t.titleText&&(n.innerText=t.titleText),Q(n,t,"title")}(0,t),function(e,t){var n=W();Z(n,t.closeButtonHtml),Q(n,t,"closeButton"),de(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel)}(0,t)},We=function(e,t){e.className="".concat(T.popup," ").concat(pe(e)?t.showClass.popup:""),t.toast?(re([document.documentElement,document.body],T["toast-shown"]),re(e,T.toast)):re(e,T.modal),Q(e,t,"popup"),"string"==typeof t.customClass&&re(e,t.customClass),t.icon&&re(e,T["icon-".concat(t.icon)])},Ye=function(e,t){!function(e,t){var n=C(),i=O();t.toast?(se(n,"width",t.width),i.style.width="100%"):se(i,"width",t.width),se(i,"padding",t.padding),t.background&&(i.style.background=t.background),ue(I()),We(i,t)}(0,t),Se(0,t),Ge(e,t),Ue(e,t),Ee(0,t),function(e,t){var n=V();de(n,t.footer),t.footer&&xe(t.footer,n),Q(n,t,"footer")}(0,t),"function"==typeof t.didRender?t.didRender(O()):"function"==typeof t.onRender&&t.onRender(O())},Xe=function(){return j()&&j().click()},$e=function(e){var t=O();t||jn.fire(),t=O();var n=q(),i=F();!e&&pe(j())&&(e=j()),le(n),e&&(ue(e),i.setAttribute("data-button-to-replace",e.className)),i.parentNode.insertBefore(i,e),re([t,n],T.loading),le(i),t.setAttribute("data-loading",!0),t.setAttribute("aria-busy",!0),t.focus()},Ke={},Ze=function(){return new Promise((function(e){var t=window.scrollX,n=window.scrollY;Ke.restoreFocusTimeout=setTimeout((function(){Ke.previousActiveElement&&Ke.previousActiveElement.focus?(Ke.previousActiveElement.focus(),Ke.previousActiveElement=null):document.body&&document.body.focus(),e()}),100),void 0!==t&&void 0!==n&&window.scrollTo(t,n)}))},Je=function(){if(Ke.timeout)return function(){var e=G(),t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";var n=parseInt(window.getComputedStyle(e).width),i=parseInt(t/n*100);e.style.removeProperty("transition"),e.style.width="".concat(i,"%")}(),Ke.timeout.stop()},Qe=function(){if(Ke.timeout){var e=Ke.timeout.start();return ge(e),e}},et=!1,tt={},nt=function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)for(var n in tt){var i=t.getAttribute(n);if(i)return void tt[n].fire({template:i})}},it={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,onBeforeOpen:void 0,onOpen:void 0,willOpen:void 0,didOpen:void 0,onRender:void 0,didRender:void 0,onClose:void 0,onAfterClose:void 0,willClose:void 0,didClose:void 0,onDestroy:void 0,didDestroy:void 0,scrollbarPadding:!0},rt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","onAfterClose","onClose","onDestroy","progressSteps","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],at={animation:'showClass" and "hideClass',onBeforeOpen:"willOpen",onOpen:"didOpen",onRender:"didRender",onClose:"willClose",onAfterClose:"didClose",onDestroy:"didDestroy"},ot=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","heightAuto","keydownListenerCapture"],st=function(e){return Object.prototype.hasOwnProperty.call(it,e)},lt=function(e){return at[e]},ut=function(e){st(e)||h('Unknown parameter "'.concat(e,'"'))},ct=function(e){-1!==ot.indexOf(e)&&h('The parameter "'.concat(e,'" is incompatible with toasts'))},dt=function(e){lt(e)&&m(e,lt(e))},pt=function(e){for(var t in e)ut(t),e.toast&&ct(t),dt(t)},ft=Object.freeze({isValidParameter:st,isUpdatableParameter:function(e){return-1!==rt.indexOf(e)},isDeprecatedParameter:lt,argsToParams:function(t){var n={};return"object"!==e(t[0])||k(t[0])?["title","html","icon"].forEach((function(i,r){var a=t[r];"string"==typeof a||k(a)?n[i]=a:void 0!==a&&g("Unexpected type of ".concat(i,'! Expected "string" or "Element", got ').concat(e(a)))})):r(n,t[0]),n},isVisible:function(){return pe(O())},clickConfirm:Xe,clickDeny:function(){return z()&&z().click()},clickCancel:function(){return N()&&N().click()},getContainer:C,getPopup:O,getTitle:L,getContent:P,getHtmlContainer:M,getImage:B,getIcon:R,getInputLabel:function(){return D(T["input-label"])},getCloseButton:W,getActions:q,getConfirmButton:j,getDenyButton:z,getCancelButton:N,getLoader:F,getHeader:H,getFooter:V,getTimerProgressBar:G,getFocusableElements:Y,getValidationMessage:I,isLoading:function(){return O().hasAttribute("data-loading")},fire:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return l(e,n)},mixin:function(e){return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,n);var l,d,p=(l=f,d=s(),function(){var e,t=a(l);if(d){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function f(){return t(this,f),p.apply(this,arguments)}return i(f,[{key:"_main",value:function(t,n){return c(a(f.prototype),"_main",this).call(this,t,r({},e,n))}}]),f}(this)},queue:function(e){var t=this;qe=e;var n=function(e,t){qe=[],e(t)},i=[];return new Promise((function(e){!function r(a,o){a<qe.length?(document.body.setAttribute("data-swal2-queue-step",a),t.fire(qe[a]).then((function(t){void 0!==t.value?(i.push(t.value),r(a+1,o)):n(e,{dismiss:t.dismiss})}))):n(e,{value:i})}(0)}))},getQueueStep:He,insertQueueStep:function(e,t){return t&&t<qe.length?qe.splice(t,0,e):qe.push(e)},deleteQueueStep:function(e){void 0!==qe[e]&&qe.splice(e,1)},showLoading:$e,enableLoading:$e,getTimerLeft:function(){return Ke.timeout&&Ke.timeout.getTimerLeft()},stopTimer:Je,resumeTimer:Qe,toggleTimer:function(){var e=Ke.timeout;return e&&(e.running?Je():Qe())},increaseTimer:function(e){if(Ke.timeout){var t=Ke.timeout.increase(e);return ge(t,!0),t}},isTimerRunning:function(){return Ke.timeout&&Ke.timeout.isRunning()},bindClickHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template";tt[e]=this,et||(document.body.addEventListener("click",nt),et=!0)}});function ht(){if(Ce.innerParams.get(this)){var e=Ce.domCache.get(this);ue(e.loader);var t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?le(t[0],"inline-block"):pe(j())||pe(z())||pe(N())||ue(e.actions),ae([e.popup,e.actions],T.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}}var gt=function(){null===K.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(K.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(K.previousBodyPadding+function(){var e=document.createElement("div");e.className=T["scrollbar-measure"],document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t}(),"px"))},yt=function(){navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)||O().scrollHeight>window.innerHeight-44&&(C().style.paddingBottom="".concat(44,"px"))},mt=function(){var e,t=C();t.ontouchstart=function(t){e=vt(t)},t.ontouchmove=function(t){e&&(t.preventDefault(),t.stopPropagation())}},vt=function(e){var t=e.target,n=C();return!(bt(e)||xt(e)||t!==n&&(fe(n)||"INPUT"===t.tagName||fe(P())&&P().contains(t)))},bt=function(e){return e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType},xt=function(e){return e.touches&&e.touches.length>1},wt=function(){return!!window.MSInputMethodContext&&!!document.documentMode},_t=function(){var e=C(),t=O();e.style.removeProperty("align-items"),t.offsetTop<0&&(e.style.alignItems="flex-start")},kt={swalPromiseResolve:new WeakMap};function Et(e,t,n,i){n?Ot(e,i):(Ze().then((function(){return Ot(e,i)})),Ke.keydownTarget.removeEventListener("keydown",Ke.keydownHandler,{capture:Ke.keydownListenerCapture}),Ke.keydownHandlerAdded=!1),t.parentNode&&!document.body.getAttribute("data-swal2-queue-step")&&t.parentNode.removeChild(t),X()&&(null!==K.previousBodyPadding&&(document.body.style.paddingRight="".concat(K.previousBodyPadding,"px"),K.previousBodyPadding=null),function(){if(J(document.body,T.iosfix)){var e=parseInt(document.body.style.top,10);ae(document.body,T.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}}(),"undefined"!=typeof window&&wt()&&window.removeEventListener("resize",_t),f(document.body.children).forEach((function(e){e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))),ae([document.documentElement,document.body],[T.shown,T["height-auto"],T["no-backdrop"],T["toast-shown"],T["toast-column"]])}function Tt(e){var t=O();if(t){e=St(e);var n=Ce.innerParams.get(this);if(n&&!J(t,n.hideClass.popup)){var i=kt.swalPromiseResolve.get(this);ae(t,n.showClass.popup),re(t,n.hideClass.popup);var r=C();ae(r,n.showClass.backdrop),re(r,n.hideClass.backdrop),Ct(this,t,n),i(e)}}}var St=function(e){return void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:r({isConfirmed:!1,isDenied:!1,isDismissed:!1},e)},Ct=function(e,t,n){var i=C(),r=ke&&he(t),a=n.onClose,o=n.onAfterClose,s=n.willClose,l=n.didClose;At(t,s,a),r?Dt(e,t,i,l||o):Et(e,i,$(),l||o)},At=function(e,t,n){null!==t&&"function"==typeof t?t(e):null!==n&&"function"==typeof n&&n(e)},Dt=function(e,t,n,i){Ke.swalCloseEventFinishedCallback=Et.bind(null,e,n,$(),i),t.addEventListener(ke,(function(e){e.target===t&&(Ke.swalCloseEventFinishedCallback(),delete Ke.swalCloseEventFinishedCallback)}))},Ot=function(e,t){setTimeout((function(){"function"==typeof t&&t(),e._destroy()}))};function Rt(e,t,n){var i=Ce.domCache.get(e);t.forEach((function(e){i[e].disabled=n}))}function Lt(e,t){if(!e)return!1;if("radio"===e.type)for(var n=e.parentNode.parentNode.querySelectorAll("input"),i=0;i<n.length;i++)n[i].disabled=t;else e.disabled=t}var Pt=function(){function e(n,i){t(this,e),this.callback=n,this.remaining=i,this.running=!1,this.start()}return i(e,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}},{key:"increase",value:function(e){var t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),e}(),Mt={email:function(e,t){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address")},url:function(e,t){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")}};function Bt(e){!function(e){e.inputValidator||Object.keys(Mt).forEach((function(t){e.input===t&&(e.inputValidator=Mt[t])}))}(e),e.showLoaderOnConfirm&&!e.preConfirm&&h("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),e.animation=v(e.animation),function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(h('Target parameter is not valid, defaulting to "body"'),e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),be(e)}var Ut,It=["swal-title","swal-html","swal-footer"],jt=function(t){var n={};return f(t.querySelectorAll("swal-param")).forEach((function(t){Gt(t,["name","value"]);var i=t.getAttribute("name"),r=t.getAttribute("value");"boolean"==typeof it[i]&&"false"===r&&(r=!1),"object"===e(it[i])&&(r=JSON.parse(r)),n[i]=r})),n},zt=function(e){var t={};return f(e.querySelectorAll("swal-button")).forEach((function(e){Gt(e,["type","color","aria-label"]);var n=e.getAttribute("type");t["".concat(n,"ButtonText")]=e.innerHTML,t["show".concat(d(n),"Button")]=!0,e.hasAttribute("color")&&(t["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label"))})),t},Ft=function(e){var t={},n=e.querySelector("swal-image");return n&&(Gt(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t},Nt=function(e){var t={},n=e.querySelector("swal-icon");return n&&(Gt(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},qt=function(e){var t={},n=e.querySelector("swal-input");n&&(Gt(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));var i=e.querySelectorAll("swal-input-option");return i.length&&(t.inputOptions={},f(i).forEach((function(e){Gt(e,["value"]);var n=e.getAttribute("value"),i=e.innerHTML;t.inputOptions[n]=i}))),t},Ht=function(e,t){var n={};for(var i in t){var r=t[i],a=e.querySelector(r);a&&(Gt(a,[]),n[r.replace(/^swal-/,"")]=a.innerHTML)}return n},Vt=function(e){var t=It.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);f(e.querySelectorAll("*")).forEach((function(n){if(n.parentNode===e){var i=n.tagName.toLowerCase();-1===t.indexOf(i)&&h("Unrecognized element <".concat(i,">"))}}))},Gt=function(e,t){f(e.attributes).forEach((function(n){-1===t.indexOf(n.name)&&h(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])}))},Wt=function(e){var t=C(),n=O();"function"==typeof e.willOpen?e.willOpen(n):"function"==typeof e.onBeforeOpen&&e.onBeforeOpen(n);var i=window.getComputedStyle(document.body).overflowY;Zt(t,n,e),setTimeout((function(){$t(t,n)}),10),X()&&(Kt(t,e.scrollbarPadding,i),f(document.body.children).forEach((function(e){e===C()||function(e,t){if("function"==typeof e.contains)return e.contains(t)}(e,C())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}))),$()||Ke.previousActiveElement||(Ke.previousActiveElement=document.activeElement),Yt(n,e),ae(t,T["no-transition"])},Yt=function(e,t){"function"==typeof t.didOpen?setTimeout((function(){return t.didOpen(e)})):"function"==typeof t.onOpen&&setTimeout((function(){return t.onOpen(e)}))},Xt=function e(t){var n=O();if(t.target===n){var i=C();n.removeEventListener(ke,e),i.style.overflowY="auto"}},$t=function(e,t){ke&&he(t)?(e.style.overflowY="hidden",t.addEventListener(ke,Xt)):e.style.overflowY="auto"},Kt=function(e,t,n){!function(){if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!J(document.body,T.iosfix)){var e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),re(document.body,T.iosfix),mt(),yt()}}(),"undefined"!=typeof window&&wt()&&(_t(),window.addEventListener("resize",_t)),t&&"hidden"!==n&&gt(),setTimeout((function(){e.scrollTop=0}))},Zt=function(e,t,n){re(e,n.showClass.backdrop),t.style.setProperty("opacity","0","important"),le(t),setTimeout((function(){re(t,n.showClass.popup),t.style.removeProperty("opacity")}),10),re([document.documentElement,document.body],T.shown),n.heightAuto&&n.backdrop&&!n.toast&&re([document.documentElement,document.body],T["height-auto"])},Jt=function(e){return e.checked?1:0},Qt=function(e){return e.checked?e.value:null},en=function(e){return e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null},tn=function(t,n){var i=P(),r=function(e){return rn[n.input](i,an(e),n)};b(n.inputOptions)||w(n.inputOptions)?($e(j()),x(n.inputOptions).then((function(e){t.hideLoading(),r(e)}))):"object"===e(n.inputOptions)?r(n.inputOptions):g("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(e(n.inputOptions)))},nn=function(e,t){var n=e.getInput();ue(n),x(t.inputValue).then((function(i){n.value="number"===t.input?parseFloat(i)||0:"".concat(i),le(n),n.focus(),e.hideLoading()})).catch((function(t){g("Error in inputValue promise: ".concat(t)),n.value="",le(n),n.focus(),e.hideLoading()}))},rn={select:function(e,t,n){var i=oe(e,T.select),r=function(e,t,i){var r=document.createElement("option");r.value=i,Z(r,t),r.selected=on(i,n.inputValue),e.appendChild(r)};t.forEach((function(e){var t=e[0],n=e[1];if(Array.isArray(n)){var a=document.createElement("optgroup");a.label=t,a.disabled=!1,i.appendChild(a),n.forEach((function(e){return r(a,e[1],e[0])}))}else r(i,n,t)})),i.focus()},radio:function(e,t,n){var i=oe(e,T.radio);t.forEach((function(e){var t=e[0],r=e[1],a=document.createElement("input"),o=document.createElement("label");a.type="radio",a.name=T.radio,a.value=t,on(t,n.inputValue)&&(a.checked=!0);var s=document.createElement("span");Z(s,r),s.className=T.label,o.appendChild(a),o.appendChild(s),i.appendChild(o)}));var r=i.querySelectorAll("input");r.length&&r[0].focus()}},an=function t(n){var i=[];return"undefined"!=typeof Map&&n instanceof Map?n.forEach((function(n,r){var a=n;"object"===e(a)&&(a=t(a)),i.push([r,a])})):Object.keys(n).forEach((function(r){var a=n[r];"object"===e(a)&&(a=t(a)),i.push([r,a])})),i},on=function(e,t){return t&&t.toString()===e.toString()},sn=function(e,t,n){var i=function(e,t){var n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return Jt(n);case"radio":return Qt(n);case"file":return en(n);default:return t.inputAutoTrim?n.value.trim():n.value}}(e,t);t.inputValidator?ln(e,t,i):e.getInput().checkValidity()?"deny"===n?un(e,t,i):dn(e,t,i):(e.enableButtons(),e.showValidationMessage(t.validationMessage))},ln=function(e,t,n){e.disableInput(),Promise.resolve().then((function(){return x(t.inputValidator(n,t.validationMessage))})).then((function(i){e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):dn(e,t,n)}))},un=function(e,t,n){t.showLoaderOnDeny&&$e(z()),t.preDeny?Promise.resolve().then((function(){return x(t.preDeny(n,t.validationMessage))})).then((function(t){!1===t?e.hideLoading():e.closePopup({isDenied:!0,value:void 0===t?n:t})})):e.closePopup({isDenied:!0,value:n})},cn=function(e,t){e.closePopup({isConfirmed:!0,value:t})},dn=function(e,t,n){t.showLoaderOnConfirm&&$e(),t.preConfirm?(e.resetValidationMessage(),Promise.resolve().then((function(){return x(t.preConfirm(n,t.validationMessage))})).then((function(t){pe(I())||!1===t?e.hideLoading():cn(e,void 0===t?n:t)}))):cn(e,n)},pn=function(e,t,n){var i=Y();if(i.length)return(t+=n)===i.length?t=0:-1===t&&(t=i.length-1),i[t].focus();O().focus()},fn=["ArrowRight","ArrowDown","Right","Down"],hn=["ArrowLeft","ArrowUp","Left","Up"],gn=["Escape","Esc"],yn=function(e,t,n){var i=Ce.innerParams.get(e);i&&(i.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?mn(e,t,i):"Tab"===t.key?vn(t,i):-1!==[].concat(fn,hn).indexOf(t.key)?bn(t.key):-1!==gn.indexOf(t.key)&&xn(t,i,n))},mn=function(e,t,n){if(!t.isComposing&&t.target&&e.getInput()&&t.target.outerHTML===e.getInput().outerHTML){if(-1!==["textarea","file"].indexOf(n.input))return;Xe(),t.preventDefault()}},vn=function(e,t){for(var n=e.target,i=Y(),r=-1,a=0;a<i.length;a++)if(n===i[a]){r=a;break}e.shiftKey?pn(0,r,-1):pn(0,r,1),e.stopPropagation(),e.preventDefault()},bn=function(e){if(-1!==[j(),z(),N()].indexOf(document.activeElement)){var t=-1!==fn.indexOf(e)?"nextElementSibling":"previousElementSibling",n=document.activeElement[t];n&&n.focus()}},xn=function(e,t,n){v(t.allowEscapeKey)&&(e.preventDefault(),n(_.esc))},wn=function(e,t,n){t.popup.onclick=function(){var t=Ce.innerParams.get(e);t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton||t.timer||t.input||n(_.close)}},_n=!1,kn=function(e){e.popup.onmousedown=function(){e.container.onmouseup=function(t){e.container.onmouseup=void 0,t.target===e.container&&(_n=!0)}}},En=function(e){e.container.onmousedown=function(){e.popup.onmouseup=function(t){e.popup.onmouseup=void 0,(t.target===e.popup||e.popup.contains(t.target))&&(_n=!0)}}},Tn=function(e,t,n){t.container.onclick=function(i){var r=Ce.innerParams.get(e);_n?_n=!1:i.target===t.container&&v(r.allowOutsideClick)&&n(_.backdrop)}},Sn=function(e,t){var n=function(e){var t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};var n=t.content||t;return Vt(n),r(jt(n),zt(n),Ft(n),Nt(n),qt(n),Ht(n,It))}(e),i=r({},it.showClass,t.showClass,n.showClass,e.showClass),a=r({},it.hideClass,t.hideClass,n.hideClass,e.hideClass),o=r({},it,t,n,e);return o.showClass=i,o.hideClass=a,!1===e.animation&&(o.showClass={popup:"swal2-noanimation",backdrop:"swal2-noanimation"},o.hideClass={}),o},Cn=function(e,t,n){return new Promise((function(i){var r=function(t){e.closePopup({isDismissed:!0,dismiss:t})};kt.swalPromiseResolve.set(e,i),t.confirmButton.onclick=function(){return function(e,t){e.disableButtons(),t.input?sn(e,t,"confirm"):dn(e,t,!0)}(e,n)},t.denyButton.onclick=function(){return function(e,t){e.disableButtons(),t.returnInputValueOnDeny?sn(e,t,"deny"):un(e,t,!1)}(e,n)},t.cancelButton.onclick=function(){return function(e,t){e.disableButtons(),t(_.cancel)}(e,r)},t.closeButton.onclick=function(){return r(_.close)},function(e,t,n){Ce.innerParams.get(e).toast?wn(e,t,n):(kn(t),En(t),Tn(e,t,n))}(e,t,r),function(e,t,n,i){t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1),n.toast||(t.keydownHandler=function(t){return yn(e,t,i)},t.keydownTarget=n.keydownListenerCapture?window:O(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)}(e,Ke,n,r),n.toast&&(n.input||n.footer||n.showCloseButton)?re(document.body,T["toast-column"]):ae(document.body,T["toast-column"]),function(e,t){"select"===t.input||"radio"===t.input?tn(e,t):-1!==["text","email","number","tel","textarea"].indexOf(t.input)&&(b(t.inputValue)||w(t.inputValue))&&nn(e,t)}(e,n),Wt(n),Dn(Ke,n,r),On(t,n),setTimeout((function(){t.container.scrollTop=0}))}))},An=function(e){var t={popup:O(),container:C(),content:P(),actions:q(),confirmButton:j(),denyButton:z(),cancelButton:N(),loader:F(),closeButton:W(),validationMessage:I(),progressSteps:U()};return Ce.domCache.set(e,t),t},Dn=function(e,t,n){var i=G();ue(i),t.timer&&(e.timeout=new Pt((function(){n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(le(i),setTimeout((function(){e.timeout&&e.timeout.running&&ge(t.timer)}))))},On=function(e,t){if(!t.toast)return v(t.allowEnterKey)?void(Rn(e,t)||pn(0,-1,1)):Ln()},Rn=function(e,t){return t.focusDeny&&pe(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&pe(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!pe(e.confirmButton)||(e.confirmButton.focus(),0))},Ln=function(){document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()},Pn=function(e){"function"==typeof e.didDestroy?e.didDestroy():"function"==typeof e.onDestroy&&e.onDestroy()},Mn=function(e){delete e.params,delete Ke.keydownHandler,delete Ke.keydownTarget,Bn(Ce),Bn(kt)},Bn=function(e){for(var t in e)e[t]=new WeakMap},Un=Object.freeze({hideLoading:ht,disableLoading:ht,getInput:function(e){var t=Ce.innerParams.get(e||this),n=Ce.domCache.get(e||this);return n?ee(n.content,t.input):null},close:Tt,closePopup:Tt,closeModal:Tt,closeToast:Tt,enableButtons:function(){Rt(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){Rt(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return Lt(this.getInput(),!1)},disableInput:function(){return Lt(this.getInput(),!0)},showValidationMessage:function(e){var t=Ce.domCache.get(this),n=Ce.innerParams.get(this);Z(t.validationMessage,e),t.validationMessage.className=T["validation-message"],n.customClass&&n.customClass.validationMessage&&re(t.validationMessage,n.customClass.validationMessage),le(t.validationMessage);var i=this.getInput();i&&(i.setAttribute("aria-invalid",!0),i.setAttribute("aria-describedBy",T["validation-message"]),ne(i),re(i,T.inputerror))},resetValidationMessage:function(){var e=Ce.domCache.get(this);e.validationMessage&&ue(e.validationMessage);var t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedBy"),ae(t,T.inputerror))},getProgressSteps:function(){return Ce.domCache.get(this).progressSteps},_main:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pt(r({},t,e)),Ke.currentInstance&&Ke.currentInstance._destroy(),Ke.currentInstance=this;var n=Sn(e,t);Bt(n),Object.freeze(n),Ke.timeout&&(Ke.timeout.stop(),delete Ke.timeout),clearTimeout(Ke.restoreFocusTimeout);var i=An(this);return Ye(this,n),Ce.innerParams.set(this,n),Cn(this,i,n)},update:function(e){var t=O(),n=Ce.innerParams.get(this);if(!t||J(t,n.hideClass.popup))return h("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");var i={};Object.keys(e).forEach((function(t){jn.isUpdatableParameter(t)?i[t]=e[t]:h('Invalid parameter to update: "'.concat(t,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}));var a=r({},n,i);Ye(this,a),Ce.innerParams.set(this,a),Object.defineProperties(this,{params:{value:r({},this.params,e),writable:!1,enumerable:!0}})},_destroy:function(){var e=Ce.domCache.get(this),t=Ce.innerParams.get(this);t&&(e.popup&&Ke.swalCloseEventFinishedCallback&&(Ke.swalCloseEventFinishedCallback(),delete Ke.swalCloseEventFinishedCallback),Ke.deferDisposalTimer&&(clearTimeout(Ke.deferDisposalTimer),delete Ke.deferDisposalTimer),Pn(t),Mn(this))}}),In=function(){function e(){if(t(this,e),"undefined"!=typeof window){"undefined"==typeof Promise&&g("This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)"),Ut=this;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Object.freeze(this.constructor.argsToParams(i));Object.defineProperties(this,{params:{value:a,writable:!1,enumerable:!0,configurable:!0}});var o=this._main(this.params);Ce.promise.set(this,o)}}return i(e,[{key:"then",value:function(e){return Ce.promise.get(this).then(e)}},{key:"finally",value:function(e){return Ce.promise.get(this).finally(e)}}]),e}();r(In.prototype,Un),r(In,ft),Object.keys(Un).forEach((function(e){In[e]=function(){var t;if(Ut)return(t=Ut)[e].apply(t,arguments)}})),In.DismissReason=_,In.version="10.15.7";var jn=In;return jn.default=jn,jn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{flex-direction:row;align-items:center;width:auto;padding:.625em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{flex-direction:row;padding:0}.swal2-popup.swal2-toast .swal2-title{flex-grow:1;justify-content:flex-start;margin:0 .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{justify-content:flex-start;padding:0;font-size:1em}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex-basis:auto!important;width:auto;height:auto;margin:0 .3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.125em .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;flex-direction:row;align-items:center;justify-content:center;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{align-items:flex-start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{align-items:flex-start;justify-content:flex-end}.swal2-container.swal2-center{align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{align-items:center;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{align-items:center;justify-content:flex-end}.swal2-container.swal2-bottom{align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{align-items:flex-end;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{align-items:flex-end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:flex!important;flex:1;align-self:stretch;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-grow-column{flex:1;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-no-transition{transition:none!important}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:flex;flex-direction:column;align-items:center;padding:0 1.8em}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0 1.6em}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#2778c4;color:#fff;font-size:1.0625em}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#d14529;color:#fff;font-size:1.0625em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#757575;color:#fff;font-size:1.0625em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;align-items:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;transition:color .1s ease-out;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;justify-content:center;margin:0;padding:0 1.6em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto}.swal2-validation-message{align-items:center;justify-content:center;margin:0 -2.7em;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}body.swal2-toast-column .swal2-toast{flex-direction:column;align-items:stretch}body.swal2-toast-column .swal2-toast .swal2-actions{flex:1;align-self:stretch;height:2.2em;margin-top:.3125em}body.swal2-toast-column .swal2-toast .swal2-loading{justify-content:center}body.swal2-toast-column .swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}body.swal2-toast-column .swal2-toast .swal2-validation-message{font-size:1em}')},U5Kh:function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=h(n(10)),o=h(n(3)),s=h(n(30)),l=h(n(6)),u=h(n(4)),c=h(n(31)),d=n(36),p=h(n(37)),f=n(5);function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.config=o.default.deepCopy({width:600,height:337.5,ignores:[],whitelist:[],lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),inactive:3e3,volume:.6,controls:!0,controlsList:["nodownload"]},e),n.version=f.version,n.userTimer=null,n.waitTimer=null,n.database=new s.default,n.history=[],n.isProgressMoving=!1,n.root=o.default.findDom(document,"#"+n.config.id),n.controls=o.default.createDom("xg-controls","",{unselectable:"on",onselectstart:"return false"},"xgplayer-controls"),n.config.isShowControl&&(n.controls.style.display="none"),!n.root){var i=n.config.el;if(!i||1!==i.nodeType)return n.emit("error",new u.default({type:"use",errd:{line:45,handle:"Constructor",msg:"container id can't be empty"},vid:n.config.vid})),console.error("container id can't be empty"),g(n,!1);n.root=i}if(o.default.addClass(n.root,"xgplayer xgplayer-"+l.default.device+" xgplayer-nostart "+(n.config.controls?"":"no-controls")),n.root.appendChild(n.controls),n.config.fluid?(n.root.style["max-width"]="100%",n.root.style.width="100%",n.root.style.height="0",n.root.style["padding-top"]=100*n.config.height/n.config.width+"%",n.video.style.position="absolute",n.video.style.top="0",n.video.style.left="0"):(n.config.width&&("number"!=typeof n.config.width?n.root.style.width=n.config.width:n.root.style.width=n.config.width+"px"),n.config.height&&("number"!=typeof n.config.height?n.root.style.height=n.config.height:n.root.style.height=n.config.height+"px")),n.config.execBeforePluginsCall&&n.config.execBeforePluginsCall.forEach((function(e){e.call(n,n)})),n.config.controlStyle&&"String"===o.default.typeOf(n.config.controlStyle)){var r=n;fetch(r.config.controlStyle,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){e.ok&&e.json().then((function(e){for(var t in e)e.hasOwnProperty(t)&&(r.config[t]=e[t]);r.pluginsCall()}))})).catch((function(e){console.log("Fetch错误:"+e)}))}else n.pluginsCall();n.ev.forEach((function(e){var t=Object.keys(e)[0],i=n[e[t]];i&&n.on(t,i)})),["focus","blur"].forEach((function(e){n.on(e,n["on"+e.charAt(0).toUpperCase()+e.slice(1)])}));var a=n;return n.mousemoveFunc=function(){a.emit("focus"),a.config.closeFocusVideoFocus||a.video.focus()},n.root.addEventListener("mousemove",n.mousemoveFunc),n.playFunc=function(){a.emit("focus"),a.config.closePlayVideoFocus||a.video.focus()},a.once("play",n.playFunc),n.getVideoSize=function(){if(this.video.videoWidth&&this.video.videoHeight){var e=a.root.getBoundingClientRect();"auto"===a.config.fitVideoSize?e.width/e.height>this.video.videoWidth/this.video.videoHeight?a.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":a.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px":"fixWidth"===a.config.fitVideoSize?a.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":"fixHeight"===a.config.fitVideoSize&&(a.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px")}},a.once("loadeddata",n.getVideoSize),setTimeout((function(){n.emit("ready"),n.isReady=!0}),0),n.config.keyShortcut&&"on"!==n.config.keyShortcut||["video","controls"].forEach((function(e){a[e].addEventListener("keydown",(function(e){a.onKeydown(e,a)}))})),n.config.videoInit&&o.default.hasClass(n.root,"xgplayer-nostart")&&n.start(),a.config.rotate&&(a.on("requestFullscreen",n.updateRotateDeg),a.on("exitFullscreen",n.updateRotateDeg)),a.once("destroy",(function e(){a.root.removeEventListener("mousemove",a.mousemoveFunc),a.off("destroy",e)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"start",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.url,i=this.root,r=this;if(n&&""!==n||this.emit("urlNull"),this.logParams.playSrc=n,this.canPlayFunc=function(){r.off("canplay",r.canPlayFunc)},"String"===o.default.typeOf(n)?n.indexOf("blob:")>-1&&n===this.video.src||(this.video.src=n):n.forEach((function(t){e.video.appendChild(o.default.createDom("source","",{src:""+t.src,type:""+(t.type||"")}))})),this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.loadeddataFunc=function(){r.logParams.vt=(new Date).getTime(),r.logParams.pt>r.logParams.vt&&(r.logParams.pt=r.logParams.vt),r.logParams.vd=r.video.duration},this.once("loadeddata",this.loadeddataFunc),this.config.autoplay){this.on("canplay",this.canPlayFunc);var a=r.video.play();void 0!==a&&a&&a.then((function(){r.emit("autoplay started")})).catch((function(){r.emit("autoplay was prevented"),t.util.addClass(r.root,"xgplayer-is-autoplay")}))}this.config.disableStartLoad||this.video.load(),i.insertBefore(this.video,i.firstChild),setTimeout((function(){e.emit("complete"),e.danmu&&"function"==typeof e.danmu.resize&&e.danmu.resize()}),1)}},{key:"reload",value:function(){this.video.load(),this.reloadFunc=function(){var e=this.play();void 0!==e&&e&&e.catch((function(e){}))},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this;for(var a in clearInterval(this.bulletResizeTimer),this._interval)clearInterval(this._interval[a]),this._interval[a]=null;function o(){if(this.emit("destroy"),this.video.removeAttribute("src"),this.video.load(),n){this.root.innerHTML="";var e=this.root.className.split(" ");e.length>0?this.root.className=e.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):this.root.className=""}for(var t in this)delete this[t];this.off("pause",o)}this.checkTimer&&clearInterval(this.checkTimer),this.waitTimer&&clearTimeout(this.waitTimer),this.ev.forEach((function(t){var n=Object.keys(t)[0],i=e[t[n]];i&&e.off(n,i)})),this.loadeddataFunc&&this.off("loadeddata",this.loadeddataFunc),this.reloadFunc&&this.off("loadeddata",this.reloadFunc),this.replayFunc&&this.off("play",this.replayFunc),this.playFunc&&this.off("play",this.playFunc),this.getVideoSize&&this.off("loadeddata",this.getVideoSize),["focus","blur"].forEach((function(t){e.off(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),this.config.keyShortcut&&"on"!==this.config.keyShortcut||["video","controls"].forEach((function(t){e[t]&&e[t].removeEventListener("keydown",(function(e){i.onKeydown(e,i)}))})),this.paused?o.call(this):(this.pause(),this.once("pause",o)),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"replay",value:function(){var e=this,t=this._replay;if(o.default.removeClass(this.root,"xgplayer-ended"),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.replayFunc=function(){e.logParams.vt=(new Date).getTime(),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt),e.logParams.vd=e.video.duration},this.once("play",this.replayFunc),this.logParams.playSrc=this.video.currentSrc,t&&t instanceof Function)t();else{this.currentTime=0;var n=this.play();void 0!==n&&n&&n.catch((function(e){}))}}},{key:"getFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):this.video.webkitSupportsFullscreen?this.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():o.default.addClass(e,"xgplayer-is-cssfullscreen")}},{key:"exitFullscreen",value:function(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o.default.removeClass(e,"xgplayer-is-cssfullscreen")}},{key:"getCssFullscreen",value:function(){this.config.fluid&&(this.root.style["padding-top"]=""),o.default.addClass(this.root,"xgplayer-is-cssfullscreen"),this.emit("requestCssFullscreen")}},{key:"exitCssFullscreen",value:function(){this.config.fluid&&(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"),o.default.removeClass(this.root,"xgplayer-is-cssfullscreen"),this.emit("exitCssFullscreen")}},{key:"getRotateFullscreen",value:function(){document.documentElement.style.width="100%",document.documentElement.style.height="100%",this.root&&!t.util.hasClass(this.root,"xgplayer-rotate-fullscreen")&&t.util.addClass(this.root,"xgplayer-rotate-fullscreen"),this.emit("getRotateFullscreen")}},{key:"exitRotateFullscreen",value:function(){document.documentElement.style.width="unset",document.documentElement.style.height="unset",this.root&&t.util.hasClass(this.root,"xgplayer-rotate-fullscreen")&&t.util.removeClass(this.root,"xgplayer-rotate-fullscreen"),this.emit("exitRotateFullscreen")}},{key:"download",value:function(){var e=(0,d.getAbsoluteURL)(this.config.url);(0,p.default)(e)}},{key:"pluginsCall",value:function(){var e=this,n=this;if(t.plugins){var i=this.config.ignores;Object.keys(t.plugins).forEach((function(r){var a=t.plugins[r];i.some((function(e){return r===e||r==="s_"+e}))||(["pc","tablet","mobile"].some((function(e){return e===r}))?r===l.default.device&&setTimeout((function(){a.call(n,n)}),0):a.call(e,e))}))}}},{key:"getPIP",value:function(){var e=o.default.createDom("xg-pip-lay","<div></div>",{},"xgplayer-pip-lay");this.root.appendChild(e);var t=o.default.createDom("xg-pip-drag",'<div class="drag-handle"><span>点击按住可拖动视频</span></div>',{tabindex:9},"xgplayer-pip-drag");this.root.appendChild(t),new c.default(".xgplayer",{handle:".drag-handle"}),o.default.addClass(this.root,"xgplayer-pip-active"),this.root.style.right=0,this.root.style.bottom="200px",this.root.style.top="",this.root.style.left="",this.root.style.width="320px",this.root.style.height="180px",this.config.pipConfig&&(void 0!==this.config.pipConfig.top&&(this.root.style.top=this.config.pipConfig.top+"px",this.root.style.bottom=""),void 0!==this.config.pipConfig.bottom&&(this.root.style.bottom=this.config.pipConfig.bottom+"px"),void 0!==this.config.pipConfig.left&&(this.root.style.left=this.config.pipConfig.left+"px",this.root.style.right=""),void 0!==this.config.pipConfig.right&&(this.root.style.right=this.config.pipConfig.right+"px"),void 0!==this.config.pipConfig.width&&(this.root.style.width=this.config.pipConfig.width+"px"),void 0!==this.config.pipConfig.height&&(this.root.style.height=this.config.pipConfig.height+"px")),this.config.fluid&&(this.root.style["padding-top"]="");var n=this;["click","touchend"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation(),n.exitPIP()}))}))}},{key:"exitPIP",value:function(){o.default.removeClass(this.root,"xgplayer-pip-active"),this.root.style.right="",this.root.style.bottom="",this.root.style.top="",this.root.style.left="",this.config.fluid?(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"));var e=o.default.findDom(this.root,".xgplayer-pip-lay");e&&e.parentNode&&e.parentNode.removeChild(e);var t=o.default.findDom(this.root,".xgplayer-pip-drag");t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"updateRotateDeg",value:function(){this.rotateDeg||(this.rotateDeg=0);var e=this.root.offsetWidth,t=this.root.offsetHeight,n=this.video.videoWidth,i=this.video.videoHeight;!this.config.rotate.innerRotate&&this.config.rotate.controlsFix&&(this.root.style.width=t+"px",this.root.style.height=e+"px");var r=void 0;.25===this.rotateDeg||.75===this.rotateDeg?(r=this.config.rotate.innerRotate?n/i>t/e?t/(i/n>t/e?t*n/i:e):e/(i/n>t/e?t:e*i/n):e>=t?e/t:t/e,r=parseFloat(r.toFixed(5))):r=1,this.config.rotate.innerRotate||this.config.rotate.controlsFix?(this.video.style.transformOrigin="center center",this.video.style.transform="rotate("+this.rotateDeg+"turn) scale("+r+")",this.video.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale("+r+")"):(this.root.style.transformOrigin="center center",this.root.style.transform="rotate("+this.rotateDeg+"turn) scale(1)",this.root.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this;n.rotateDeg||(n.rotateDeg=0);var i=e?1:-1;n.rotateDeg=(n.rotateDeg+1+.25*i*t)%1,this.updateRotateDeg(),n.emit("rotate",360*n.rotateDeg)}},{key:"onFocus",value:function(){var e=this;o.default.removeClass(this.root,"xgplayer-inactive"),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout((function(){e.emit("blur")}),e.config.inactive)}},{key:"onBlur",value:function(){!this.config.enablePausedInactive&&this.paused||this.ended||this.config.closeInactive||o.default.addClass(this.root,"xgplayer-inactive")}},{key:"onPlay",value:function(){o.default.addClass(this.root,"xgplayer-isloading"),o.default.addClass(this.root,"xgplayer-playing"),o.default.removeClass(this.root,"xgplayer-pause")}},{key:"onPause",value:function(){o.default.addClass(this.root,"xgplayer-pause"),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function(){o.default.addClass(this.root,"xgplayer-ended"),o.default.removeClass(this.root,"xgplayer-playing")}},{key:"onSeeking",value:function(){this.isSeeking=!0,this.onWaiting()}},{key:"onTimeupdate",value:function(){this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"xgplayer-isloading")}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"xgplayer-isloading")}},{key:"onWaiting",value:function(){var e=this;e.waitTimer&&clearTimeout(e.waitTimer),e.checkTimer&&(clearInterval(e.checkTimer),e.checkTimer=null);var t=e.currentTime;e.waitTimer=setTimeout((function(){o.default.addClass(e.root,"xgplayer-isloading"),e.checkTimer=setInterval((function(){e.currentTime!==t&&(o.default.removeClass(this.root,"xgplayer-isloading"),clearInterval(e.checkTimer),e.checkTimer=null)}),1e3)}),500)}},{key:"onPlaying",value:function(){this.paused||(this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"xgplayer-isloading xgplayer-nostart xgplayer-pause xgplayer-ended xgplayer-is-error xgplayer-replay"),o.default.addClass(this.root,"xgplayer-playing"))}},{key:"onKeydown",value:function(e,t){var n=e||window.event;if(!n||37!==n.keyCode&&38!==n.keyCode&&39!==n.keyCode&&40!==n.keyCode&&32!==n.keyCode||t.emit("focus"),!n||40!==n.keyCode&&38!==n.keyCode){if(n&&39===n.keyCode)t.currentTime+10<=t.duration?t.currentTime+=10:t.currentTime=t.duration-1;else if(n&&37===n.keyCode)t.currentTime-10>=0?t.currentTime-=10:t.currentTime=0;else if(n&&32===n.keyCode)if(t.paused){var i=t.play();void 0!==i&&i&&i.catch((function(e){}))}else t.pause()}else{if(t.controls){var r=t.controls.querySelector(".xgplayer-slider");r&&(o.default.hasClass(r,"xgplayer-none")&&o.default.removeClass(r,"xgplayer-none"),t.sliderTimer&&clearTimeout(t.sliderTimer),t.sliderTimer=setTimeout((function(){o.default.addClass(r,"xgplayer-none")}),t.config.inactive))}n&&40===n.keyCode?t.volume-.1>=0?t.volume=parseFloat((t.volume-.1).toFixed(1)):t.volume=0:n&&38===n.keyCode&&(t.volume+.1<=1?t.volume=parseFloat((t.volume+.1).toFixed(1)):t.volume=1)}}},{key:"cumulateTime",get:function(){if(this.logParams&&this.logParams.played instanceof Array){var e=o.default.computeWatchDur(this.logParams.played)||0;return Number(e.toFixed(3))}return 0}}],[{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}]),t}(a.default);y.util=o.default,y.sniffer=l.default,y.Errors=u.default,t.default=y,e.exports=t.default},function(e,t,n){"use strict";var i=n(23)();e.exports=function(e){return e!==i&&null!==e}},function(e,t,n){"use strict";e.exports=function(e){return null!=e}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,a=n[t];"video"===e||"audio"===e?a&&r.setAttribute(i,a):r.setAttribute(i,a)})),r},hasClass:function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,(function(e){return e===t})):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},addClass:function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):util.hasClass(e,t)||(e.className+=" "+t))},removeClass:function(e,t){e&&(e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):util.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")})))},toggleClass:function(e,t){e&&t.split(/\s+/g).forEach((function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)}))},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(i){0===t.indexOf("#")&&(n=e.getElementById(t.slice(1)))}return n},padStart:function(e,t,n){for(var i=String(n),r=t>>0,a=Math.ceil(r/i.length),o=[],s=String(e);a--;)o.push(i);return o.join("").substring(0,r-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),i=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:e[n]?util.deepCopy(e[n],t[n]):e[n]=t[n]})),e},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},clearInterval:function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},createImgBtn:function(e,t,n,i){var r=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(r.style.backgroundImage='url("'+t+'")',n&&i){var a=void 0,o=void 0,s=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(a=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,1))})),r.style.width=""+a+s,r.style.height=""+o+s,r.style.backgroundSize=""+a+s+" "+o+s,r.style.margin="start"===e?"-"+o/2+s+" auto auto -"+a/2+s:"auto 5px auto 5px"}return r},Hex2RGBA:function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,(function(e){sixHex+=e+e})),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,(function(kw){rgb.push(eval("0x"+kw))})),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},isWeiXin:function(){return window.navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1},computeWatchDur:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++)if(!(!e[n].end||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin))if(t.length<1)t.push({begin:e[n].begin,end:e[n].end});else for(var i=0;i<t.length;i++){var r=e[n].begin,a=e[n].end;if(a<t[i].begin){t.splice(i,0,{begin:r,end:a});break}if(!(r>t[i].end)){var o=t[i].begin,s=t[i].end;t[i].begin=Math.min(r,o),t[i].end=Math.max(a,s);break}if(i>t.length-2){t.push({begin:r,end:a});break}}for(var l=0,u=0;u<t.length;u++)l+=t[u].end-t[u].begin;return l},downloadFile:function(e){var t=this;return new Promise((function(n,i){var r=new XMLHttpRequest;r.open("get",e),r.responseType="arraybuffer",r.onload=function(){var i=void 0,a=r.response;try{i=new Blob([a],{type:"application/x-mpegURL"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(i=new BlobBuilder).append(a),i=i.getBlob()}var o=URL.createObjectURL(i);t.cacheBuffer[e]={blobUrl:o,blob:i},t.options.backupUrls&&t.options.backupUrls.length&&!t.backup_download_success&&t.options.backupUrls.every((function(e){return t.cacheBuffer[e]&&!isPromise(t.cacheBuffer[e])}))&&(t.emit("backup_download_success"),t.backup_download_success=!0),n({blobUrl:o,blob:i})},r.onerror=function(i){delete t.cacheBuffer[e],n(e)},r.onprogress=function(n){-1==t.cacheBuffer[e]&&r&&(r.abort(),delete t.cacheBuffer[e])},r.send()}))}};exports.default=util,module.exports=exports.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}};t.default=function e(t,n,o,s,l,u,c,d){var p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""},f=arguments[9],h=arguments[10];r(this,e);var g={};if(arguments.length>1)g.playerVersion=i.version,g.errorType=t,g.domain=document.domain,g.duration=o,g.currentTime=n,g.networkState=s,g.readyState=l,g.currentSrc=c,g.src=u,g.ended=d,g.errd=p,g.ex=(a[t]||{}).msg,g.errorCode=f,g.mediaError=h;else{var y=arguments[0];Object.keys(y).map((function(e){g[e]=y[e]})),g.ex=(y.type&&a[y.type]||{}).msg}return g},e.exports=t.default},function(e){e.exports={name:"xgplayer",version:"2.9.5",description:"video player",main:"./dist/index.js",typings:"./types/index.d.ts",bin:{xgplayer:"bin/xgplayer.js"},scripts:{prepare:"npm run build",build:"webpack --progress --display-chunks -p",watch:"webpack --progress --display-chunks -p --watch --mode development"},keywords:["video","player"],babel:{presets:["es2015"],plugins:["add-module-exports","babel-plugin-bulk-import"]},repository:{type:"git",url:"git+https://github.com/bytedance/xgplayer.git"},author:"yinguohui@bytedance.com",license:"MIT",dependencies:{chalk:"^2.3.2",commander:"^2.15.1","danmu.js":"^0.2.17",deepmerge:"^1.5.0",downloadjs:"1.4.7",draggabilly:"^2.2.0","event-emitter":"^0.3.5","fs-extra":"^5.0.0",install:"^0.13.0",pasition:"^1.0.1","request-frame":"^1.5.3"},browserslist:["> 5%","IE 9","iOS 7","Firefox > 20"],devDependencies:{"@types/events":"^3.0.0",autoprefixer:"^9.1.5","babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-bulk-import":"^1.0.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1",chai:"^4.1.2","core-js":"^2.5.4","css-loader":"^0.28.11","json-loader":"^0.5.7","node-sass":"^4.8.3","postcss-cssnext":"^3.1.0","postcss-loader":"^2.1.5","raw-loader":"^2.0.0","sass-loader":"^6.0.7","style-loader":"^0.20.3",sugarss:"^1.0.1",webpack:"^4.11.0","webpack-cli":"^3.0.2",zlib:"^1.0.5"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={get device(){return i.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isAndroid:i,isPc:!(o||i||n||a),isSymbian:n,isWindowsPhone:t,isFireFox:r}}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=void 0,o=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=function(e,n){var i=e,r=n;if(null===r)return!1;var a="";if(i.indexOf(".")>-1){var o=i.split(".");a=o[0],i=o[1]}"os_version"===i&&(r=""+r),a?"user"===a||"header"===a?t.envInfo[a][i]=r:"headers"===a?t.envInfo.header.headers[i]=r:t.envInfo.header.headers.custom[i]=r:t.envInfo.user.hasOwnProperty(i)?["user_type","device_id","ip_addr_id"].indexOf(i)>-1?t.envInfo.user[i]=Number(r):["user_id","web_id","user_unique_id","ssid"].indexOf(i)>-1?t.envInfo.user[i]=String(r):["user_is_auth","user_is_login"].indexOf(i)>-1&&(t.envInfo.user[i]=Boolean(r)):t.envInfo.header.hasOwnProperty(i)?t.envInfo.header[i]=r:t.envInfo.header.headers.hasOwnProperty(i)?t.envInfo.header.headers[i]=r:t.envInfo.header.headers.custom[i]=r},this.get=function(){var e={user:{},header:{headers:{custom:{}}}},n=t.envInfo,i=n.user,o=Object.keys(i),s=Array.isArray(o),l=0;for(o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var c=u;i[c]!==a&&(e.user[c]=i[c])}var d=n.header,p=Object.keys(d),f=Array.isArray(p),h=0;for(p=f?p:p[Symbol.iterator]();;){var g;if(f){if(h>=p.length)break;g=p[h++]}else{if((h=p.next()).done)break;g=h.value}var y=g;d[y]!==a&&"headers"!==y&&(e.header[y]=d[y])}var m=n.header.headers,v=Object.keys(m),b=Array.isArray(v),x=0;for(v=b?v:v[Symbol.iterator]();;){var w;if(b){if(x>=v.length)break;w=v[x++]}else{if((x=v.next()).done)break;w=x.value}var _=w;"custom"!==_&&m[_]!==a&&(e.header.headers[_]=m[_])}var k=n.header.headers.custom,E=Object.keys(k);if(E.length){var T=E,S=Array.isArray(T),C=0;for(T=S?T:T[Symbol.iterator]();;){var A;if(S){if(C>=T.length)break;A=T[C++]}else{if((C=T.next()).done)break;A=C.value}var D=A;e.header.headers.custom[D]=k[D]}}return{user:e.user,header:r({},e.header,{headers:e.header.headers})}},this.envInfo={user:{user_unique_id:a,user_type:a,user_id:a,user_is_auth:a,user_is_login:a,device_id:a,web_id:a,ip_addr_id:a,ssid:a},header:{app_id:a,app_name:a,app_install_id:a,app_package:a,app_channel:a,app_version:a,os_name:a,os_version:a,device_model:a,ab_client:a,ab_version:a,traffic_type:a,utm_source:a,utm_medium:a,utm_campaign:a,client_ip:a,device_brand:a,os_api:a,access:a,language:a,region:a,app_language:a,app_region:a,creative_id:a,ad_id:a,campaign_id:a,log_type:a,rnd:a,platform:a,sdk_version:a,province:a,city:a,timezone:a,tz_offset:a,tz_name:a,sim_region:a,carrier:a,resolution:a,browser:a,browser_version:a,referrer:a,referrer_host:a,headers:{utm_term:a,utm_content:a,custom:{}}}}},s=function(e){var t=document.createElement("a");return t.href=e,t},l=window.screen&&window.screen.width||0,u=window.screen&&window.screen.height||0,c=l+" x "+u,d=navigator.appVersion,p=navigator.userAgent,f=navigator.language,h=document.referrer,g=s(h).hostname,y=function(e){var t=s(e).search;t=t.slice(1);var n={};return t.split("&").forEach((function(e){var t=e.split("="),i=t[0],r=t[1];n[i]=decodeURIComponent(void 0===r?"":r)})),n}(location.href),m="",v="",b="",x=""+parseFloat(d),w=void 0,_=void 0;-1!==(w=p.indexOf("Opera"))&&(b="Opera",x=p.substring(w+6),-1!==(w=p.indexOf("Version"))&&(x=p.substring(w+8))),-1!==(w=p.indexOf("Edge"))?(b="Microsoft Edge",x=p.substring(w+5)):-1!==(w=p.indexOf("MSIE"))?(b="Microsoft Internet Explorer",x=p.substring(w+5)):-1!==(w=p.indexOf("Chrome"))?(b="Chrome",x=p.substring(w+7)):-1!==(w=p.indexOf("Safari"))?(b="Safari",x=p.substring(w+7),-1!==(w=p.indexOf("Version"))&&(x=p.substring(w+8))):-1!==(w=p.indexOf("Firefox"))&&(b="Firefox",x=p.substring(w+8)),-1!==(_=x.indexOf(";"))&&(x=x.substring(0,_)),-1!==(_=x.indexOf(" "))&&(x=x.substring(0,_)),-1!==(_=x.indexOf(")"))&&(x=x.substring(0,_));for(var k,E,T=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(d)?"wap":"web",S=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],C=0;C<S.length;C++){var A=S[C];if(A.r.test(p)){m=A.s;break}}function D(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""}switch(/Windows/.test(m)&&(v=D(/Windows (.*)/,m),m="windows"),m){case"Mac OS X":v=D(/Mac OS X (10[\.\_\d]+)/,p),m="mac";break;case"Android":(E=D(/Android ([\.\_\d]+)/,k=p))||(E=D(/Android\/([\.\_\d]+)/,k)),v=E,m="android";break;case"iOS":v=(v=/OS (\d+)_(\d+)_?(\d+)?/.exec(d))?v[1]+"."+v[2]+"."+(0|v[3]):"",m="ios"}var O={screen_size:c,browser:b,browser_version:x,platform:T,os_name:m,os_version:v,userAgent:p,screen_width:l,screen_height:u,device_model:m,language:f,referrer:h,referrer_host:g,utm_source:y.utm_source,utm_medium:y.utm_medium,utm_campaign:y.utm_campaign,utm_term:y.utm_term,utm_content:y.utm_content},R={get:function(e){var t="no localStorage";localStorage&&localStorage.getItem&&(t=localStorage.getItem(e));var n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n},set:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage&&localStorage.setItem&&localStorage.setItem(e,n)}catch(e){}}},L=4001,P=4e3,M=4002,B=4003,U=500,I=5001,j="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var F=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";z(this,e),this.init=function(e){t.isLog=e},this.info=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a;t.isLog&&(a=console).log.apply(a,[t.prefix+e].concat(i))},this.warn=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a;t.isLog&&(a=console).warn.apply(a,[t.prefix+e].concat(i))},this.error=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a;t.isLog&&(a=console).error.apply(a,[t.prefix+e].concat(i))},this.dir=function(){var e;t.isLog&&(e=console).dir.apply(e,arguments)},this.table=function(e){t.isLog&&console.table(e)},this.logJSON=function(e){"object"===(void 0===e?"undefined":j(e))&&t.isLog&&t.info("",JSON.stringify(e,null,2))},this.deprecated=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.warn.apply(t,["[DEPRECATED]"+e].concat(i))},this.throw=function(e){throw t.error(t.prefix),new Error(e)};var i=n?"["+n+"]":"";this.prefix="[tea-sdk]"+i},N=new F,q=function(e,t,n,i){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.onload=function(){try{var e=JSON.parse(r.responseText);n&&n(e)}catch(e){i&&i()}},r.onerror=function(){i&&i()},r.send(JSON.stringify(t))},H=(new Date).getTimezoneOffset(),V=parseInt(-H/60,10),G=60*H,W=void 0;try{W="3.2.7"}catch(k){W="2.x"}var Y=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,e.call(this));return n.initClientEnv=function(){n.set("os_name",O.os_name),n.set("os_version",O.os_version),n.set("device_model",O.device_model),n.set("platform",O.platform),n.set("sdk_version",W),n.set("browser",O.browser),n.set("browser_version",O.browser_version),n.set("language",O.language),n.set("timezone",V),n.set("tz_offset",G),n.set("resolution",O.screen_width+"x"+O.screen_height),n.set("screen_width",O.screen_width),n.set("screen_height",O.screen_height),n.set("referrer",O.referrer),n.set("referrer_host",O.referrer_host),n.set("utm_source",O.utm_source),n.set("utm_medium",O.utm_medium),n.set("utm_campaign",O.utm_campaign),n.set("utm_term",O.utm_term),n.set("utm_content",O.utm_content)},n.initClientEnv(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o)),X=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.isString=function(e){return"String"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNumber=function(e){return"Number"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isBoolean=function(e){return"Boolean"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFunction=function(e){return"Function"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNull=function(e){return"Null"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isUndefined=function(e){return"Undefined"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isObj=function(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isArray=function(e){return"Array"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFalse=function(e){return""===e||null==e||"null"===e||"undefined"===e||0===e||!1===e||NaN===e},e.prototype.isTrue=function(e){return!this.isFalse(e)},e.prototype.isLowIE=function(){return window.XDomainRequest},e}()),$=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var i,r=[];n=n<=25?n:n%25;var a=String.fromCharCode(n+97);i=e.split(a);for(var o=0;o<i.length;o++){var s=parseInt(i[o],n);s=1*s^t;var l=String.fromCharCode(s);r.push(l)}return r.join("")}}(e,64,25)};function K(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,K)}var Z=function(){return K().replace(/-/g,"").slice(0,19)},J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Q={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},ee=function(e){try{var t=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]+)"));return decodeURIComponent(t?t[1]:"")}catch(e){return""}},te=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,e.call(this));return n.init=function(e){var t=e.app_id,i=e.channel,r=e.log,a=e.channel_domain,o=e.name;if("number"!=typeof t)throw new Error("app_id 必须是一个数字，注意检查是否是以`string`的方式传入的？");n.logger=new F(o),n.logger.init(r),n.initConfigs(e),n.initUrls(i,a),n.setEnv("app_id",t)},n.initConfigs=function(e){var t=e.app_id,i=e.disable_ssid,r=e.disable_webid,a=e.disable_sdk_monitor;n.app_id=t,n.evtDataCacheKey="__tea_cache_events_"+t,i&&(n.logger.info("ssid已禁用，设置user_unique_id不会请求ssid接口。"),n.isSsidDisabled=!0),r&&(n.logger.info("webid服务已禁用，ssid同时被禁用。将本地生成webid。"),n.isWebidDisabled=!0,n.isSsidDisabled=!0),a&&(n.logger.info("SDK监控已禁用。"),n.isSdkMonitorDisabled=!0)},n.initUrls=function(e,t){if("internal"===e&&(n.logger.warn("channel 的值 internal 已被废弃，已自动改为 cn。"),e="cn"),!t&&!Q[e])throw new Error("channel 变量只能是 `cn`, `sg`,`va`");var i=t||$(Q[e]);i=i.replace(/\/+$/,""),n.reportUrl=i+"/v1/list",n.userTokensPrefix=""+i},n.setEnv=function(e,t){if("app_id"===e&&n.checkUserToken(t),"user_unique_id"===e){if(n.blackUuid.some((function(e){return e===String(t)})))return void n.logger.warn('设置了无效的值 {user_unique_id："%s"}。该操作已忽略。',t);n.verifyTokens(t)}if("web_id"===e){if(!t)return;(!n.envInfo.user.user_unique_id||n.envInfo.user.user_unique_id&&n.envInfo.user.user_unique_id===n.envInfo.user.web_id)&&n.set("user_unique_id",t)}n.set(e,t)},n.transferFromCookie=function(){var e=n.tokensCacheKey,t=ee("tt_webid"),i=ee("__tea_sdk__ssid"),r=ee("__tea_sdk__user_unique_id");if(X.isLowIE()){if(t){var a={web_id:t,ssid:t,user_unique_id:t};R.set(e,JSON.stringify(a))}return!1}if(t&&i&&r){var o={web_id:t,ssid:i,user_unique_id:r};R.set(e,JSON.stringify(o))}},n.purifyBlackUuid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.blackUuid.some((function(t){return t===e.user_unique_id}))){var t={};return n.setUserTokens(t),n.logger.warn('检测到无效的用户标识，已重置用户状态。{user_unique_id: "%s"}',e.user_unique_id),t}return e},n.getUserTokens=function(){return R.get(n.tokensCacheKey)||{}},n.setUserTokens=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R.set(n.tokensCacheKey,e)},n.checkUserToken=function(e){var t="__tea_cache_tokens_"+e;n.tokensCacheKey=t,n.transferFromCookie();var i=n.purifyBlackUuid(n.getUserTokens());i.user_unique_id&&i.web_id?(n.envInfo.user.user_unique_id=i.user_unique_id,n.envInfo.user.web_id=i.web_id,n.envInfo.user.ssid=i.ssid||"",n.logger.info("初始化已经检测到了 webid user_unique_id，一般情况下不需要再次验证 id 了"),n.unlock()):n.requestWebId(e)},n.saveTokenToStorage=function(e){var t=e.web_id,i=e.ssid,r=e.user_unique_id;n.setUserTokens({web_id:t,ssid:i,user_unique_id:r})},n.requestWebId=function(){n.isRequestWebId=!0;var e=function(e){var t=n.envInfo.user.web_id||e.web_id,i=e.ssid;n.isRequestWebId=!1,n.envInfo.user.ssid=i,n.envInfo.user.web_id=t,n.envInfo.user.user_unique_id=t,n.saveTokenToStorage({web_id:t,ssid:i,user_unique_id:t}),n.waitForVerifyTokens?(n.lock(),n.verifyTokens(n.realUuid)):(n.unlock(),n.callback&&n.callback())};n.isWebidDisabled?e({web_id:Z(),ssid:""}):function(){var t=n.userTokensPrefix+"/v1/user/webid";q(t,{app_id:n.app_id,url:location.href,user_agent:O.userAgent,referer:O.referrer,user_unique_id:""},(function(t){0!==t.e?n.logger.error("请求 webid 失败。请联系管理员。"):e(t)}),(function(){n.isRequestWebId=!1,n.logger.error("获取 webid 失败，数据将不会被上报")}))}()},n.verifyTokens=function(e){var t=n.tokensCacheKey;if(n.waitForVerifyTokens=!1,n.realUuid=""+e,n.isRequestWebId)return n.waitForVerifyTokens=!0,n.logger.info("正在请求 webid，requestSsid 将会在前者请求完毕之后被调用"),!1;var i=n.getUserTokens();if(i.user_unique_id===n.realUuid&&i.ssid&&i.web_id)n.logger.info("传入的 user_id/user_unique_id 与 缓存中的完全一致，无需再次请求"),n.unlock();else{n.lock(),n.envInfo.user.user_unique_id=n.realUuid;var r=J({},n.getUserTokens(),{user_unique_id:n.realUuid});if(R.set(t,JSON.stringify(r)),X.isLowIE())return n.unlock(),!1;n.isSsidDisabled?(n.unlock(),n.callback&&n.callback()):n.requestSsid()}},n.requestSsid=function(){var e=n.getUserTokens(),t=n.userTokensPrefix+"/v1/user/ssid";q(t,{app_id:n.app_id,web_id:e.web_id,user_unique_id:""+e.user_unique_id},(function(t){if(n.unlock(),0!==t.e)n.logger.error("请求 ssid 失败~");else{n.envInfo.user.ssid=t.ssid;var i=J({},e,{ssid:t.ssid});n.setUserTokens(i),n.logger.info("根据 user_unique_id 更新 ssid 成功！注意：在这之前不应该有数据被发出去"),n.callback&&n.callback()}}),(function(){n.unlock(),n.logger.error("根据 user_unique_id 获取新 ssid 失败")}))},n.setEvtParams=function(e){var t=J({},e);Object.keys(t).forEach((function(e){n.evtParams[e]=t[e]}))},n.mergeEnvToEvents=function(e){var t=n.mergeEnv(),i=[],r=0,a=void 0;return e.forEach((function(e){var t=!!e.params.__disable_storage__;void 0===a?a=t:(t!==a||i[r].length>=5)&&(r+=1,a=!a),i[r]=i[r]||[],i[r].push(e)})),i.map((function(e){return{events:e.map((function(e){var t=J({},n.evtParams,e.params);return delete t.__disable_storage__,J({},e,{params:JSON.stringify(t)})})),user:t.user,header:t.header,verbose:n.debugMode?1:void 0,__disable_storage__:e[0].params.__disable_storage__}}))},n.mergeEnv=function(){var e=n.get(),t=Y.get(),i=J({},e.user),r=J({},t.header.headers.custom,e.header.headers.custom),a=J({},t.header.headers,e.header.headers,{custom:r}),o=J({},t.header,e.header);return{user:i,header:J({},o,{headers:JSON.stringify(a)})}},n.evtParams={},n.reportUrl="",n.userTokensPrefix="",n.isSsidDisabled=!1,n.isWebidDisabled=!1,n.isSdkMonitorDisabled=!1,n.debugMode=!1,n.blackUuid=["null","undefined","0","","None"],n.logger=function(){},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.lock=function(){this.isUserTokensReady=!1},t.prototype.unlock=function(){this.isUserTokensReady=!0},t.prototype.enableDebugMode=function(e){this.debugMode=e},t}(o),ne=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=function(e,n){t.cache[e]=n},this.get=function(e){return t.cache[e]},this.clean=function(e){t.cache[e]=void 0},this.cache={}},ie=new ne,re=function(){function e(t){var n=t.disable_storage,i=void 0!==n&&n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isPersistent=!i,this._storage=this._isPersistent?R:new ne,this._storageKey="",this._data=void 0}return e.prototype.setStorageKey=function(e){this._storageKey=e},e.prototype.getAllEvents=function(){var e=this.getData();Object.keys(e).reduce((function(t,n){return t.concat(e[n]||[])}),[])},e.prototype.getData=function(){return this._checkIsDataInit(),this._data},e.prototype.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._checkIsDataInit(),0!==t.length&&(this._data[e]=t,this._save())},e.prototype.delete=function(e){this._checkIsDataInit(),this._data[e]&&(delete this._data[e],this._save())},e.prototype._checkIsDataInit=function(){if(void 0===this._data)try{var e,t=this._getDataFromStorage();X.isArray(t)?(this._data=((e={})[Z()]=t,e),this._save()):this._data=t}catch(e){this._data={}}},e.prototype._checkStorageKey=function(){if(!this._storageKey)throw new Error("must call setStorageKey('xxx') first")},e.prototype._getDataFromStorage=function(){return this._checkStorageKey(),this._storage.get(this._storageKey)||{}},e.prototype._save=function(){this._checkStorageKey(),this._storage.set(this._storageKey,this._data)},e}(),ae=function(e,t){try{var n=e.split("v1")[0];t.forEach((function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return t="&"===t[0]?t.slice(1):t}(e),i=new Image(1,1);i.onload=function(){i=null},i.onerror=function(){i=null},i.src=n+"/v1/gif?"+t}))}catch(e){}},oe=function(e,t){if(window.XDomainRequest)return ae(e,t);var n=new XMLHttpRequest;n.open("POST",e+"?rdn="+Math.random(),!0),n.onload=function(){},n.onerror=function(){n.abort()},n.send(JSON.stringify(t))},se=function e(t,n,i,r){try{var a=t.split("v1")[0];if(!a)return void r(t,n,L);n.forEach((function(e){var o=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return t="&"===t[0]?t.slice(1):t}(e),s=new Image(1,1);s.onload=function(){s=null,i()},s.onerror=function(){s=null,r(t,n,P)},s.src=a+"/v1/gif?"+o}))}catch(e){r(t,n,M,e.message)}},le=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.send=function(e){var t=e.url,i=e.data,r=e.success,a=e.fail,o=e.eventError;if(function(e){var t=e.url,n=e.data,i=e.success,r=e.fail,a=e.notSure,o=e.isUnload,s=n;if(window.XDomainRequest)se(t,s,i,r);else{if(o)return window.navigator&&window.navigator.sendBeacon?(a(),void(window.navigator.sendBeacon(t,JSON.stringify(s))?i():r(t,n,B))):void se(t,s,i,r);var l=new XMLHttpRequest;l.open("POST",t+"?rdn="+Math.random(),!0),l.onload=function(){i(t,s,l.responseText)},l.onerror=function(){l.abort(),r(t,s,U)},l.send(JSON.stringify(s))}}({url:t,data:i,success:function(e,t,i){r();try{var a=JSON.parse(i).e;if(0!==a){var s="未知错误";-2===a&&(s="事件格式错误！请检查字段类型是否正确。"),n.logger.error("数据上报失败！","错误码："+a+"。错误信息："+s),o(t,a),ce(e,t,a)}}catch(n){ce(e,t,I)}},fail:function(e,t,i){n.logger.error("数据上报失败！","错误码："+i),a(t,i),ce(e,t,i)},notSure:e.notSure,isUnload:e.isUnload}),!n.isSdkMonitorDisabled&&!n.isSdkOnLoadEventReady){n.isSdkOnLoadEventReady=!0;try{var s=i[0].header,l=i[0].user;ue(t,{app_id:s.app_id,app_name:s.app_name,sdk_version:s.sdk_version,web_id:l.web_id})}catch(e){}}},this.logger=t.logger||N,this.isSdkOnLoadEventReady=!1,this.isSdkMonitorDisabled=!1},ue=function(e,t){try{var n={events:[{event:"onload",params:JSON.stringify({app_id:t.app_id,app_name:t.app_name||"",sdk_version:t.sdk_version}),local_time_ms:Date.now()}],user:{user_unique_id:t.web_id},header:{app_id:1338}};setTimeout((function(){oe(e,[n])}),16)}catch(e){}},ce=function(e,t,n){try{var i=t[0].user,r=t[0].header,a=[];t.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var o={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:n,app_id:r.app_id,app_name:r.app_name||"",error_event:e.event,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(r),user:JSON.stringify(i)}),local_time_ms:Date.now()}})),user:{user_unique_id:i.user_unique_id},header:{app_id:1338}};setTimeout((function(){oe(e,[o])}),16)}catch(e){}},de=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,e.call(this));r.addListener=function(){window.addEventListener("unload",(function(){r.report(!0)}),!1),window.addEventListener("beforeunload",(function(){r.report(!0)}),!1),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&r.report(!0)}),!1)},r.setReady=function(e){r.isReady=e,r.eventSender.isSdkMonitorDisabled=r.isSdkMonitorDisabled,r.checkAndSendCachedStorageEvents(),r.report()},r.eventReportTimer=null,r.event=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ie.get(r.evtDataCacheKey)||[],i=t?[].concat(e,n):[].concat(n,e);ie.set(r.evtDataCacheKey,i),i.length>=5?r.report():(r.eventReportTimer&&clearTimeout(r.eventReportTimer),r.eventReportTimer=setTimeout((function(){r.report(),r.eventReportTimer=null}),r.waitForBatchTime))},r.report=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!r.isUserTokensReady)return!1;if(!r.isReady)return!1;var t=ie.get(r.evtDataCacheKey)||[];ie.clean(r.evtDataCacheKey);var n=r.mergeEnvToEvents(t);r.sendData(n,e)},r.sendData=function(e,t){var n=[],i=0,a=void 0;e.forEach((function(e){var t=!!e.__disable_storage__;void 0===a?a=t:(t!==a||n[i].length>=5)&&(i+=1,a=!a),n[i]=n[i]||[],n[i].push(e)})),n.forEach((function(e){var n=Z();e[0].__disable_storage__||r.eventStorage.add(n,e),r._sendData(n,e,t)}))},r.checkAndSendCachedStorageEvents=function(){var e=r.eventStorage.getData(),t=Object.keys(e);t.length>0&&t.forEach((function(t){r._sendData(t,e[t])}))},r._sendData=function(e,t,n){r.isReporting=!0;var i=function(){r.isReporting=!1};r.eventSender.send({url:r.reportUrl,data:t,success:function(){i(),r.sendDataSuccess(e)},fail:function(e,t){i(),r.reportErrorCallback(e,t),setTimeout((function(){r.report()}),3e3)},eventError:function(e,t){r.reportErrorCallback(e,t)},notSure:i,isUnload:n})},r.sendDataSuccess=function(e){r.eventStorage.delete(e),r.report()};var a=n.log,o=n.disable_storage,s=n.max_batch_num,l=void 0===s?5:s,u=n.batch_time,c=void 0===u?30:u;return r.init(n),r.maxBatchNum=l,r.waitForBatchTime=c,r.isReady=!1,r.addListener(),r.enableDebugMode(!!a),r.eventStorage=new re({disable_storage:o}),r.eventStorage.setStorageKey(r.evtDataCacheKey),r.eventSender=new le({logger:r.logger}),r.reportErrorCallback=function(){},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(te),pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fe=function(){var e=+Date.now()+Number((""+Math.random()).slice(2,8));return function(){return e+=1}}(),he=function(e,t){var n=e;/^event\./.test(e)&&(n=e.slice(6));var i=t;return X.isObj(i)||(i={}),i.event_index=fe(),{event:n,params:i,local_time_ms:+new Date}},ge=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e){if(!X.isObj(e))throw new Error("init 的参数必须是Object类型");n.logger.init(e.log),n.channel=new de(pe({},e,{name:n.name})),n.channel.callback=function(){n.callbackSend&&n.start()}},this.config=function(e){X.isObj(e)||n.logger.throw("config 参数必须是 {} 的格式"),e.log&&(n.logger.init(!0),n.channel.enableDebugMode(!0),e.log=null);var t=Object.keys(e);if(!t.length)return!1;var i=t,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{if((a=i.next()).done)break;o=a.value}var s=o,l=e[s];switch(s){case"evtParams":n.channel.setEvtParams(l);break;case"disable_ssid":n.logger.deprecated("(disable_ssid)请通过init函数来设置。"),l&&(n.logger.info("ssid已禁用，设置user_unique_id不会请求ssid接口。"),n.channel.isSsidDisabled=l);break;case"disable_auto_pv":l&&(n.logger.info("已禁止默认上报predefine_pageview事件，需手动上报。"),n._autoSendPV=!1);break;case"_staging_flag":""+l=="1"&&n.logger.info("根据_staging_flag设置，数据将会上报到stag 表。"),n.channel.setEvtParams({_staging_flag:Number(l)});break;case"reportErrorCallback":"function"==typeof l&&(n.channel.reportErrorCallback=l);break;default:n.channel.setEnv(s,l)}}},this.send=function(){n.start()},this.start=function(){if(n.channel.isUserTokensReady){if(n._isSendFuncCalled)return;n._isSendFuncCalled=!0,n.logger.info("看到本提示，意味着用户信息已完全就绪，上报通道打开。用户标识如下："),n.logger.logJSON(n.channel.get().user),n._autoSendPV&&n.predefinePageView(),n.channel.setReady(!0)}else n.callbackSend=!0},this.predefinePageView=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:document.title||location.pathname,url:location.href,url_path:location.pathname},i=pe({},t,e);n.event("predefine_pageview",i,!0)},this.event=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=X.isBoolean(t[t.length-1]),a=!!r&&t[t.length-1],o=r?t.slice(0,t.length-1):t,s=o[0],l=[];X.isArray(s)?l=o:l[0]=o,l=l.map((function(e){return he.apply(void 0,e)})),n.channel.event(l,a)},this._isSendFuncCalled=!1,this._autoSendPV=!0,this.name=t,this.logger=new F(t)};ge.exportMethods=["init","config","send","start","predefinePageView"],t.default=function e(t){var n=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._exportCollect=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n._isQueueProcessed?n._executeCmd.apply(n,t):(n.cmdQueue.push(t),n._processCmdQueue())},this._processCmdQueue=function(){if(0!==n.cmdQueue.length){var e=function(e,t,n){var i=-1;return e.forEach((function(e,r){(void 0!==n?e[n]:e)===t&&(i=r)})),i}(n.cmdQueue,"init","0");-1!==e&&(n._isQueueProcessed=!0,n._executeCmd.apply(n,n.cmdQueue[e]),n.cmdQueue.forEach((function(t,i){i!==e&&n._executeCmd.apply(n,t)})),n.cmdQueue=[])}},this._executeCmd=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r,a,o=t[0];ge.exportMethods.indexOf(o)>-1?(r=n.colloctor)[o].apply(r,t.slice(1)):(a=n.colloctor).event.apply(a,t)},this.name=t||"Collector"+ +new Date,this.cmdQueue=[],this.colloctor=new ge(this.name),this._isQueueProcessed=!1,this._processCmdQueue(),this._exportCollect.init=this._exportCollect.bind(this,"init"),this._exportCollect.config=this._exportCollect.bind(this,"config"),this._exportCollect.send=this._exportCollect.bind(this,"send"),this._exportCollect.start=this._exportCollect.bind(this,"start"),this._exportCollect.predefinePageView=this._exportCollect.bind(this,"predefinePageView"),this._exportCollect},e.exports=t.default},function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=S(n(0)),r=S(n(38)),a=S(n(39)),o=S(n(40)),s=S(n(41)),l=S(n(42)),u=S(n(43)),c=S(n(44)),d=S(n(45)),p=S(n(46)),f=S(n(47)),h=S(n(48)),g=S(n(49)),y=S(n(50)),m=S(n(51)),v=S(n(52)),b=S(n(53)),x=S(n(54)),w=S(n(55)),_=S(n(56)),k=S(n(57)),E=S(n(58)),T=S(n(7));function S(e){return e&&e.__esModule?e:{default:e}}S(n(59));var C={};function A(e,t,n){var i=e;t.map((function(e,r){i[e]=r==t.length-1?n:i[e]||{},i=i[e]}))}A(C,["controls","collect"],T.default),A(C,["controls","cssFullscreen"],E.default),A(C,["controls","danmu"],k.default),A(C,["controls","definition"],_.default),A(C,["controls","download"],w.default),A(C,["controls","errorRetry"],x.default),A(C,["controls","fullscreen"],b.default),A(C,["controls","i18n"],v.default),A(C,["controls","localPreview"],m.default),A(C,["controls","logger"],y.default),A(C,["controls","memoryPlay"],g.default),A(C,["controls","mobile"],h.default),A(C,["controls","pc"],f.default),A(C,["controls","pip"],p.default),A(C,["controls","play"],d.default),A(C,["controls","playNext"],c.default),A(C,["controls","reload"],u.default),A(C,["controls","replay"],l.default),A(C,["controls","rotate"],s.default),A(C,["controls","screenShot"],o.default),A(C,["controls","start"],a.default),A(C,["controls","volume"],r.default),t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(11)),a=s(n(3)),o=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logParams={bc:0,bu_acu_t:0,played:[]},this._hasStart=!1,this.videoConfig={controls:!!t.isShowControl,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"]||t.x5VideoPlayerType,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.muted&&(this.videoConfig.muted="muted"),t.loop&&(this.videoConfig.loop="loop");var n="";if(this.textTrackShowDefault=!0,t.textTrack&&Array.isArray(t.textTrack)&&(t.textTrack.length>0&&!t.textTrack.some((function(e){return e.default}))&&(t.textTrack[0].default=!0,this.textTrackShowDefault=!1),t.textTrack.some((function(e){if(e.src&&e.label&&e.default)return n+='<track src="'+e.src+'" ',e.kind&&(n+='kind="'+e.kind+'" '),n+='label="'+e.label+'" ',e.srclang&&(n+='srclang="'+e.srclang+'" '),n+=(e.default?"default":"")+">",!0})),this.videoConfig.crossorigin="anonymous"),t.textTrackStyle){var i=document.createElement("style");this.textTrackStyle=i,document.head.appendChild(i);var o="";for(var s in t.textTrackStyle)o+=s+": "+t.textTrackStyle[s]+";";var l=t.id?"#"+t.id:t.el.id?"#"+t.el.id:"."+t.el.className;i.sheet.insertRule?i.sheet.insertRule(l+" video::cue { "+o+" }",0):i.sheet.addRule&&i.sheet.addRule(l+" video::cue",o)}this.video=a.default.createDom(this.videoConfig.mediaType,n,this.videoConfig,""),!this.textTrackShowDefault&&n&&(this.video.getElementsByTagName("Track")[0].track.mode="hidden"),t.autoplay&&(this.video.autoplay=!0,t.autoplayMuted&&(this.video.muted=!0)),this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart"].map((function(e){return t={},n=e,i="on"+e.charAt(0).toUpperCase()+e.slice(1),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t;var t,n,i})),(0,r.default)(this),this._interval={};var u="0,0",c=this;this.ev.forEach((function(e){c.evItem=Object.keys(e)[0];var t=Object.keys(e)[0];c.video.addEventListener(Object.keys(e)[0],(function(){c.logParams&&("play"===t?c.hasStart=!0:"canplay"===t?a.default.removeClass(c.root,"xgplayer-is-enter"):"waiting"===t?(c.logParams.bc++,c.inWaitingStart=(new Date).getTime()):"playing"===t?(a.default.removeClass(c.root,"xgplayer-is-enter"),c.inWaitingStart&&(c.logParams.bu_acu_t+=(new Date).getTime()-c.inWaitingStart,c.inWaitingStart=void 0)):"loadeddata"===t?c.logParams.played.push({begin:0,end:-1}):"seeking"===t?c.logParams.played.push({begin:c.video.currentTime,end:-1}):c&&c.logParams&&c.logParams.played&&"timeupdate"===t&&(c.logParams.played.length<1&&c.logParams.played.push({begin:c.video.currentTime,end:-1}),c.logParams.played[c.logParams.played.length-1].end=c.video.currentTime),"error"===t?c._onError(t):c.emit(t,c),c.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(t)<0?(clearInterval(c._interval.bufferedChange),a.default.setInterval(c,"bufferedChange",(function(){if(c.video&&c.video.buffered){for(var e=[],t=0,n=c.video.buffered.length;t<n;t++)e.push([c.video.buffered.start(t),c.video.buffered.end(t)]);e.toString()!==u&&(u=e.toString(),c.emit("bufferedChange",e))}}),200)):"timeupdate"!==t&&a.default.clearInterval(c,"bufferedChange")))}),!1)}))}return i(e,[{key:"_onError",value:function(e){this.video&&this.video.error&&this.emit(e,new o.default("other",this.currentTime,this.duration,this.networkState,this.readyState,this.currentSrc,this.src,this.ended,{line:162,msg:this.error,handle:"Constructor"},this.video.error.code,this.video.error))}},{key:"destroy",value:function(){this.textTrackStyle&&this.textTrackStyle.parentNode.removeChild(this.textTrackStyle)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,n=t.buffered,i=t.currentTime;if(n)for(var r=0,a=n.length;r<a&&(e[0]=n.start(r),e[1]=n.end(r),!(e[0]<=i&&i<=e[1]));r++);return e[0]-i<=0&&i-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"!=typeof e||!0!==e||this._hasStart||(this._hasStart=!0,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this.video.currentTime},set:function(e){var t=this;("function"!=typeof isFinite||isFinite(e))&&(a.default.hasClass(this.root,"xgplayer-ended")?(this.once("playing",(function(){t.video.currentTime=e})),this.replay()):this.video.currentTime=e,this.emit("currentTimeChange"))}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this.video.duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){var t=this;a.default.hasClass(this.root,"xgplayer-ended")||this.emit("urlchange",JSON.parse(JSON.stringify(t.logParams))),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.video.pause(),this.video.src=e,this.emit("srcChange"),this.logParams.playSrc=e,this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.once("loadeddata",(function e(){t.logParams.vt=(new Date).getTime(),t.logParams.pt>t.logParams.vt&&(t.logParams.pt=t.logParams.vt),t.logParams.vd=t.video.duration,t.off("loadeddata",e)}))}},{key:"poster",set:function(e){var t=a.default.findDom(this.root,".xgplayer-poster");t&&(t.style.backgroundImage="url("+e+")")}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"fullscreen",get:function(){return a.default.hasClass(this.root,"xgplayer-is-fullscreen")||a.default.hasClass(this.root,"xgplayer-fullscreen-active")}},{key:"bullet",get:function(){return!!a.default.findDom(this.root,"xg-danmu")&&a.default.hasClass(a.default.findDom(this.root,"xg-danmu"),"xgplayer-has-danmu")}},{key:"textTrack",get:function(){return a.default.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function(){return a.default.hasClass(this.root,"xgplayer-pip-active")}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";var i,r,a,o,s,l,u,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(12),p=n(29),f=Function.prototype.apply,h=Function.prototype.call,g=Object.create,y=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n,r;return p(t),r=this,i.call(this,e,n=function(){a.call(r,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},s={on:i=function(e,t){var n;return p(t),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=g(null),y(this,"__ee__",b),b.value=null),n[e]?"object"===c(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:a=function(e,t){var n,i,r,a;if(p(t),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===(void 0===(i=n[e])?"undefined":c(i)))for(a=0;r=i[a];++a)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[a?0:1]:i.splice(a,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,i,r,a;if(v.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"===(void 0===r?"undefined":c(r))){for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)f.call(i,this,a)}else switch(arguments.length){case 1:h.call(r,this);break;case 2:h.call(r,this,arguments[1]);break;case 3:h.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];f.call(r,this,a)}}},l={on:d(i),once:d(r),off:d(a),emit:d(o)},u=m({},l),e.exports=t=function(e){return null==e?g(u):m(Object(e),l)},t.methods=s},function(e,t,n){"use strict";var i=n(2),r=n(13),a=n(17),o=n(25),s=n(26);(e.exports=function(e,t){var n,r,l,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],i(e)?(n=s.call(e,"c"),r=s.call(e,"e"),l=s.call(e,"w")):(n=l=!0,r=!1),c={value:t,configurable:n,enumerable:r,writable:l},u?a(o(u),c):c}).gs=function(e,t,n){var l,u,c,d;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],i(t)?r(t)?i(n)?r(n)||(c=n,n=void 0):n=void 0:(c=t,t=n=void 0):t=void 0,i(e)?(l=s.call(e,"c"),u=s.call(e,"e")):(l=!0,u=!1),d={get:t,set:n,configurable:l,enumerable:u},c?a(o(c),d):d}},function(e,t,n){"use strict";var i=n(14),r=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!i(e)&&!r.test(a.call(e))}},function(e,t,n){"use strict";var i=n(15);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!i(e)}},function(e,t,n){"use strict";var i=n(16);e.exports=function(e){if(!i(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(2),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(a,void 0===e?"undefined":i(e))}},function(e,t,n){"use strict";e.exports=n(18)()?Object.assign:n(19)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var i=n(20),r=n(24),a=Math.max;e.exports=function(e,t){var n,o,s,l=a(arguments.length,2);for(e=Object(r(e)),s=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},o=1;o<l;++o)i(t=arguments[o]).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(21)()?Object.keys:n(22)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var i=n(1),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var i=n(1);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var i=n(1),r=Array.prototype.forEach,a=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=a(null);return r.call(arguments,(function(e){i(e)&&o(Object(e),t)})),t}},function(e,t,n){"use strict";e.exports=n(27)()?String.prototype.contains:n(28)},function(e,t,n){"use strict";var i="razdwatrzy";e.exports=function(){return"function"==typeof i.contains&&!0===i.contains("dwa")&&!1===i.contains("foo")}},function(e,t,n){"use strict";var i=String.prototype.indexOf;e.exports=function(e){return i.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};r(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return i(e,[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=void 0,r=0;r<t.length;r++)(i=n.add(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=void 0,r=0;r<t.length;r++)(i=n.put(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator,function(a,o){i=[n(32),n(33)],void 0===(r=function(e,t){return function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}var r=e.jQuery;function a(e,t){this.element="string"==typeof e?document.querySelector(e):e,r&&(this.$element=r(this.element)),this.options=i({},this.constructor.defaults),this.option(t),this._create()}var o=a.prototype=Object.create(n.prototype);a.defaults={},o.option=function(e){i(this.options,e)};var s={relative:!0,absolute:!0,fixed:!0};function l(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}return o._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=i({},this.position);var e=getComputedStyle(this.element);s[e.position]||(this.element.style.position="relative"),this.on("pointerDown",this.onPointerDown),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},o.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},o.dispatchEvent=function(e,t,n){var i=[t].concat(n);this.emitEvent(e,i),this.dispatchJQueryEvent(e,t,n)},o.dispatchJQueryEvent=function(t,n,i){var r=e.jQuery;if(r&&this.$element){var a=r.Event(n);a.type=t,this.$element.trigger(a,i)}},o._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},o._getPositionCoord=function(e,n){if(-1!=e.indexOf("%")){var i=t(this.element.parentNode);return i?parseFloat(e)/100*i[n]:0}return parseInt(e,10)},o._addTransformPosition=function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),a=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=a}},o.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",e,[t])},o.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},o.measureContainment=function(){var e=this.getContainer();if(e){var n=t(this.element),i=t(e),r=this.element.getBoundingClientRect(),a=e.getBoundingClientRect(),o=i.borderLeftWidth+i.borderRightWidth,s=i.borderTopWidth+i.borderBottomWidth,l=this.relativeStartPosition={x:r.left-(a.left+i.borderLeftWidth),y:r.top-(a.top+i.borderTopWidth)};this.containSize={width:i.width-o-l.x-n.width,height:i.height-s-l.y-n.height}}},o.getContainer=function(){var e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},o.onPointerMove=function(e,t,n){this.dispatchJQueryEvent("pointerMove",e,[t,n])},o.dragMove=function(e,t,n){if(this.isEnabled){var i=n.x,r=n.y,a=this.options.grid,o=a&&a[0],s=a&&a[1];i=l(i,o),r=l(r,s),i=this.containDrag("x",i,o),r=this.containDrag("y",r,s),i="y"==this.options.axis?0:i,r="x"==this.options.axis?0:r,this.position.x=this.startPosition.x+i,this.position.y=this.startPosition.y+r,this.dragPoint.x=i,this.dragPoint.y=r,this.dispatchEvent("dragMove",e,[t,n])}},o.containDrag=function(e,t,n){if(!this.options.containment)return t;var i="x"==e?"width":"height",r=l(-this.relativeStartPosition[e],n,"ceil"),a=this.containSize[i];return a=l(a,n,"floor"),Math.max(r,Math.min(a,t))},o.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",e,[t])},o.dragEnd=function(e,t){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},o.animate=function(){if(this.isDragging){this.positionDrag();var e=this;requestAnimationFrame((function(){e.animate()}))}},o.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},o.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},o.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},o.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},o.enable=function(){this.isEnabled=!0},o.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},o.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},o._init=function(){},r&&r.bridget&&r.bridget("draggabilly",a),a}(a,e,t)}.apply(t,i))||(e.exports=r)}(window)},function(e,t,n){"use strict";var i,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,void 0===(r="function"==typeof(i=function(){function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i=n.length;function r(e){var n=getComputedStyle(e);return n||t("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),n}var o,s=!1;function l(t){if(function(){if(!s){s=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(t);var i=r(t);o=200==Math.round(e(i.width)),l.isBoxSizeOuter=o,n.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==(void 0===t?"undefined":a(t))&&t.nodeType){var u=r(t);if("none"==u.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<i;t++)e[n[t]]=0;return e}();var c={};c.width=t.offsetWidth,c.height=t.offsetHeight;for(var d=c.isBorderBox="border-box"==u.boxSizing,p=0;p<i;p++){var f=n[p],h=u[f],g=parseFloat(h);c[f]=isNaN(g)?0:g}var y=c.paddingLeft+c.paddingRight,m=c.paddingTop+c.paddingBottom,v=c.marginLeft+c.marginRight,b=c.marginTop+c.marginBottom,x=c.borderLeftWidth+c.borderRightWidth,w=c.borderTopWidth+c.borderBottomWidth,_=d&&o,k=e(u.width);!1!==k&&(c.width=k+(_?0:y+x));var E=e(u.height);return!1!==E&&(c.height=E+(_?0:m+w)),c.innerWidth=c.width-(y+x),c.innerHeight=c.height-(m+w),c.outerWidth=c.width+v,c.outerHeight=c.height+b,c}}return l})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator,function(a,o){i=[n(34)],void 0===(r=function(e){return function(e,t){function n(){}var i=n.prototype=Object.create(t.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(t){for(var n=(t=void 0===t||t)?"addEventListener":"removeEventListener",i=t?this._touchActionValue:"",r=0;r<this.handles.length;r++){var a=this.handles[r];this._bindStartEvent(a,t),a[n]("click",this),e.PointerEvent&&(a.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var r={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},a={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(e){var t=r[e.target.nodeName],n=a[e.target.type],i=!t||n;return i||this._pointerReset(),i},i.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},i.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},i._dragPointerMove=function(e,t){var n={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(e,t),n},i.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},i.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},i._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},i._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},i.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},i._dragMove=function(e,t,n){this.isDragging&&this.dragMove(e,t,n)},i.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},i._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},i.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},i.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},i._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},n.getPointerPoint=t.getPointerPoint,n}(a,e)}.apply(t,i))||(e.exports=r)}(window)},function(e,t,n){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator,function(a,o){i=[n(35)],void 0===(r=function(e){return function(e,t){function n(){}var i=n.prototype=Object.create(t.prototype);i.bindStartEvent=function(e){this._bindStartEvent(e,!0)},i.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},i._bindStartEvent=function(t,n){var i=(n=void 0===n||n)?"addEventListener":"removeEventListener",r="mousedown";e.PointerEvent?r="pointerdown":"ontouchstart"in e&&(r="touchstart"),t[i](r,this)},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.getTouch=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.identifier==this.pointerIdentifier)return n}},i.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},i.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},i.onpointerdown=function(e){this._pointerDown(e,e)},i._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},i.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var r={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return i._bindPostStartEvents=function(t){if(t){var n=r[t.type];n.forEach((function(t){e.addEventListener(t,this)}),this),this._boundPointerEvents=n}},i._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(t){e.removeEventListener(t,this)}),this),delete this._boundPointerEvents)},i.onmousemove=function(e){this._pointerMove(e,e)},i.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},i.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},i._pointerMove=function(e,t){this.pointerMove(e,t)},i.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},i.onmouseup=function(e){this._pointerUp(e,e)},i.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},i.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},i._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},i.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},i._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},i._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},i.pointerDone=function(){},i.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},i.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},i._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},i.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},n.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},n}(a,e)}.apply(t,i))||(e.exports=r)}(window)},function(e,t,n){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator,"undefined"!=typeof window&&window,void 0===(r="function"==typeof(i=function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],r=0;r<n.length;r++){var a=n[r];i&&i[a]&&(this.off(e,a),delete i[a]),a.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}},function(e,t,n){"use strict";var i,r,a;"function"==typeof Symbol&&Symbol.iterator,r=[],void 0===(a="function"==typeof(i=function(){return function e(t,n,i){var r,a,o=window,s="application/octet-stream",l=i||s,u=t,c=!n&&!i&&u,d=document.createElement("a"),p=function(e){return String(e)},f=o.Blob||o.MozBlob||o.WebKitBlob||p,h=n||"download";if(f=f.call?f.bind(o):Blob,"true"===String(this)&&(l=(u=[u,l])[0],u=u[1]),c&&c.length<2048&&(h=c.split("/").pop().split("?")[0],d.href=c,-1!==d.href.indexOf(c))){var g=new XMLHttpRequest;return g.open("GET",c,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,h,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&f!==p))return navigator.msSaveBlob?navigator.msSaveBlob(b(u),h):x(u);l=(u=b(u)).type||s}else if(/([\x80-\xff])/.test(u)){for(var y=0,m=new Uint8Array(u.length),v=m.length;y<v;++y)m[y]=u.charCodeAt(y);u=new f([m],{type:l})}function b(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,a=0,o=new Uint8Array(r);a<r;++a)o[a]=i.charCodeAt(a);return new f([o],{type:n})}function x(e,t){if("download"in d)return d.href=e,d.setAttribute("download",h),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){o.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=u instanceof f?u:new f([u],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,h);if(o.URL)x(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===p)try{return x("data:"+l+";base64,"+o.btoa(r))}catch(e){return x("data:"+l+","+encodeURIComponent(r))}(a=new FileReader).onload=function(e){x(this.result)},a.readAsDataURL(r)}return!0}})?i.apply(t,r):i)||(e.exports=a)},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("volume",(function(){var e=this,t=e.root,n=a.default.util,i=void 0,r=void 0,o=void 0,s=void 0;function l(){e.volume=e.config.volume,i=e.controls.querySelector(".xgplayer-volume"),r=i.querySelector(".xgplayer-slider"),o=i.querySelector(".xgplayer-bar"),s=i.querySelector(".xgplayer-drag"),"mobile"===a.default.sniffer.device&&h()}function u(t){e.video.muted=!1,r.focus(),n.event(t);var i=o.getBoundingClientRect(),a=(t.clientX,t.clientY),l=s.getBoundingClientRect().height,u=!1,c=function(t){t.preventDefault(),t.stopPropagation(),n.event(t),u=!0;var r=l-t.clientY+a,o=r/i.height;s.style.height=r+"px",e.volume=Math.max(Math.min(o,1),0)},d=function t(a){if(a.preventDefault(),a.stopPropagation(),n.event(a),window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),!u){var o=i.height-(a.clientY-i.top),l=o/i.height;s.style.height=o+"px",l<=0&&(e.volume>0?s.volume=e.video.volume:l=s.volume),e.volume=Math.max(Math.min(l,1),0)}r.volume=e.volume,u=!1};return window.addEventListener("mousemove",c),window.addEventListener("touchmove",c),window.addEventListener("mouseup",d),window.addEventListener("touchend",d),!1}function c(){"mobile"===a.default.sniffer.device?e.video.muted?(e.video.muted=!1,e.emit("unmute"),e.volume=1):(e.video.muted=!0,e.emit("mute"),e.volume=0):(e.video.muted=!1,e.volume<.1?(r.volume<.1?e.volume=.6:e.volume=r.volume,e.emit("unmute")):(e.volume=0,e.emit("mute")))}function d(){n.addClass(t,"xgplayer-volume-active"),i&&i.focus()}function p(){n.removeClass(t,"xgplayer-volume-active")}e.once("canplay",l),e.on("volumeBarClick",u),e.on("volumeIconClick",c),e.on("volumeIconEnter",d),e.on("volumeIconLeave",p);var f=null;function h(){f&&clearTimeout(f),f=setTimeout((function(){if("mobile"===a.default.sniffer.device)n.removeClass(t,"xgplayer-volume-muted"),n.removeClass(t,"xgplayer-volume-large"),e.video.muted||e.video.defaultMuted?(e.video.muted||(e.video.muted=!0),e.video.defaultMuted=!1,n.addClass(t,"xgplayer-volume-muted")):n.addClass(t,"xgplayer-volume-large");else{if(n.removeClass(t,"xgplayer-volume-muted"),n.removeClass(t,"xgplayer-volume-small"),n.removeClass(t,"xgplayer-volume-large"),0===e.volume?n.addClass(t,"xgplayer-volume-muted"):e.volume<.5?n.addClass(t,"xgplayer-volume-small"):n.addClass(t,"xgplayer-volume-large"),!o)return;var i=o.getBoundingClientRect().height||76;s.style.height=e.volume*i+"px"}}),50)}e.on("volumechange",h),e.once("destroy",(function t(){e.off("canplay",l),e.off("volumeBarClick",u),e.off("volumeIconClick",c),e.off("volumeIconEnter",d),e.off("volumeIconLeave",p),e.off("volumechange",h),e.off("destroy",t),f&&(clearTimeout(f),f=null)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("start",(function(){var e=this,t=e.root,n=a.default.util;function i(){if(n.hasClass(t,"xgplayer-nostart")){n.removeClass(t,"xgplayer-nostart"),n.addClass(t,"xgplayer-is-enter"),t.querySelector("video")||e.start();var i=e.play();void 0!==i&&i&&i.catch((function(e){}))}else e.paused&&(n.removeClass(t,"xgplayer-nostart xgplayer-isloading"),setTimeout((function(){var t=e.play();void 0!==t&&t&&t.catch((function(e){}))}),10))}e.on("startBtnClick",i),e.once("destroy",(function t(){e.off("startBtnClick",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("screenShot",(function(){var e=this,t=(e.root,e.config.screenShot);if(t){var n=.92;(t.quality||0===t.quality)&&(n=t.quality);var i=void 0===t.type?"image/png":t.type,r=void 0===t.format?".png":t.format,a=document.createElement("canvas"),o=a.getContext("2d"),s=new Image;a.width=this.config.width||600,a.height=this.config.height||337.5;var l=function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)};e.on("screenShotBtnClick",u),e.once("destroy",(function t(){e.off("screenShotBtnClick",u),e.off("destroy",t)}))}function u(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.width=e.video.videoWidth||600,a.height=e.video.videoHeight||337.5,s.onload=function(){o.drawImage(e.video,0,0,a.width,a.height),s.setAttribute("crossOrigin","anonymous"),s.src=a.toDataURL(i,n).replace(i,"image/octet-stream");var u=s.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");e.emit("screenShot",u),t&&l(u,"截图"+r)}()}}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("rotate",(function(){var e=this,t=e.config.rotate;function n(){e.rotate(t.clockwise,t.innerRotate)}t&&(e.on("rotateBtnClick",n),e.once("destroy",(function t(){e.off("rotateBtnClick",n),e.off("destroy",t)})))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("replay",(function(){var e=this,t=a.default.util,n=e.root;function i(){t.removeClass(n,"replay"),e.replay()}e.on("replayBtnClick",i),e.on("ended",(function(){e.config.loop||t.addClass(n,"replay")})),e.once("destroy",(function t(){e.off("replayBtnClick",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("reload",(function(){var e=this;function t(){a.default.util.removeClass(e.root,"xgplayer-is-error"),e.src=e.config.url}e.config.reload&&(e.on("reloadBtnClick",t),e.once("destroy",(function n(){e.off("reloadBtnClick",t),e.off("destroy",n)})))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("playNext",(function(){var e=this,t=e.config.playNext;function n(){e.currentVideoIndex+1<t.urlList.length&&(e.currentVideoIndex++,e.video.autoplay=!0,e.src=t.urlList[e.currentVideoIndex],e.emit("playerNext",e.currentVideoIndex+1),e.currentVideoIndex+1===t.urlList.length&&e.emit("urlListEnd"))}e.currentVideoIndex=-1,e.on("playNextBtnClick",n),e.once("destroy",(function t(){e.off("playNextBtnClick",n),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("play",(function(){var e=this;function t(){if(e.config.allowPlayAfterEnded||!e.ended)if(e.paused){var t=e.play();void 0!==t&&t&&t.catch((function(e){}))}else e.pause()}e.on("playBtnClick",t),e.once("destroy",(function n(){e.off("playBtnClick",t),e.off("destroy",n)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("pip",(function(){var e=this,t=a.default.util,n=e.root;function i(){t.hasClass(n,"xgplayer-pip-active")?e.exitPIP():e.getPIP()}e.on("pipBtnClick",i),e.once("destroy",(function t(){e.off("pipBtnClick",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("pc",(function(){var e=this,t=a.default.util,n=e.controls,i=e.root,r=0,o=void 0;function s(){clearTimeout(e.leavePlayerTimer),e.emit("focus",e)}function l(){e.config.closePlayerBlur||(e.leavePlayerTimer=setTimeout((function(){e.emit("blur",e)}),e.config.leavePlayerTime||0))}function u(t){e.config.autoplay&&e.start()}e.onElementClick=function(e,n){e.preventDefault(),this.config.closeVideoStopPropagation||e.stopPropagation();var i=this;i.config.closeVideoClick||(r++,o&&clearTimeout(o),1===r?o=setTimeout((function(){if(t.hasClass(i.root,"xgplayer-nostart"))return!1;if(!i.ended)if(i.paused){var e=i.play();void 0!==e&&e&&e.catch((function(e){}))}else i.pause();r=0}),200):r=0)},e.video.addEventListener("click",(function(t){e.onElementClick(t,e.video)}),!1),e.onElementDblclick=function(e,t){if(e.preventDefault(),e.stopPropagation(),!this.config.closeVideoDblclick){var i=n.querySelector(".xgplayer-fullscreen");if(i){var r=void 0;document.createEvent?(r=document.createEvent("Event")).initEvent("click",!0,!0):r=new Event("click"),i.dispatchEvent(r)}}},e.video.addEventListener("dblclick",(function(t){e.onElementDblclick(t,e.video)}),!1),i.addEventListener("mouseenter",s),i.addEventListener("mouseleave",l),n.addEventListener("mouseenter",(function(t){e.userTimer&&clearTimeout(e.userTimer)}),!1),n.addEventListener("mouseleave",(function(t){e.config.closeControlsBlur||e.emit("focus",e)}),!1),e.once("ready",u),e.once("destroy",(function t(){i.removeEventListener("mouseenter",s),i.removeEventListener("mouseleave",l),e.off("ready",u),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("mobile",(function(){var e=this,t=a.default.util,n=(e.controls,e.root);function i(t){e.video.addEventListener("touchend",(function(t){e.onElementTouchend(t,e.video)})),e.video.addEventListener("touchstart",(function(){e.isTouchMove=!1})),e.video.addEventListener("touchmove",(function(){e.isTouchMove=!0})),e.config.autoplay&&e.start()}e.onElementTouchend=function(e,i){if(e.preventDefault(),e.stopPropagation(),t.hasClass(n,"xgplayer-inactive")?this.emit("focus"):this.emit("blur"),!this.config.closeVideoTouch&&!this.isTouchMove){if(t.hasClass(this.root,"xgplayer-nostart"))return!1;if(!this.ended)if(this.paused){var r=this.play();void 0!==r&&r&&r.catch((function(e){}))}else this.pause()}},e.once("ready",i),e.once("destroy",(function t(){e.off("ready",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("memoryPlay",(function(){var e=this;e.on("memoryPlayStart",(function(t){e.currentTime=t}))}))},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(6)),a=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("logger",(function(){var e=this,t=i.default.util;if(!0!==e.config.noLog){window.__xigua_log_sdk__||(window.__xigua_log_sdk__=new a.default("tracker"),window.__xigua_log_sdk__.init({app_id:1300,channel:"cn",log:!1,disable_sdk_monitor:!0}),window.__xigua_log_sdk__("config",{evtParams:{log_type:"logger",page_url:document.URL,domain:window.location.host,pver:e.version,ua:navigator.userAgent.toLowerCase()},disable_auto_pv:!0}),window.__xigua_log_sdk__.start()),e.config.uid&&window.__xigua_log_sdk__("config",{user_unique_id:e.config.uid});var n=function(n){if(t.hasClass(e.root,"xgplayer-is-enter")){var i=(new Date).getTime(),r={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,pt:e.logParams.pt,lt:i};window.__xigua_log_sdk__("b",r)}else if(t.hasClass(e.root,"xgplayer-playing")){var a=t.computeWatchDur(e.logParams.played),o=(new Date).getTime();e.logParams.pt&&e.logParams.vt||(e.logParams.pt=(new Date).getTime(),e.logParams.vt=e.logParams.pt),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt);var s={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,bc:e.logParams.bc-1>0?e.logParams.bc-1:0,bb:e.logParams.bc-1>0?1:0,bu_acu_t:e.logParams.bu_acu_t,pt:e.logParams.pt,vt:e.logParams.vt,vd:1e3*e.logParams.vd,watch_dur:parseFloat((1e3*a).toFixed(3)),cur_play_pos:parseFloat((1e3*e.currentTime).toFixed(3)),lt:o};window.__xigua_log_sdk__("d",s)}};"pc"===r.default.device?window.addEventListener("beforeunload",n,!1):"mobile"===r.default.device&&window.addEventListener("pagehide",n,!1),e.on("routechange",n),e.once("destroy",(function t(){"pc"===r.default.device?window.removeEventListener("beforeunload",n):"mobile"===r.default.device&&window.removeEventListener("pagehide",n),e.off("routechange",n),e.off("destroy",t)}))}}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("localPreview",(function(){var e=this,t=e.root;function n(n){e.uploadFile=n.files[0];var i=URL.createObjectURL(e.uploadFile);if(a.default.util.hasClass(t,"xgplayer-nostart"))e.config.url=i,e.start();else{e.src=i;var r=e.play();void 0!==r&&r&&r.catch((function(e){}))}}e.on("upload",n),e.once("destroy",(function t(){e.off("upload",n),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("i18n",(function(){var e=this,t={},n=e.constructor.util;t.en={HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"Pip",SCREENSHOT:"Screenshot",LIVE:"LIVE"},t["zh-cn"]={HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"当下载时发生错误",MEDIA_ERR_DECODE:"当解码时发生错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播"},t.jp={HAVE_NOTHING:"オーディオ/ビデオが準備できているか情報がありません",HAVE_METADATA:"オーディオ/ビデオのメタデータは準備できています",HAVE_CURRENT_DATA:"現在の再生位置に関するデータは利用可能ですが、次のフレーム/ミリ秒を再生するのに十分なデータがありません",HAVE_FUTURE_DATA:"現在、少なくとも次のフレームのデータが利用可能です",HAVE_ENOUGH_DATA:"利用可能なデータは再生を開始するのに十分です",NETWORK_EMPTY:"オーディオ/ビデオが初期化されていません",NETWORK_IDLE:"オーディオ/ビデオはアクティブでリソースが選択されていますが、ネットワークが使用されていません",NETWORK_LOADING:"ブラウザーはデータをダウンロードしています",NETWORK_NO_SOURCE:"オーディオ/ビデオ のソースが見つかりません",MEDIA_ERR_ABORTED:"ユーザーによってフェッチプロセスが中止されました",MEDIA_ERR_NETWORK:"ダウンロード中にエラーが発生しました",MEDIA_ERR_DECODE:"デコード中にエラーが発生しました",MEDIA_ERR_SRC_NOT_SUPPORTED:"オーディオ/ビデオ の形式がサポートされていません",REPLAY:"リプレイ",ERROR:"ネットワークの接続に問題が発生しました",PLAY_TIPS:"プレイ",PAUSE_TIPS:"一時停止",PLAYNEXT_TIPS:"次をプレイ",DOWNLOAD_TIPS:"ダウンロード",ROTATE_TIPS:"回転",RELOAD_TIPS:"再読み込み",FULLSCREEN_TIPS:"フルスクリーン",EXITFULLSCREEN_TIPS:"フルスクリーンを終了",CSSFULLSCREEN_TIPS:"シアターモード",EXITCSSFULLSCREEN_TIPS:"シアターモードを終了",TEXTTRACK:"字幕",PIP:"ミニプレーヤー",SCREENSHOT:"スクリーンショット",LIVE:"生放送"},Object.defineProperty(e,"lang",{get:function(){return e.config&&t[e.config.lang]||t.en},set:function(e){"Object"===n.typeOf(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))}})}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("fullscreen",(function(){var e=this,t=e.root,n=a.default.util;function i(){e.config.rotateFullscreen?n.hasClass(t,"xgplayer-rotate-fullscreen")?e.exitRotateFullscreen():e.getRotateFullscreen():n.hasClass(t,"xgplayer-is-fullscreen")?e.exitFullscreen(t):e.getFullscreen(t)}function r(){var i=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i&&i===t?(n.addClass(t,"xgplayer-is-fullscreen"),e.emit("requestFullscreen")):(n.removeClass(t,"xgplayer-is-fullscreen"),e.emit("exitFullscreen")),e.danmu&&"function"==typeof e.danmu.resize&&e.danmu.resize()}e.on("fullscreenBtnClick",i),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((function(e){document.addEventListener(e,r)})),e.once("destroy",(function t(){e.off("fullscreenBtnClick",i),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((function(e){document.removeEventListener(e,r)})),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},o={maxCount:3,backupUrl:"",isFetch:!0,fetchTimeout:100};a.default.install("errorretry",(function(){var e=this,t=this;if(t.config.errorConfig&&!(t.src.indexOf("blob:")>-1)){var n={},i=t.config.errorConfig;for(var r in o)void 0===i[r]?n[r]=o[r]:n[r]=i[r];t.retryData={count:0,errfTimer:null,isFetchReturn:!1,currentTime:0};var s=t._onError;t._onError=function(i){var r=e.retryData.count;if(r>n.maxCount)n.isFetch?function(e,t,n){var i=function(t,n){e.retryData.isFetchReturn||(e.retryData.isFetchReturn=!0,t(n))};return new Promise((function(r,a){try{var o=new window.XMLHttpRequest;o.open("get",t),o.onload=function(){i(r,{status:o.status,statusText:o.statusText,xhr:o})},o.onerror=function(){i(r,{status:o.status,statusText:o.statusText||"The network environment is disconnected or the address is invalid",xhr:o})},o.onabort=function(){},e.retryData.errfTimer=window.setTimeout((function(){var t=e.retryData.errfTimer;window.clearTimeout(t),e.retryData.errfTimer=null,i(r,{status:-1,statusText:"request timeout"})}),n),o.send()}catch(t){e.retryData.isFetchReturn=!0,i(r,{status:-2,statusText:"request error"})}}))}(e,e.currentSrc,n.fetchTimeout).then((function(t){e.emit("error",new a.default.Errors({type:"network",currentTime:e.currentTime,duration:e.duration||0,networkState:e.networkState,readyState:e.readyState,currentSrc:e.currentSrc,src:e.src,ended:e.ended,httpCode:t.status,httpMsg:t.statusText,errd:{line:101,msg:e.error,handle:"plugin errorRetry"},errorCode:e.video&&e.video.error.code,mediaError:e.video&&e.video.error})),s.call(e,t)})):s.call(e,i);else{0===r&&(e.retryData.currentTime=e.currentTime,e.once("canplay",l.bind(e)));var o="";o=n.count<2?n.backupUrl?n.backupUrl:t.currentSrc:n.backupUrl&&r>1?n.backupUrl:t.currentSrc,e.retryData.count++,e.src=o}}}function l(){this.currentTime=this.retryData.currentTime,this.play(),this.retryData.retryCode=0,this.retryData.isFetchReturn=!1,this.retryData.currentTime=0}}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("download",(function(){var e=this;function t(){e.download()}e.on("downloadBtnClick",t),e.once("destroy",(function n(){e.off("downloadBtnClick",t),e.off("destroy",n)}))}))},function(e,t,n){"use strict";var i,r=n(0);((i=r)&&i.__esModule?i:{default:i}).default.install("definition",(function(){var e=this;e.root,e.once("destroy",(function t(){e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("danmu",(function(){var e=this,t=(e.root,a.default.util);e.on("initDefaultDanmu",(function(n){var i=e.root.querySelector("xg-danmu");if(t.addClass(i,"xgplayer-has-danmu"),!e.config.danmu.closeDefaultBtn){var r=function(){n.start()},a=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&n.pause()},o=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&n.play()},s=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&(n.stop(),n.start())};e.danmuBtn=t.copyDom(n.bulletBtn.createSwitch(!0)),e.controls.appendChild(e.danmuBtn),["click","touchend"].forEach((function(a){e.danmuBtn.addEventListener(a,(function(a){a.preventDefault(),a.stopPropagation(),t.toggleClass(e.danmuBtn,"danmu-switch-active"),t.hasClass(e.danmuBtn,"danmu-switch-active")?(e.emit("danmuBtnOn"),t.addClass(i,"xgplayer-has-danmu"),e.once("timeupdate",r)):(e.emit("danmuBtnOff"),t.removeClass(i,"xgplayer-has-danmu"),n.stop())}))})),e.onElementClick&&i.addEventListener("click",(function(t){e.onElementClick(t,i)}),!1),e.onElementDblclick&&i.addEventListener("dblclick",(function(t){e.onElementDblclick(t,i)}),!1),e.on("pause",a),e.on("play",o),e.on("seeked",s),e.once("destroy",(function t(){e.off("timeupdate",r),e.off("pause",a),e.off("play",o),e.off("seeked",s),e.off("destroy",t)}))}}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("cssFullscreen",(function(){var e=this,t=e.root,n=a.default.util;function i(){n.hasClass(t,"xgplayer-is-cssfullscreen")?e.exitCssFullscreen():e.getCssFullscreen()}e.on("cssFullscreenBtnClick",i),e.on("exitFullscreen",(function(){n.removeClass(t,"xgplayer-is-cssfullscreen")})),e.once("destroy",(function t(){e.off("cssFullscreenBtnClick",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";n(60),n(65),n(66),n(69),n(72),n(73),n(74),n(77),n(80),n(84),n(85),n(87),n(88),n(89),n(91),n(92),n(93),n(95),n(99),n(100),n(102),n(104),n(106),n(107),n(108),n(109)},function(e,t,n){var i=n(61);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(63)(i,r),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(62)(!1)).push([e.i,'.xgplayer-skin-default{background:#000;width:100%;height:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.xgplayer-skin-default *{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}.xgplayer-skin-default.xgplayer-rotate-fullscreen{position:absolute;top:0;left:100%;bottom:0;right:0;height:100vw!important;width:100vh!important;-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.xgplayer-skin-default.xgplayer-is-fullscreen{width:100%!important;height:100%!important;padding-top:0!important;z-index:9999}.xgplayer-skin-default.xgplayer-is-fullscreen.xgplayer-inactive{cursor:none}.xgplayer-skin-default video{width:100%;height:100%;outline:none}.xgplayer-skin-default .xgplayer-none{display:none}@-webkit-keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}@keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}.xgplayer-skin-default .xgplayer-play,.xgplayer-skin-default .xgplayer-play-img{width:40px;position:relative;-webkit-order:0;-moz-box-ordinal-group:1;order:0;display:block;cursor:pointer;margin-left:3px}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-play .xgplayer-icon{margin-top:3px;width:32px}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-play .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}.xgplayer-skin-default .xgplayer-play-img:hover,.xgplayer-skin-default .xgplayer-play:hover{opacity:.85}.xgplayer-skin-default .xgplayer-play-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-play:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}.xgplayer-skin-default .xgplayer-start{border-radius:50%;display:inline-block;width:70px;height:70px;background:rgba(0,0,0,.38);overflow:hidden;text-align:center;line-height:70px;vertical-align:middle;position:absolute;left:50%;top:50%;z-index:115;margin:-35px auto auto -35px;cursor:pointer}.xgplayer-skin-default .xgplayer-start div{position:absolute}.xgplayer-skin-default .xgplayer-start div svg{fill:hsla(0,0%,100%,.7);width:100%;height:100%}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-start:hover{opacity:.85}.xgplayer-skin-default.xgplayer-playing .xgplayer-start,.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-play{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start{display:inline-block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.replay .xgplayer-start,.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default.replay .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.replay .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-enter{display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:#000;z-index:120}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner{display:block;position:absolute;left:50%;top:50%;height:100px;width:100px;position:relative;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div{width:12%;height:26%;background-color:hsla(0,0%,100%,.7);position:absolute;left:44%;top:37%;opacity:0;border-radius:30px;-webkit-animation:fade 1s linear infinite;animation:fade 1s linear infinite}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar1{-webkit-transform:rotate(0deg) translateY(-142%);-ms-transform:rotate(0deg) translateY(-142%);transform:rotate(0deg) translateY(-142%);-webkit-animation-delay:0s;animation-delay:0s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar2{-webkit-transform:rotate(30deg) translateY(-142%);-ms-transform:rotate(30deg) translateY(-142%);transform:rotate(30deg) translateY(-142%);-webkit-animation-delay:-.9163s;animation-delay:-.9163s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar3{-webkit-transform:rotate(60deg) translateY(-142%);-ms-transform:rotate(60deg) translateY(-142%);transform:rotate(60deg) translateY(-142%);-webkit-animation-delay:-.833s;animation-delay:-.833s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar4{-webkit-transform:rotate(90deg) translateY(-142%);-ms-transform:rotate(90deg) translateY(-142%);transform:rotate(90deg) translateY(-142%);-webkit-animation-delay:-.7497s;animation-delay:-.7497s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar5{-webkit-transform:rotate(120deg) translateY(-142%);-ms-transform:rotate(120deg) translateY(-142%);transform:rotate(120deg) translateY(-142%);-webkit-animation-delay:-.6664s;animation-delay:-.6664s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar6{-webkit-transform:rotate(150deg) translateY(-142%);-ms-transform:rotate(150deg) translateY(-142%);transform:rotate(150deg) translateY(-142%);-webkit-animation-delay:-.5831s;animation-delay:-.5831s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar7{-webkit-transform:rotate(180deg) translateY(-142%);-ms-transform:rotate(180deg) translateY(-142%);transform:rotate(180deg) translateY(-142%);-webkit-animation-delay:-.4998s;animation-delay:-.4998s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar8{-webkit-transform:rotate(210deg) translateY(-142%);-ms-transform:rotate(210deg) translateY(-142%);transform:rotate(210deg) translateY(-142%);-webkit-animation-delay:-.4165s;animation-delay:-.4165s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar9{-webkit-transform:rotate(240deg) translateY(-142%);-ms-transform:rotate(240deg) translateY(-142%);transform:rotate(240deg) translateY(-142%);-webkit-animation-delay:-.3332s;animation-delay:-.3332s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar10{-webkit-transform:rotate(270deg) translateY(-142%);-ms-transform:rotate(270deg) translateY(-142%);transform:rotate(270deg) translateY(-142%);-webkit-animation-delay:-.2499s;animation-delay:-.2499s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar11{-webkit-transform:rotate(300deg) translateY(-142%);-ms-transform:rotate(300deg) translateY(-142%);transform:rotate(300deg) translateY(-142%);-webkit-animation-delay:-.1666s;animation-delay:-.1666s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar12{-webkit-transform:rotate(330deg) translateY(-142%);-ms-transform:rotate(330deg) translateY(-142%);transform:rotate(330deg) translateY(-142%);-webkit-animation-delay:-.0833s;animation-delay:-.0833s}@-webkit-keyframes fade{0%{opacity:1}to{opacity:.25}}.xgplayer-skin-default.xgplayer-is-enter .xgplayer-enter{display:block}.xgplayer-skin-default .xgplayer-poster{display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:100;background-size:cover;background-position:50%}.xgplayer-skin-default.xgplayer-nostart .xgplayer-poster{display:block}.xgplayer-skin-default .xgplayer-placeholder{-webkit-flex:1;-moz-box-flex:1;flex:1;-webkit-order:3;-moz-box-ordinal-group:4;order:3;display:block}.xgplayer-skin-default .xgplayer-fullscreen,.xgplayer-skin-default .xgplayer-fullscreen-img{position:relative;-webkit-order:13;-moz-box-ordinal-group:14;order:13;display:block;cursor:pointer;margin-left:5px;margin-right:3px}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips{position:absolute;right:0;left:auto}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img:hover,.xgplayer-skin-default .xgplayer-fullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-fullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen,.xgplayer-skin-default .xgplayer-cssfullscreen-img{position:relative;-webkit-order:12;-moz-box-ordinal-group:13;order:12;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon{width:32px;margin-top:5px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-40px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover,.xgplayer-skin-default .xgplayer-cssfullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-47px}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen-img{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen{position:fixed!important;left:0!important;top:0!important;width:100%!important;height:100%!important;z-index:99999!important}.lang-is-en .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-en .xgplayer-cssfullscreen .xgplayer-tips,.lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-46px}.lang-is-jp .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-120px}.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-60px}.xgplayer-skin-default .xgplayer-volume{outline:none;-webkit-order:4;-moz-box-ordinal-group:5;order:4;width:40px;height:40px;display:block;position:relative;z-index:18}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon{margin-top:8px;cursor:pointer;position:absolute;bottom:-9px}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:none}.xgplayer-skin-default .xgplayer-slider{display:none;position:absolute;width:28px;height:92px;background:rgba(0,0,0,.54);border-radius:1px;bottom:42px;outline:none}.xgplayer-skin-default .xgplayer-slider:after{content:" ";display:block;height:15px;width:28px;position:absolute;bottom:-15px;left:0;z-index:20}.xgplayer-skin-default .xgplayer-bar,.xgplayer-skin-default .xgplayer-drag{display:block;position:absolute;bottom:6px;left:12px;background:hsla(0,0%,100%,.3);border-radius:100px;width:4px;height:76px;outline:none;cursor:pointer}.xgplayer-skin-default .xgplayer-drag{bottom:0;left:0;background:#fa1f41;max-height:76px}.xgplayer-skin-default .xgplayer-drag:after{content:" ";display:inline-block;width:8px;height:8px;background:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,.26);position:absolute;border-radius:50%;left:-2px;top:-6px}.xgplayer-skin-default.xgplayer-volume-active .xgplayer-slider,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:none}.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:block}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-large,.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:none}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:block}.xgplayer-skin-default.xgplayer-mobile .xgplayer-volume .xgplayer-slider{display:none}.xgplayer-skin-default .xgplayer-definition{-webkit-order:5;-moz-box-ordinal-group:6;order:5;width:60px;height:42px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-left:10px;margin-top:-7px}.xgplayer-skin-default .xgplayer-definition ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:42px;left:0;text-align:center;white-space:nowrap;margin-left:-10px;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-definition ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);padding:6px 13px}.xgplayer-skin-default .xgplayer-definition ul li.selected,.xgplayer-skin-default .xgplayer-definition ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-definition .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:5px;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-definition ul,.xgplayer-skin-default.xgplayer-is-definition .xgplayer-definition{display:block}.xgplayer-skin-default .xgplayer-time{-webkit-order:2;-moz-box-ordinal-group:3;order:2;font-family:ArialMT;font-size:13px;color:#fff;line-height:40px;height:40px;text-align:center;display:inline-block;margin:auto 8px}.xgplayer-skin-default .xgplayer-time span{color:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-time .xgplayer-time-current{color:#fff}.xgplayer-skin-default .xgplayer-time .xgplayer-time-current:after{content:"/";display:inline-block;padding:0 3px}.xgplayer-skin-default .xgplayer-controls{display:-webkit-flex;display:-moz-box;display:flex;position:absolute;bottom:0;left:0;right:0;height:40px;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.37),rgba(0,0,0,.75),rgba(0,0,0,.75));z-index:10}.xgplayer-skin-default.no-controls .xgplayer-controls,.xgplayer-skin-default.xgplayer-inactive .xgplayer-controls,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-progress,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-time,.xgplayer-skin-default.xgplayer-nostart .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-live{display:block}.xgplayer-skin-default .xgplayer-live{display:block;font-size:12px;color:#fff;line-height:40px;-webkit-order:1;-moz-box-ordinal-group:2;order:1}.xgplayer-skin-default .xgplayer-loading{display:none;width:100px;height:100px;overflow:hidden;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);position:absolute;left:50%;top:50%;margin:-50px auto auto -50px}.xgplayer-skin-default .xgplayer-loading svg{border-radius:50%;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation:loadingRotate 1s linear infinite;animation:loadingRotate 1s linear infinite}.xgplayer-skin-default .xgplayer-loading svg path{stroke:#ddd;stroke-dasharray:236;-webkit-animation:loadingDashOffset 2s linear infinite;animation:loadingDashOffset 2s linear infinite;animation-direction:alternate-reverse;fill:none;stroke-width:12px}.xgplayer-skin-default.xgplayer-nostart .xgplayer-loading{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-loading{display:none!important}.xgplayer-skin-default.xgplayer-isloading .xgplayer-loading{display:block}.xgplayer-skin-default .xgplayer-progress{display:block;position:absolute;height:20px;line-height:20px;left:12px;right:12px;outline:none;top:-15px;z-index:35}.xgplayer-skin-default .xgplayer-progress-outer{background:hsla(0,0%,100%,.3);display:block;height:3px;line-height:3px;margin-top:8.5px;width:100%;position:relative;cursor:pointer}.xgplayer-skin-default .xgplayer-progress-cache,.xgplayer-skin-default .xgplayer-progress-played{display:block;height:100%;line-height:1;position:absolute;left:0;top:0}.xgplayer-skin-default .xgplayer-progress-cache{width:0;background:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-progress-played{display:block;width:0;background-image:linear-gradient(-90deg,#fa1f41,#e31106);border-radius:0 1.5px 1.5px 0}.xgplayer-skin-default .xgplayer-progress-btn{display:none;position:absolute;left:0;top:-5px;width:13px;height:13px;border-radius:30px;background:#fff;box-shadow:0 0 2px 0 rgba(0,0,0,.26);left:100%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}.xgplayer-skin-default .xgplayer-progress-point{position:absolute}.xgplayer-skin-default .xgplayer-progress-point.xgplayer-tips{margin-left:0;top:-25px;display:none;z-index:100}.xgplayer-skin-default .xgplayer-progress-dot{display:inline-block;position:absolute;height:3px;width:5px;top:0;background:#fff;border-radius:6px;z-index:16}.xgplayer-skin-default .xgplayer-progress-dot .xgplayer-progress-tip{position:absolute;left:0;top:-40px;height:auto;line-height:30px;width:auto;-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8);background:rgba(0,0,0,.3);border-radius:6px;border:1px solid rgba(0,0,0,.8);cursor:default;white-space:nowrap;display:none}.xgplayer-skin-default .xgplayer-progress-dot-show .xgplayer-progress-tip{display:block}.xgplayer-skin-default .xgplayer-progress-thumbnail{position:absolute;-moz-box-sizing:border-box;box-sizing:border-box}.xgplayer-skin-default .xgplayer-progress-thumbnail.xgplayer-tips{margin-left:0;display:none;z-index:99}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-outer{height:6px;margin-top:7px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-dot,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-dot{height:6px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-btn{display:block;top:-3px}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-volume-active .xgplayer-progress{z-index:15}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress-btn{display:block!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-outer{height:3px!important;margin-top:8.5px!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-btn{display:block!important;top:-5px!important}.xgplayer-skin-default .xgplayer-replay{position:absolute;left:0;top:0;width:100%;height:100%;z-index:105;display:none;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;background:rgba(0,0,0,.54);-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.xgplayer-skin-default .xgplayer-replay svg{background:rgba(0,0,0,.58);border-radius:100%;cursor:pointer}.xgplayer-skin-default .xgplayer-replay svg path{-webkit-transform:translate(20px,21px);-ms-transform:translate(20px,21px);transform:translate(20px,21px);fill:#ddd}.xgplayer-skin-default .xgplayer-replay svg:hover{background:rgba(0,0,0,.38)}.xgplayer-skin-default .xgplayer-replay svg:hover path{fill:#fff}.xgplayer-skin-default .xgplayer-replay .xgplayer-replay-txt{display:inline-block;font-family:PingFangSC-Regular;font-size:14px;color:#fff;line-height:34px}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-replay{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default .xgplayer-playbackrate{-webkit-order:8;-moz-box-ordinal-group:9;order:8;width:60px;height:20px;z-index:18;position:relative;display:inline-block;cursor:default}.xgplayer-skin-default .xgplayer-playbackrate ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:20px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);text-align:left;white-space:nowrap;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-playbackrate ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);position:relative;padding:4px 0;text-align:center}.xgplayer-skin-default .xgplayer-playbackrate ul li.selected,.xgplayer-skin-default .xgplayer-playbackrate ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-playbackrate ul li:first-child{position:relative;margin-top:12px}.xgplayer-skin-default .xgplayer-playbackrate ul li:last-child{position:relative;margin-bottom:12px}.xgplayer-skin-default .xgplayer-playbackrate .name{height:20px;position:relative;top:11px;text-align:center;background:rgba(0,0,0,.38);color:hsla(0,0%,100%,.8);border-radius:10px;line-height:20px}.xgplayer-skin-default .xgplayer-playbackrate span{position:relative;top:19px;font-weight:700;text-shadow:0 0 4px rgba(0,0,0,.6)}.xgplayer-skin-default .xgplayer-playbackrate:hover{opacity:1}.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-playbackrate ul{display:block}.xgplayer-skin-default .xgplayer-download{position:relative;-webkit-order:9;-moz-box-ordinal-group:10;order:9;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-download .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-download .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-download .xgplayer-icon svg{position:relative;top:5px;left:5px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips{margin-left:-20px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips .xgplayer-tip-download{display:block}.xgplayer-skin-default .xgplayer-download:hover{opacity:.85}.xgplayer-skin-default .xgplayer-download:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-download .xgplayer-tips{margin-left:-32px}.lang-is-jp .xgplayer-download .xgplayer-tips{margin-left:-40px}.xgplayer-skin-default .danmu-switch{-webkit-order:6;-moz-box-ordinal-group:7;order:6;z-index:26}.xgplayer-skin-default .xgplayer-danmu{display:none;position:absolute;top:0;left:0;right:0;height:100%;overflow:hidden;z-index:9;outline:none}.xgplayer-skin-default .xgplayer-danmu>*{position:absolute;white-space:nowrap;z-index:9}.xgplayer-skin-default .xgplayer-danmu.xgplayer-has-danmu{display:block}.xgplayer-skin-default .xgplayer-panel{outline:none;-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:40px;height:40px;display:inline-block;position:relative;font-family:PingFangSC-Regular;font-size:13px;color:hsla(0,0%,100%,.8);z-index:36}.xgplayer-skin-default .xgplayer-panel .xgplayer-panel-icon{cursor:pointer;position:absolute;margin-left:5px;top:10px}.xgplayer-skin-default .xgplayer-panel-active{display:block!important;bottom:30px}.xgplayer-skin-default .xgplayer-panel-slider{z-index:36;display:none;position:absolute;width:230px;height:230px;background:rgba(0,0,0,.54);border-radius:1px;padding:10px 20px;outline:none;left:-115px;bottom:40px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode{padding-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-radio li{display:inline;list-style:none;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode ul{display:-webkit-flex;display:-moz-box;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode li{margin:0 12px;font-size:11px;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-font{margin-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency{display:block;margin-top:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-progress{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:4px;border-radius:4px;background:linear-gradient(90deg,#f85959,#f85959 100%,#aaa)}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea{display:block;margin-top:8px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-threequarters,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-twoquarters{margin-left:-6px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-full{margin-right:3px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-full-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-onequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-threequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-twoquarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-zero-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-playnext{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;cursor:pointer;top:-2px}.xgplayer-skin-default .xgplayer-playnext .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-playnext .xgplayer-tips .xgplayer-tip-playnext{display:block}.xgplayer-skin-default .xgplayer-playnext:hover{opacity:.85}.xgplayer-skin-default .xgplayer-playnext:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-playnext .xgplayer-tips{margin-left:-25px}.lang-is-jp .xgplayer-playnext .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default.xgplayer-playnext-inactive .xgplayer-playnext{display:none}.xgplayer-skin-default .xgplayer-pip{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:8px}.xgplayer-skin-default .xgplayer-pip .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-pip .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default .xgplayer-pip-lay{position:absolute;top:26px;left:0;width:100%;height:100%;z-index:130;cursor:pointer;background-color:transparent;display:none}.xgplayer-skin-default .xgplayer-pip-lay div{width:100%;height:100%}.xgplayer-skin-default .xgplayer-pip-drag{cursor:move;position:absolute;top:0;left:0;width:100%;height:26px;line-height:26px;background-image:linear-gradient(rgba(0,0,0,.3),transparent);z-index:130;display:none}.xgplayer-skin-default.xgplayer-pip-active{position:fixed;right:0;bottom:200px;width:320px!important;height:180px!important;z-index:110!important}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-controls,.xgplayer-skin-default.xgplayer-pip-active .xgplayer-danmu{display:none}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-pip-lay{display:block}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-pip-drag{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default.xgplayer-inactive .xgplayer-pip-drag{display:none}.lang-is-jp .xgplayer-pip .name span{width:70px;height:20px}.xgplayer-skin-default .xgplayer-rotate{position:relative;-webkit-order:10;-moz-box-ordinal-group:11;order:10;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon{margin-top:7px;width:26px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips{margin-left:-22px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips .xgplayer-tip-rotate{display:block}.xgplayer-skin-default .xgplayer-rotate:hover{opacity:.85}.xgplayer-skin-default .xgplayer-rotate:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-rotate .xgplayer-tips{margin-left:-26px}.lang-is-jp .xgplayer-rotate .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default .xgplayer-reload{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;width:40px;height:40px;cursor:pointer}.xgplayer-skin-default .xgplayer-reload .xgplayer-icon{margin-top:7px;width:26px}.xgplayer-skin-default .xgplayer-reload .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-reload .xgplayer-tips{margin-left:-22px}.xgplayer-skin-default .xgplayer-reload .xgplayer-tips .xgplayer-tip-reload{display:block}.xgplayer-skin-default .xgplayer-reload:hover{opacity:.85}.xgplayer-skin-default .xgplayer-reload:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-reload .xgplayer-tips{margin-left:-26px}.lang-is-jp .xgplayer-reload .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default .xgplayer-screenshot{-webkit-order:11;-moz-box-ordinal-group:12;order:11;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:8px}.xgplayer-skin-default .xgplayer-screenshot .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-screenshot .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.lang-is-en .xgplayer-screenshot .name span,.lang-is-jp .xgplayer-screenshot .name span{width:75px;height:20px}.xgplayer-skin-default .xgplayer-texttrack{-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-top:-119px}.xgplayer-skin-default .xgplayer-texttrack ul{display:none;list-style:none;min-width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;text-align:center;white-space:nowrap;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-texttrack ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;padding:6px 13px}.xgplayer-skin-default .xgplayer-texttrack ul li.selected,.xgplayer-skin-default .xgplayer-texttrack ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-texttrack .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default.xgplayer-is-texttrack .xgplayer-texttrack,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-texttrack ul{display:block}.xgplayer-skin-default .xgplayer-icon{display:block;width:40px;height:40px;overflow:hidden;fill:#fff}.xgplayer-skin-default .xgplayer-icon svg{position:absolute}.xgplayer-skin-default .xgplayer-tips{background:rgba(0,0,0,.54);border-radius:1px;display:none;position:absolute;font-family:PingFangSC-Regular;font-size:11px;color:#fff;padding:2px 4px;text-align:center;top:-30px;left:50%;margin-left:-16px;width:auto;white-space:nowrap}.xgplayer-skin-default.xgplayer-mobile .xgplayer-tips{display:none!important}.xgplayer-skin-default .xgplayer-error{background:#000;display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:125;font-family:PingFangSC-Regular;font-size:14px;color:#fff;text-align:center;line-height:100%;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.xgplayer-skin-default .xgplayer-error .xgplayer-error-refresh{color:#fa1f41;padding:0 3px;cursor:pointer}.xgplayer-skin-default .xgplayer-error .xgplayer-error-text{line-height:18px;margin:auto 6px}.xgplayer-skin-default.xgplayer-is-error .xgplayer-error{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default .xgplayer-memoryplay-spot{position:absolute;height:32px;left:10px;bottom:46px;background:rgba(0,0,0,.5);border-radius:32px;line-height:32px;color:#ddd;z-index:15;padding:0 32px 0 16px}.xgplayer-skin-default .xgplayer-memoryplay-spot .xgplayer-lasttime{color:red;font-weight:700}.xgplayer-skin-default .xgplayer-memoryplay-spot .btn-close{position:absolute;width:16px;height:16px;right:10px;top:2px;cursor:pointer;color:#fff;font-size:16px}',""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var a=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[i].concat(o).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var i,r,a={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,c=0,d=[],p=n(64);function f(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=a[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(b(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(b(i.parts[o],t));a[i.id]={id:i.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),g(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,i,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var o=c++;n=u||(u=m(t)),i=_.bind(null,n,o,!1),r=_.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),g(e,t),t}(t),i=E.bind(null,n,t),r=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=k.bind(null,n),r=function(){y(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return f(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var o=n[r];(s=a[o.id]).refs--,i.push(s)}for(e&&f(h(e,t),t),r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var x,w=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function _(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function k(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=p(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_enter",(function(){for(var e=this.root,t=a.default.util,n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'+i+'"></div>';var r=t.createDom("xg-enter",'<div class="xgplayer-enter-spinner">\n                                                  '+n+"\n                                                </div>",{},"xgplayer-enter");e.appendChild(r)}))},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(67)),a=o(n(68));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_play",(function(){var e=this,t=i.default.util,n=e.config.playBtn?e.config.playBtn:{},o=void 0;o="img"===n.type?t.createImgBtn("play",n.url.play,n.width,n.height):t.createDom("xg-play",'<xg-icon class="xgplayer-icon">\n                                      <div class="xgplayer-icon-play">'+r.default+'</div>\n                                      <div class="xgplayer-icon-pause">'+a.default+"</div>\n                                     </xg-icon>",{},"xgplayer-play");var s={};s.play=e.lang.PLAY_TIPS,s.pause=e.lang.PAUSE_TIPS;var l=t.createDom("xg-tips",'<span class="xgplayer-tip-play">'+s.play+'</span>\n                                        <span class="xgplayer-tip-pause">'+s.pause+"</span>",{},"xgplayer-tips");o.appendChild(l),e.once("ready",(function(){e.controls.appendChild(o)})),["click","touchend"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("playBtnClick")}))}))}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="translate(2,2) scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="translate(2,2) scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(70)),a=o(n(71));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_start",(function(){var e=this,t=e.root,n=i.default.util,o=n.createDom("xg-start",'<div class="xgplayer-icon-play">'+r.default+'</div>\n                                      <div class="xgplayer-icon-pause">'+a.default+"</div>",{},"xgplayer-start");function s(e){n.addClass(e.root,"xgplayer-skin-default"),e.config&&(e.config.autoplay&&!n.isWeiXin()&&n.addClass(e.root,"xgplayer-is-enter"),e.config.lang&&"en"===e.config.lang?n.addClass(e.root,"lang-is-en"):"jp"===e.config.lang&&n.addClass(e.root,"lang-is-jp"),e.config.enableContextmenu||e.video.addEventListener("contextmenu",(function(e){e.preventDefault(),e.stopPropagation()})))}e.isReady?(t.appendChild(o),s(e)):e.once("ready",(function(){t.appendChild(o),s(e)})),e.once("autoplay was prevented",(function(){n.removeClass(e.root,"xgplayer-is-enter"),n.addClass(e.root,"xgplayer-nostart")})),e.once("canplay",(function(){n.removeClass(e.root,"xgplayer-is-enter")})),o.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.emit("startBtnClick")}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="translate(15,15) scale(0.04,0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="translate(15,15) scale(0.04 0.04)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_poster",(function(){var e=this.root,t=a.default.util;if(this.config.poster){var n=t.createDom("xg-poster","",{},"xgplayer-poster");n.style.backgroundImage="url("+this.config.poster+")",e.appendChild(n)}}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_flex",(function(){this.root;var e=a.default.util.createDom("xg-placeholder","",{},"xgplayer-placeholder");this.controls.appendChild(e)}))},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(75)),a=o(n(76));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_fullscreen",(function(){var e=this,t=i.default.util,n=e.config.fullscreenBtn?e.config.fullscreenBtn:{},o=void 0;o="img"===n.type?t.createImgBtn("fullscreen",n.url.request,n.width,n.height):t.createDom("xg-fullscreen",'<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">'+r.default+'</div>\n                                             <div class="xgplayer-icon-exitfull">'+a.default+"</div>\n                                           </xg-icon>",{},"xgplayer-fullscreen");var s={};s.requestfull=e.lang.FULLSCREEN_TIPS,s.exitfull=e.lang.EXITFULLSCREEN_TIPS;var l=t.createDom("xg-tips",'<span class="xgplayer-tip-requestfull">'+s.requestfull+'</span>\n                                        <span class="xgplayer-tip-exitfull">'+s.exitfull+"</span>",{},"xgplayer-tips");o.appendChild(l),e.once("ready",(function(){e.controls.appendChild(o)})),["click","touchend"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("fullscreenBtnClick")}))}))}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(78)),a=o(n(79));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_cssFullscreen",(function(){var e=this,t=i.default.util;if(e.config.cssFullscreen){var n=t.createDom("xg-cssfullscreen",'<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">'+r.default+'</div>\n                                             <div class="xgplayer-icon-exitfull">'+a.default+"</div>\n                                           </xg-icon>",{},"xgplayer-cssfullscreen"),o={};o.requestfull=e.lang.CSSFULLSCREEN_TIPS,o.exitfull=e.lang.EXITCSSFULLSCREEN_TIPS;var s=t.createDom("xg-tips",'<span class="xgplayer-tip-requestfull">'+o.requestfull+'</span>\n                                        <span class="xgplayer-tip-exitfull">'+o.exitfull+"</span>",{},"xgplayer-tips");n.appendChild(s),e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("cssFullscreenBtnClick")}))}))}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M834.56 81.92H189.44c-59.392 0-107.52 48.128-107.52 107.52v645.12c0 59.392 48.128 107.52 107.52 107.52h645.12c59.392 0 107.52-48.128 107.52-107.52V189.44c0-59.392-48.128-107.52-107.52-107.52zM458.24 727.04c0 14.848-12.288 26.624-26.624 26.624S404.48 741.888 404.48 727.04v-69.632L289.28 773.12c-10.752 10.24-27.648 10.24-37.888 0-10.24-10.752-10.24-27.648 0-37.888L366.592 619.52H296.96c-14.848 0-26.624-12.288-26.624-26.624s12.288-26.624 26.624-26.624h134.144c14.848 0 26.624 12.288 26.624 26.624V727.04z m0-295.936c0 14.848-12.288 26.624-26.624 26.624H296.96c-14.848 0-26.624-12.288-26.624-26.624S282.112 404.48 296.96 404.48h69.632L251.392 289.28c-10.24-10.752-10.24-27.648 0-37.888 5.12-5.12 12.288-7.68 18.944-7.68 6.656 0 13.824 2.56 18.944 7.68L404.48 366.592V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v134.144zM773.12 773.12c-10.752 10.24-27.648 10.24-37.888 0L619.52 657.408V727.04c0 14.848-12.288 26.624-26.624 26.624s-26.624-11.776-26.624-26.624v-134.144c0-14.848 12.288-26.624 26.624-26.624H727.04c14.848 0 26.624 12.288 26.624 26.624s-12.288 26.624-26.624 26.624h-69.632l115.2 115.2c10.752 10.752 10.752 27.648 0.512 38.4z m0-483.84L657.408 404.48H727.04c14.848 0 26.624 12.288 26.624 26.624 0 14.848-12.288 26.624-26.624 26.624h-134.144c-14.848 0-26.624-12.288-26.624-26.624V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v69.632L734.72 250.88c5.12-5.12 12.288-7.68 18.944-7.68s13.824 2.56 18.944 7.68c10.752 10.752 10.752 27.648 0.512 38.4z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i=s(n(0)),r=s(n(81)),a=s(n(82)),o=s(n(83));function s(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_volume",(function(){var e=this,t=i.default.util.createDom("xg-volume",'<xg-icon class="xgplayer-icon">\n                                         <div class="xgplayer-icon-large">'+o.default+'</div>\n                                         <div class="xgplayer-icon-small">'+a.default+'</div>\n                                         <div class="xgplayer-icon-muted">'+r.default+'</div>\n                                       </xg-icon>\n                                       <xg-slider class="xgplayer-slider" tabindex="2">\n                                         <xg-bar class="xgplayer-bar">\n                                           <xg-drag class="xgplayer-drag"></xg-drag>\n                                         </xg-bar>\n                                       </xg-slider>',{},"xgplayer-volume");e.once("ready",(function(){e.controls.appendChild(t)}));var n=t.querySelector(".xgplayer-slider"),s=t.querySelector(".xgplayer-bar"),l=t.querySelector(".xgplayer-drag"),u=t.querySelector(".xgplayer-icon");l.style.height=100*e.config.volume+"%",n.volume=e.config.volume,s.addEventListener("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeBarClick",t)})),["click","touchend"].forEach((function(t){u.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconClick")}))})),u.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconEnter")})),["blur","mouseleave"].forEach((function(n){t.addEventListener(n,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconLeave")}))}))}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_definition",(function(){var e=this,t=e.root,n=a.default.util,i=a.default.sniffer,r=void 0,o=n.createDom("xg-definition","",{tabindex:3},"xgplayer-definition");function s(){var i=e.definitionList,r=["<ul>"],a=e.config.url,s=document.createElement("a");e.switchURL?["mp4","hls","__flv__","dash"].every((function(t){return!e[t]||(e[t].url&&(s.href=e[t].url),"__flv__"===t&&(e[t]._options?s.href=e[t]._options.url:s.href=e[t]._mediaDataSource.url),a=s.href,!1)})):a=e.currentSrc||e.src,e.hls&&(s.href=e.hls.url,a=s.href),i.forEach((function(t){s.href=t.url,e.dash?r.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(t.selected?"selected":"")+"'>"+t.name+"</li>"):r.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(s.href===a?"selected":"")+"'>"+t.name+"</li>")}));var l=i.filter((function(t){return s.href=t.url,e.dash?!0===t.selected:s.href===a}));r.push("</ul><p class='name'>"+(l[0]||{name:""}).name+"</p>");var u=t.querySelector(".xgplayer-definition");if(u){u.innerHTML=r.join("");var c=u.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||c.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-definition-active"),u.focus()}))}else{o.innerHTML=r.join("");var d=o.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||d.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-definition-active"),o.focus()})),e.controls.appendChild(o)}}function l(i){e.definitionList=i,i&&i instanceof Array&&i.length>1&&(n.addClass(t,"xgplayer-is-definition"),e.on("canplay",s))}function u(){if(e.currentTime=e.curTime,!r){var t=e.play();void 0!==t&&t&&t.catch((function(e){}))}}function c(){n.removeClass(t,"xgplayer-definition-active")}"mobile"===i.device&&(e.config.definitionActive="click"),e.on("resourceReady",l),["touchend","click"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation();var a=e.definitionList,s=t.target||t.srcElement,l=document.createElement("a");if(s&&"li"===s.tagName.toLocaleLowerCase()){e.emit("beforeDefinitionChange",l.href);var c,d=void 0;if(Array.prototype.forEach.call(s.parentNode.childNodes,(function(e){n.hasClass(e,"selected")&&(d=e.getAttribute("cname"),n.removeClass(e,"selected"))})),e.dash&&a.forEach((function(e){e.selected=!1,e.name===s.innerHTML&&(e.selected=!0)})),n.addClass(s,"selected"),c=s.getAttribute("cname"),s.parentNode.nextSibling.innerHTML=""+s.getAttribute("cname"),l.href=s.getAttribute("url"),e.switchURL){var p=document.createElement("a");["mp4","hls","__flv__","dash"].every((function(t){return!e[t]||(e[t].url&&(p.href=e[t].url),"__flv__"===t&&(e[t]._options?p.href=e[t]._options.url:p.href=e[t]._mediaDataSource.url),!1)})),p.href===l.href||e.ended||e.switchURL(l.href)}else e.hls&&(document.createElement("a"),e.hls.url),l.href!==e.currentSrc&&(e.curTime=e.currentTime,r=e.paused,e.ended||(e.src=l.href,e.once("canplay",u)));e.emit("definitionChange",{from:d,to:c}),"mobile"===i.device&&n.removeClass(e.root,"xgplayer-definition-active")}else"click"!==e.config.definitionActive||!s||"p"!==s.tagName.toLocaleLowerCase()&&"em"!==s.tagName.toLocaleLowerCase()||("mobile"===i.device?n.toggleClass(e.root,"xgplayer-definition-active"):n.addClass(e.root,"xgplayer-definition-active"),o.focus());e.emit("focus")}),!1)})),o.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),n.removeClass(t,"xgplayer-definition-active")})),e.on("blur",c),e.once("destroy",(function t(){e.off("resourceReady",l),e.off("canplay",s),e.off("canplay",u),e.off("blur",c),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(86));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_loading",(function(){var e=this.root,t=i.default.util.createDom("xg-loading",""+r.default,{},"xgplayer-loading");this.once("ready",(function(){e.appendChild(t)}))}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},o=function(e){return a.default.util.hasClass(e.root,"xgplayer-rotate-fullscreen")};a.default.install("s_progress",(function(){var e=this,t=a.default.util,n=t.createDom("xg-progress",'<xg-outer class="xgplayer-progress-outer">\n                                                   <xg-cache class="xgplayer-progress-cache"></xg-cache>\n                                                   <xg-played class="xgplayer-progress-played">\n                                                     <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n                                                     <xg-point class="xgplayer-progress-point xgplayer-tips"></xg-point>\n                                                     <xg-thumbnail class="xgplayer-progress-thumbnail xgplayer-tips"></xg-thumbnail>\n                                                   </xg-played>\n                                                 </xg-outer>',{tabindex:1},"xgplayer-progress"),i=void 0;e.controls.appendChild(n);var r=n.querySelector(".xgplayer-progress-played"),s=(n.querySelector(".xgplayer-progress-btn"),n.querySelector(".xgplayer-progress-outer")),l=n.querySelector(".xgplayer-progress-cache"),u=n.querySelector(".xgplayer-progress-point"),c=n.querySelector(".xgplayer-progress-thumbnail");function d(i,r){i.addEventListener("mouseenter",(function(e){r&&(t.addClass(i,"xgplayer-progress-dot-show"),t.addClass(n,"xgplayer-progress-dot-active"))})),i.addEventListener("mouseleave",(function(e){r&&(t.removeClass(i,"xgplayer-progress-dot-show"),t.removeClass(n,"xgplayer-progress-dot-active"))})),i.addEventListener("touchend",(function(a){a.stopPropagation(),r&&(t.hasClass(i,"xgplayer-progress-dot-show")||Object.keys(e.dotArr).forEach((function(n){e.dotArr[n]&&t.removeClass(e.dotArr[n],"xgplayer-progress-dot-show")})),t.toggleClass(i,"xgplayer-progress-dot-show"),t.toggleClass(n,"xgplayer-progress-dot-active"))}))}function p(){e.config.progressDot&&"Array"===t.typeOf(e.config.progressDot)&&e.config.progressDot.forEach((function(n){if(n.time>=0&&n.time<=e.duration){var i=t.createDom("xg-progress-dot",n.text?'<span class="xgplayer-progress-tip">'+n.text+"</span>":"",{},"xgplayer-progress-dot");i.style.left=n.time/e.duration*100+"%",n.duration>=0&&(i.style.width=Math.min(n.duration,e.duration-n.time)/e.duration*100+"%"),s.appendChild(i),e.dotArr[n.time]=i,d(i,n.text)}}))}e.dotArr={},e.once("canplay",p),e.addProgressDot=function(n,i,r){if(!e.dotArr[n]&&n>=0&&n<=e.duration){var a=t.createDom("xg-progress-dot","",{},"xgplayer-progress-dot");a.style.left=n/e.duration*100+"%",r>=0&&(a.style.width=Math.min(r,e.duration-n)/e.duration*100+"%"),s.appendChild(a),e.dotArr[n]=a,d(a,i)}},e.removeProgressDot=function(t){if(t>=0&&t<=e.duration&&e.dotArr[t]){var n=e.dotArr[t];n.parentNode.removeChild(n),n=null,e.dotArr[t]=null}},e.removeAllProgressDot=function(){Object.keys(e.dotArr).forEach((function(t){if(e.dotArr[t]){var n=e.dotArr[t];n.parentNode.removeChild(n),n=null,e.dotArr[t]=null}}))};var f=0,h=0,g=0,y=0,m=0,v=0,b=[];e.config.thumbnail&&(f=e.config.thumbnail.pic_num,h=e.config.thumbnail.width,g=e.config.thumbnail.height,y=e.config.thumbnail.col,m=e.config.thumbnail.row,b=e.config.thumbnail.urls,c.style.width=h+"px",c.style.height=g+"px"),"function"==typeof e.config.disableSwipeHandler&&"function"==typeof e.config.enableSwipeHandler&&(e.root.addEventListener("touchmove",(function(t){t.preventDefault(),e.disableSwipe||(e.disableSwipe=!0,e.config.disableSwipeHandler.call(e))})),e.root.addEventListener("touchstart",(function(t){e.disableSwipe=!0,e.config.disableSwipeHandler.call(e)})),e.root.addEventListener("touchend",(function(t){e.disableSwipe=!1,e.config.enableSwipeHandler.call(e)}))),["touchstart","mousedown"].forEach((function(a){n.addEventListener(a,(function(a){if(!e.config.disableProgress){if(a.stopPropagation(),t.event(a),a._target===u||!e.config.allowSeekAfterEnded&&e.ended)return!0;n.focus();var s=r.getBoundingClientRect().left,l=o(e);l?(s=r.getBoundingClientRect().top,i=n.getBoundingClientRect().height):(i=n.getBoundingClientRect().width,s=r.getBoundingClientRect().left);var c=function(n){n.stopPropagation(),t.event(n),e.isProgressMoving=!0;var a=(l?n.clientY:n.clientX)-s;a>i&&(a=i);var o=a/i*e.duration;if(r.style.width=100*a/i+"%","video"!==e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var u=t.findDom(e.controls,".xgplayer-time");u&&(u.innerHTML='<span class="xgplayer-time-current">'+t.format(o||0)+"</span><span>"+t.format(e.duration)+"</span>")}else e.currentTime=Number(o).toFixed(1);e.emit("focus")},d=function a(o){if(o.stopPropagation(),t.event(o),window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c,{passive:!1}),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a),n.blur(),!e.isProgressMoving||"audio"===e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var u=(l?o.clientY:o.clientX)-s;u>i&&(u=i);var d=u/i*e.duration;r.style.width=100*u/i+"%",e.currentTime=Number(d).toFixed(1)}e.emit("focus"),e.isProgressMoving=!1};return window.addEventListener("mousemove",c),window.addEventListener("touchmove",c,{passive:!1}),window.addEventListener("mouseup",d),window.addEventListener("touchend",d),!0}}))})),n.addEventListener("mouseenter",(function(i){if(!e.config.allowSeekAfterEnded&&e.ended)return!0;var r=o(e),a=r?n.getBoundingClientRect().top:n.getBoundingClientRect().left,s=r?n.getBoundingClientRect().height:n.getBoundingClientRect().width,l=function(i){var o=((r?i.clientY:i.clientX)-a)/s*e.duration;o=o<0?0:o,u.textContent=t.format(o);var l=u.getBoundingClientRect().width;if(e.config.thumbnail){v=e.duration/f;var d=Math.floor(o/v);c.style.backgroundImage="url("+b[Math.ceil((d+1)/(y*m))-1]+")";var p=d+1-y*m*(Math.ceil((d+1)/(y*m))-1),x=Math.ceil(p/m)-1,w=p-x*m-1;c.style["background-position"]="-"+w*h+"px -"+x*g+"px";var _=(r?i.clientY:i.clientX)-a-h/2;_=(_=_>0?_:0)<s-h?_:s-h,c.style.left=_+"px",c.style.top=-10-g+"px",c.style.display="block",u.style.left=_+h/2-l/2+"px"}else{var k=i.clientX-a-l/2;k=(k=k>0?k:0)>s-l?s-l:k,u.style.left=k+"px"}t.hasClass(n,"xgplayer-progress-dot-active")?u.style.display="none":u.style.display="block"},d=function(e){l(e)};n.addEventListener("mousemove",d,!1),n.addEventListener("mouseleave",(function e(t){n.removeEventListener("mousemove",d,!1),n.removeEventListener("mouseleave",e,!1),l(t),u.style.display="none",c.style.display="none"}),!1),l(i)}),!1);var x=function(){if(!i&&n&&(i=n.getBoundingClientRect().width),"audio"!==e.videoConfig.mediaType||!e.isProgressMoving||!e.dash){var t=e.currentTime/e.duration,a=Number.parseFloat(r.style.width||"0")/Number.parseFloat(n.style.width||"100");Math.abs(t-a)<=1&&(r.style.width=100*e.currentTime/e.duration+"%")}};e.on("timeupdate",x);var w=function(){r.style.width=100*e.currentTime/e.duration+"%"};e.on("currentTimeChange",w);var _=function(){r.style.width="0%"};e.on("srcChange",_);var k=function(){var t=e.buffered;if(t&&t.length>0){for(var n=t.end(t.length-1),i=0,r=t.length;i<r;i++)if(e.currentTime>=t.start(i)&&e.currentTime<=t.end(i)){n=t.end(i);for(var a=i+1;a<t.length;a++)if(t.start(a)-t.end(a-1)>=2){n=t.end(a-1);break}break}l.style.width=n/e.duration*100+"%"}},E=["bufferedChange","cacheupdate","ended","timeupdate"];E.forEach((function(t){e.on(t,k)})),e.once("destroy",(function t(){e.removeAllProgressDot(),e.off("canplay",p),e.off("timeupdate",x),e.off("currentTimeChange",w),e.off("srcChange",_),E.forEach((function(t){e.off(t,k)})),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_time",(function(){var e=this,t=(e.root,a.default.util),n=t.createDom("xg-time",'<span class="xgplayer-time-current">'+(e.currentTime||t.format(0))+"</span>\n                                           <span>"+(e.duration||t.format(0))+"</span>",{},"xgplayer-time");e.once("ready",(function(){e.controls.appendChild(n)}));var i=function(){"audio"===e.videoConfig.mediaType&&e.isProgressMoving&&e.dash||(n.innerHTML='<span class="xgplayer-time-current">'+t.format(e.currentTime||0)+"</span><span>"+t.format(e.duration)+"</span>")};e.on("durationchange",i),e.on("timeupdate",i),e.once("destroy",(function t(){e.off("durationchange",i),e.off("timeupdate",i),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(90));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_replay",(function(){var e=this,t=i.default.util,n=e.root,a=e.lang.REPLAY,o=t.createDom("xg-replay",r.default+'\n                                         <xg-replay-txt class="xgplayer-replay-txt">'+a+"</xg-replay-txt>\n                                        ",{},"xgplayer-replay");function s(){var e=o.querySelector("path");if(e){var t=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof t&&t.indexOf("none")>-1)return;e.setAttribute("transform",t)}}e.once("ready",(function(){n.appendChild(o)})),e.on("ended",s);var l=o.querySelector("svg");["click","touchend"].forEach((function(t){l.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("replayBtnClick")}))})),e.once("destroy",(function t(){e.off("ended",s),e.off("destroy",t)}))}))},function(e,t,n){"use strict";n.r(t),t.default='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_playbackRate",(function(){var e=this,t=a.default.sniffer,n=a.default.util;if(!e.config.playbackRate)return!1;e.config.playbackRate.sort((function(e,t){return t-e}));var i=n.createDom("xg-playbackrate"," ",{},"xgplayer-playbackrate");"mobile"===t.device&&(e.config.playbackRateActive="click");var r=[];e.config.playbackRate.forEach((function(e){r.push({name:""+e,rate:e+"x",selected:!1})}));var o=1,s=["<ul>"];r.forEach((function(t){e.config.defaultPlaybackRate&&e.config.defaultPlaybackRate.toString()===t.name?(t.selected=!0,o=e.config.defaultPlaybackRate,e.once("playing",(function(){e.video.playbackRate=e.config.defaultPlaybackRate}))):"1.0"!==t.name&&"1"!==t.name||e.config.defaultPlaybackRate&&1!==e.config.defaultPlaybackRate||(t.selected=!0),s.push("<li cname='"+t.name+"' class='"+(t.selected?"selected":"")+"'>"+t.rate+"</li>")})),s.push("</ul><p class='name'>"+o+"x</p>");var l=e.root.querySelector(".xgplayer-playbackrate");if(l){l.innerHTML=s.join("");var u=l.querySelector(".name");e.config.playbackRateActive&&"hover"!==e.config.playbackRateActive||u.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-playbackrate-active"),l.focus()}))}else{i.innerHTML=s.join("");var c=i.querySelector(".name");e.config.playbackRateActive&&"hover"!==e.config.playbackRateActive||c.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-playbackrate-active"),i.focus()})),e.once("ready",(function(){e.controls.appendChild(i)}))}["touchend","click"].forEach((function(a){i.addEventListener(a,(function(a){a.stopPropagation(),a.preventDefault();var s=a.target;if(s&&"li"===s.tagName.toLocaleLowerCase()){var l,u=void 0;r.forEach((function(t){t.selected=!1,s.textContent.replace(/\s+/g,"")===t.rate&&(Array.prototype.forEach.call(s.parentNode.childNodes,(function(e){n.hasClass(e,"selected")&&(u=parseFloat(e.getAttribute("cname")),n.removeClass(e,"selected"))})),t.selected=!0,e.video.playbackRate=1*t.name,o=1*t.name)})),n.addClass(s,"selected"),l=parseFloat(s.getAttribute("cname")),s.parentNode.nextSibling.innerHTML=s.getAttribute("cname")+"x",e.emit("playbackrateChange",{from:u,to:l}),"mobile"===t.device&&n.removeClass(e.root,"xgplayer-playbackrate-active")}else"click"!==e.config.playbackRateActive||!s||"p"!==s.tagName.toLocaleLowerCase()&&"span"!==s.tagName.toLocaleLowerCase()||("mobile"===t.device?n.toggleClass(e.root,"xgplayer-playbackrate-active"):n.addClass(e.root,"xgplayer-playbackrate-active"),i.focus());e.emit("focus")}),!1)})),i.addEventListener("mouseleave",(function(t){t.preventDefault(),t.stopPropagation(),n.removeClass(e.root,"xgplayer-playbackrate-active")})),e.on("blur",(function(){n.removeClass(e.root,"xgplayer-playbackrate-active")})),e.on("play",(function(){e.video.playbackRate.toFixed(1)!==o.toFixed(1)&&(e.video.playbackRate=o)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_localPreview",(function(){var e=this,t=(e.root,a.default.util);if(e.config.preview&&e.config.preview.uploadEl){var n=t.createDom("xg-preview",'<input type="file">',{},"xgplayer-preview"),i=n.querySelector("input");e.config.preview.uploadEl.appendChild(n),i.onchange=function(){e.emit("upload",i)}}}))},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(94));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_download",(function(){var e=this,t=i.default.util;if(e.config.download){var n=t.createDom("xg-download",'<xg-icon class="xgplayer-icon">'+r.default+"</xg-icon>",{},"xgplayer-download"),a=e.lang.DOWNLOAD_TIPS,o=t.createDom("xg-tips",'<span class="xgplayer-tip-download">'+a+"</span>",{},"xgplayer-tips");n.appendChild(o),e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("downloadBtnClick")}))}))}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n'},function(e,t,n){"use strict";var i=o(n(0)),r=o(n(96)),a=o(n(98));function o(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_danmu",(function(){var e=this,t=e.root,n=i.default.util;if(e.config.danmu){var o=n.createDom("xg-danmu","",{},"xgplayer-danmu");e.once("ready",(function(){t.appendChild(o)}));var s=n.deepCopy({container:o,player:e.video,comments:[],area:{start:0,end:1}},e.config.danmu),l=void 0;e.config.danmu.panel&&(l=i.default.util.createDom("xg-panel",'<xg-panel-icon class="xgplayer-panel-icon">\n                                                '+a.default+'\n                                              </xg-panel-icon>\n                                              <xg-panel-slider class="xgplayer-panel-slider">\n                                                <xg-hidemode class="xgplayer-hidemode">\n                                                  <p class="xgplayer-hidemode-font">屏蔽类型</p>\n                                                  <ul class="xgplayer-hidemode-radio">\n                                                    <li class="xgplayer-hidemode-scroll" id="false">滚动</li><li class="xgplayer-hidemode-top" id="false">顶部</li><li class="xgplayer-hidemode-bottom" id="false">底部</li><li class="xgplayer-hidemode-color" id="false">色彩</li>\n                                                  </ul>\n                                                </xg-hidemode>\n                                                <xg-transparency class="xgplayer-transparency">\n                                                  <span>不透明度</span>\n                                                  <input class="xgplayer-transparency-line xgplayer-transparency-color xgplayer-transparency-bar xgplayer-transparency-gradient" type="range" min="0" max="100" step="0.1" value="50"></input>\n                                                </xg-transparency>\n                                                <xg-showarea class="xgplayer-showarea">\n                                                  <div class="xgplayer-showarea-name">显示区域</div>\n                                                  <div class="xgplayer-showarea-control">\n                                                    <div class="xgplayer-showarea-control-up">\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-onequarters">1/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-twoquarters selected-color">1/2</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-threequarters">3/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-full">1</span>\n                                                    </div>\n                                                    <div class="xgplayer-showarea-control-down">\n                                                      <div class="xgplayer-showarea-control-down-dots">\n                                                        <span class="xgplayer-showarea-onequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-twoquarters-dot"></span>\n                                                        <span class="xgplayer-showarea-threequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-full-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-showarea-line xgplayer-showarea-color xgplayer-showarea-bar xgplayer-gradient" type="range" min="1" max="4" step="1" value="1">\n                                                    </div>\n                                                  </div>\n                                                </xg-showarea>\n                                                <xg-danmuspeed class="xgplayer-danmuspeed">\n                                                  <div class="xgplayer-danmuspeed-name">弹幕速度</div>\n                                                  <div class="xgplayer-danmuspeed-control">\n                                                    <div class="xgplayer-danmuspeed-control-up">\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-small">慢</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-middle selected-color">中</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-large">快</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmuspeed-control-down">\n                                                      <div class="xgplayer-danmuspeed-control-down-dots">\n                                                        <span class="xgplayer-danmuspeed-small-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-middle-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmuspeed-line xgplayer-danmuspeed-color xgplayer-danmuspeed-bar xgplayer-gradient" type="range" min="50" max="150" step="50" value="100">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmuspeed>\n                                                <xg-danmufont class="xgplayer-danmufont">\n                                                  <div class="xgplayer-danmufont-name">字体大小</div>\n                                                  <div class="xgplayer-danmufont-control">\n                                                    <div class="xgplayer-danmufont-control-up">\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-small">小</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-middle">中</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-large selected-color">大</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmufont-control-down">\n                                                      <div class="xgplayer-danmufont-control-down-dots">\n                                                        <span class="xgplayer-danmufont-small-dot"></span>\n                                                        <span class="xgplayer-danmufont-middle-dot"></span>\n                                                        <span class="xgplayer-danmufont-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmufont-line xgplayer-danmufont-color xgplayer-danmufont-bar xgplayer-gradient" type="range" min="20" max="30" step="5" value="25">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmufont>\n                                              </xg-panel-slider>',{tabindex:7},"xgplayer-panel"),e.once("ready",(function(){e.controls.appendChild(l)}))),e.once("complete",(function(){var t=new r.default(s);if(e.emit("initDefaultDanmu",t),e.danmu=t,e.config.danmu.panel){var n=l.querySelector(".xgplayer-panel-slider"),a=void 0;["mouseenter","touchend","click"].forEach((function(e){l.addEventListener(e,(function(e){e.preventDefault(),e.stopPropagation(),i.default.util.addClass(n,"xgplayer-panel-active"),l.focus(),a=!0}))})),l.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),i.default.util.removeClass(n,"xgplayer-panel-active"),a=!1})),n.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),!1===a&&i.default.util.removeClass(n,"xgplayer-panel-active")}));var o=e.config.danmu,u={scroll:l.querySelector(".xgplayer-hidemode-scroll"),top:l.querySelector(".xgplayer-hidemode-top"),bottom:l.querySelector(".xgplayer-hidemode-bottom"),color:l.querySelector(".xgplayer-hidemode-color")},c=function(t){var n=t;["touchend","click"].forEach((function(t){u[n].addEventListener(t,(function(t){"true"!==u[n].getAttribute("id")?(u[n].style.color="#f85959",u[n].setAttribute("id","true"),e.danmu.hide(n)):(u[n].style.color="#aaa",u[n].setAttribute("id","false"),e.danmu.show(n))}))}))};for(var d in u)c(d);var p=l.querySelector(".xgplayer-transparency-line"),f=l.querySelector(".xgplayer-transparency-gradient"),h=50;if(f.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+h+"%, #aaa "+h+"%, #aaa)",p.addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation(),h=e.target.value,f.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+h+"%, #aaa "+h+"%, #aaa)",o.comments.forEach((function(e){e.style.opacity=h/100}))})),l.querySelector(".xgplayer-showarea-line").addEventListener("input",(function(t){t.preventDefault(),t.stopPropagation();var n=t.target.value;e.danmu.config.area.end=n/100,e.config.danmu.area.end=n/100,e.danmu.bulletBtn.main.channel.resize()})),l.querySelector(".xgplayer-danmuspeed-line").addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach((function(e){e.duration=100*(200-t)}))})),l.querySelector(".xgplayer-danmufont-line").addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach((function(e){e.style.fontSize=t+"px"}))})),navigator.userAgent.indexOf("Firefox")>-1)for(var g=0;g<n.querySelectorAll("input").length;g++)n.querySelectorAll("input")[g].style.marginTop="10px"}}))}}))},function(e,t,n){"use strict";(function(e){var n,i,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,a=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(26))&&i.__esModule?i:{default:i},a={};a.domObj=new r.default,a.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,a=n[t];"video"===e||"audio"===e?a&&r.setAttribute(i,a):r.setAttribute(i,a)})),r},a.hasClass=function(e,t){return e.classList?Array.prototype.some.call(e.classList,(function(e){return e===t})):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},a.addClass=function(e,t){e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):a.hasClass(e,t)||(e.className+=" "+t)},a.removeClass=function(e,t){e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):a.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}))},a.toggleClass=function(e,t){t.split(/\s+/g).forEach((function(t){a.hasClass(e,t)?a.removeClass(e,t):a.addClass(e,t)}))},a.findDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(i){t.startsWith("#")&&(n=e.getElementById(t.slice(1)))}return n},a.deepCopy=function(e,t){if("Object"===a.typeOf(t)&&"Object"===a.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==a.typeOf(t[n])||t[n]instanceof Node?"Array"===a.typeOf(t[n])?e[n]="Array"===a.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:e[n]?a.deepCopy(e[n],t[n]):e[n]=t[n]})),e},a.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},a.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},a.formatTime=function(e){var t=Math.floor(e);return 1e3*t+(e-t)},t.default=a,e.exports=t.default},function(e,t,n){var i=n(18)();e.exports=function(e){return e!==i&&null!==e}},function(e,t,n){e.exports=function(e){return null!=e}},function(e,t,n){e.exports=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(5))&&i.__esModule?i:{default:i};n(30),t.default=r.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(6)),a=s(n(25)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;if(n.config=o.default.deepCopy({overlap:!1,area:{start:0,end:1},live:!1,comments:[],direction:"r2l"},t),n.hideArr=[],(0,r.default)(n),n.config.comments.forEach((function(e){e.duration=e.duration?e.duration:5e3,e.mode||(e.mode="scroll")})),!n.config.container||1!==n.config.container.nodeType)return n.emit("error","container id can't be empty"),!1;if(n.container=n.config.container,n.config.containerStyle){var i=n.config.containerStyle;Object.keys(i).forEach((function(e){n.container.style[e]=i[e]}))}n.live=n.config.live,n.player=n.config.player,n.direction=n.config.direction,o.default.addClass(n.container,"danmu"),n.bulletBtn=new a.default(n),n.emit("ready")}return i(e,[{key:"start",value:function(){this.bulletBtn.main.start()}},{key:"pause",value:function(){this.bulletBtn.main.pause()}},{key:"play",value:function(){this.bulletBtn.main.play()}},{key:"stop",value:function(){this.bulletBtn.main.stop()}},{key:"sendComment",value:function(e){e.duration||(e.duration=15e3),e&&e.id&&e.duration&&(e.el||e.txt)&&(e.duration=e.duration?e.duration:5e3,e.style&&(this.opacity&&this.opacity!==e.style.opacity&&(e.style.opacity=this.opacity),this.fontSize&&this.fontSize!==e.style.fontSize&&(e.style.fontSize=this.fontSize),this.like&&(e.like=e.like?e.like:this.like)),e.prior||e.realTime?(this.bulletBtn.main.data.unshift(e),e.realTime&&(this.bulletBtn.main.readData(),this.bulletBtn.main.dataHandle())):this.bulletBtn.main.data.push(e))}},{key:"setCommentID",value:function(e,t){var n=this,i=this.container.getBoundingClientRect();e&&t&&(this.bulletBtn.main.data.some((function(n){return n.id===e&&(n.id=t,!0)})),this.bulletBtn.main.queue.some((function(r){return r.id===e&&(r.id=t,r.pauseMove(i),"paused"!==n.bulletBtn.main.status&&r.startMove(i),!0)})))}},{key:"setCommentDuration",value:function(e,t){var n=this,i=this.container.getBoundingClientRect();e&&t&&(t=t||5e3,this.bulletBtn.main.data.some((function(n){return n.id===e&&(n.duration=t,!0)})),this.bulletBtn.main.queue.some((function(r){return r.id===e&&(r.duration=t,r.pauseMove(i),"paused"!==n.bulletBtn.main.status&&r.startMove(i),!0)})))}},{key:"setCommentLike",value:function(e,t){var n=this.container.getBoundingClientRect();this.like=t,e&&t&&(this.bulletBtn.main.data.some((function(n){return n.id===e&&(n.like=t,!0)})),this.bulletBtn.main.queue.some((function(i){return i.id===e&&(i.pauseMove(n),i.setLikeDom(t.el,t.style),"paused"!==i.danmu.bulletBtn.main.status&&i.startMove(n),!0)})))}},{key:"restartComment",value:function(e){this.mouseControl=!1;var t=this.container.getBoundingClientRect();e&&this.bulletBtn.main.queue.some((function(n){return n.id===e&&("paused"!==n.danmu.bulletBtn.main.status?n.startMove(t,!0):n.status="paused",!0)}))}},{key:"freezeComment",value:function(e){this.mouseControl=!0;var t=this.container.getBoundingClientRect();e&&this.bulletBtn.main.queue.some((function(n){return n.id===e&&(n.status="forcedPause",n.pauseMove(t),n.el&&n.el.style&&(n.el.style.zIndex=10),!0)}))}},{key:"removeComment",value:function(e){e&&(this.bulletBtn.main.queue.some((function(t){return t.id===e&&(t.remove(),!0)})),this.bulletBtn.main.data=this.bulletBtn.main.data.filter((function(t){return t.id!==e})))}},{key:"setAllDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll",t=arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.container.getBoundingClientRect();t&&(t=t||5e3,n&&(this.bulletBtn.main.forceDuration=t),this.bulletBtn.main.data.forEach((function(n){e===n.mode&&(n.duration=t)})),this.bulletBtn.main.queue.forEach((function(n){e===n.mode&&(n.duration=t,n.pauseMove(i),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(i))})))}},{key:"setOpacity",value:function(e){this.container.style.opacity=e}},{key:"setFontSize",value:function(e,t){var n=this;this.fontSize=e+"px",e&&(this.bulletBtn.main.data.forEach((function(e){e.style&&(e.style.fontSize=n.fontSize)})),this.bulletBtn.main.queue.forEach((function(e){e.options.style||(e.options.style={}),e.options.style.fontSize=n.fontSize,e.setFontSize(n.fontSize),t&&(e.top=e.channel_id[0]*t,e.topInit())}))),t&&(this.config.channelSize=t,this.bulletBtn.main.channel.resize(!0))}},{key:"setArea",value:function(e){this.config.area=e,this.bulletBtn.main.channel.resize(!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";this.hideArr.indexOf(e)<0&&this.hideArr.push(e);var t=this.bulletBtn.main.queue.filter((function(t){return e===t.mode||"color"===e&&t.color}));t.forEach((function(e){return e.remove()}))}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll",t=this.hideArr.indexOf(e);t>-1&&this.hideArr.splice(t,1)}},{key:"setDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"r2l";this.emit("changeDirection",e)}},{key:"resize",value:function(){this.emit("channel_resize")}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){var i,r,a,s,l,u,c,d=n(7),p=n(24),f=Function.prototype.apply,h=Function.prototype.call,g=Object.create,y=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n,r;return p(t),r=this,i.call(this,e,n=function(){a.call(r,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},l={on:i=function(e,t){var n;return p(t),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=g(null),y(this,"__ee__",b),b.value=null),n[e]?"object"==o(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:a=function(e,t){var n,i,r,a;if(p(t),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==o(i=n[e]))for(a=0;r=i[a];++a)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[a?0:1]:i.splice(a,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:s=function(e){var t,n,i,r,a;if(v.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==(void 0===r?"undefined":o(r))){for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)f.call(i,this,a)}else switch(arguments.length){case 1:h.call(r,this);break;case 2:h.call(r,this,arguments[1]);break;case 3:h.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];f.call(r,this,a)}}},u={on:d(i),once:d(r),off:d(a),emit:d(s)},c=m({},u),e.exports=t=function(e){return null==e?g(c):m(Object(e),u)},t.methods=l},function(e,t,n){var i=n(2),r=n(8),a=n(12),o=n(20),s=n(21);(e.exports=function(e,t){var n,r,l,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],i(e)?(n=s.call(e,"c"),r=s.call(e,"e"),l=s.call(e,"w")):(n=l=!0,r=!1),c={value:t,configurable:n,enumerable:r,writable:l},u?a(o(u),c):c}).gs=function(e,t,n){var l,u,c,d;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],i(t)?r(t)?i(n)?r(n)||(c=n,n=void 0):n=void 0:(c=t,t=n=void 0):t=void 0,i(e)?(l=s.call(e,"c"),u=s.call(e,"e")):(l=!0,u=!1),d={get:t,set:n,configurable:l,enumerable:u},c?a(o(c),d):d}},function(e,t,n){var i=n(9),r=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!i(e)&&!r.test(a.call(e))}},function(e,t,n){var i=n(10);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!i(e)}},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){var i=n(2),r={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(r,void 0===e?"undefined":o(e))}},function(e,t,n){e.exports=n(13)()?Object.assign:n(14)},function(e,t,n){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){var i=n(15),r=n(19),a=Math.max;e.exports=function(e,t){var n,o,s,l=a(arguments.length,2);for(e=Object(r(e)),s=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},o=1;o<l;++o)i(t=arguments[o]).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){e.exports=n(16)()?Object.keys:n(17)},function(e,t,n){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){var i=n(1),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},function(e,t,n){e.exports=function(){}},function(e,t,n){var i=n(1);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){var i=n(1),r=Array.prototype.forEach,a=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=a(null);return r.call(arguments,(function(e){i(e)&&o(Object(e),t)})),t}},function(e,t,n){e.exports=n(22)()?String.prototype.contains:n(23)},function(e,t,n){var i="razdwatrzy";e.exports=function(){return"function"==typeof i.contains&&!0===i.contains("dwa")&&!1===i.contains("foo")}},function(e,t,n){var i=String.prototype.indexOf;e.exports=function(e){return i.call(this,e,arguments[1])>-1}},function(e,t,n){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=o(n(0)),a=o(n(27));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.main=new a.default(t),t.config.defaultOff||this.main.start()}return i(e,[{key:"createSwitch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.switchBtn=r.default.createDom("dk-switch",'<span class="txt">弹</span>',{},"danmu-switch "+(e?"danmu-switch-active":"")),this.switchBtn}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t={initDOM:function(){return document.createElement("div")},initSize:10},this.init(t)}return i(e,[{key:"init",value:function(e){this.idleList=[],this.usingList=[],this._id=0,this.options=e,this._expand(e.initSize)}},{key:"use",value:function(){this.idleList.length||this._expand(1);var e=this.idleList.shift();return this.usingList.push(e),e}},{key:"unuse",value:function(e){var t=this.usingList.indexOf(e);t<0||(this.usingList.splice(t,1),e.innerHTML="",e.textcontent="",e.style="",this.idleList.push(e))}},{key:"_expand",value:function(e){for(var t=0;t<e;t++)this.idleList.push(this.options.initDOM(this._id++))}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(28)),a=s(n(29)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.container=t.container,this.channel=new r.default(t),this.data=[].concat(t.config.comments),this.playedData=[],this.queue=[],this.timer=null,this.retryTimer=null,this.retryStatus="normal",this.interval=t.config.interval||2e3,this.status="idle",t.on("bullet_remove",this.updateQueue.bind(this));var n=this;this.danmu.on("changeDirection",(function(e){n.danmu.direction=e})),this.nums=0}return i(e,[{key:"updateQueue",value:function(e){var t=this;t.queue.some((function(n,i){return n.id===e.bullet.id&&(t.queue.splice(i,1),!0)}))}},{key:"init",value:function(e,t){t||(t=this),t.retryStatus="normal",t.data.sort((function(e,t){return e.start-t.start})),t.retryTimer||function e(){"closed"===t.status&&"stop"===t.retryStatus||("playing"===t.status&&(t.readData(),t.dataHandle()),"stop"===t.retryStatus&&"paused"!==this.status||setTimeout((function(){e()}),t.interval-1e3))}()}},{key:"start",value:function(){this.status="playing",this.queue=[],this.container.innerHTML="",this.channel.resetWithCb(this.init,this)}},{key:"stop",value:function(){this.status="closed",this.retryTimer=null,this.retryStatus="stop",this.channel.reset(),this.queue=[],this.container.innerHTML=""}},{key:"play",value:function(){var e=this;this.status="playing";var t=this.channel.channels,n=this.danmu.container.getBoundingClientRect();t&&t.length>0&&["scroll","top","bottom"].forEach((function(i){e.queue.forEach((function(e){e.startMove(n),e.resized=!0}));for(var r=0;r<t.length;r++)t[r].queue[i].forEach((function(e){e.resized=!1}))}))}},{key:"pause",value:function(){this.status="paused";var e=this.channel.channels,t=this.danmu.container.getBoundingClientRect();e&&e.length>0&&this.queue.forEach((function(e){e.pauseMove(t)}))}},{key:"dataHandle",value:function(){var e=this;"paused"!==this.status&&"closed"!==this.status&&e.queue.length&&e.queue.forEach((function(t){"waiting"===t.status&&t.startMove(e.channel.containerPos)}))}},{key:"readData",value:function(){var e=this,t=this.danmu,n=0;t.player&&t.player.currentTime&&(n=o.default.formatTime(t.player.currentTime));var i=void 0,r=e.interval,s=e.channel,l=void 0;t.player?(l=e.data.filter((function(t){return!t.start&&e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&(t.start=n),e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&t.start-r<=n&&n<=t.start+r})),t.live&&(e.data=e.data.filter((function(e){return e.start||(e.start=n),e.start>n-3*r})))):0===(l=e.data.splice(0,1)).length&&(l=e.playedData.splice(0,1)),l.length>0&&l.forEach((function(n){e.forceDuration&&e.forceDuration!=n.duration&&(n.duration=e.forceDuration),i=new a.default(t,n),n.hasAttached||(i.attach(),n.hasAttach=!0),s.addBullet(i).result?(e.queue.push(i),e.nums++,i.topInit()):(i.detach(),n.noDiscard&&(n.prior?e.data.unshift(n):e.data.push(n)))}))}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.reset();var n=this;this.danmu.on("bullet_remove",(function(e){n.removeBullet(e.bullet)})),this.direction=t.direction,this.danmu.on("changeDirection",(function(e){n.direction=e})),this.containerPos=this.danmu.container.getBoundingClientRect(),this.containerWidth=this.containerPos.width,this.containerHeight=this.containerPos.height,this.containerLeft=this.containerPos.left,this.containerRight=this.containerPos.right,this.danmu.on("channel_resize",(function(){n.containerPos=n.danmu.container.getBoundingClientRect(),n.resizeing||(n.containerWidth=n.containerPos.width,n.containerHeight=n.containerPos.height,n.containerLeft=n.containerPos.left,n.containerRight=n.containerPos.right,n.resize(!0))}))}return i(e,[{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.danmu.container,n=this;n.resizeing||(n.resizeing=!0,setTimeout((function(){n.danmu.bulletBtn.main.status,n.danmu.bulletBtn.main.data&&n.danmu.bulletBtn.main.data.forEach((function(e){e.bookChannelId&&delete e.bookChannelId}));var i=t.getBoundingClientRect();n.width=i.width,n.height=i.height,n.danmu.config.area&&n.danmu.config.area.start>=0&&n.danmu.config.area.end>=n.danmu.config.area.start&&("b2t"===n.direction?n.width=n.width*(n.danmu.config.area.end-n.danmu.config.area.start):n.height=n.height*(n.danmu.config.area.end-n.danmu.config.area.start)),n.container=t;var r,a=n.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);r="b2t"===n.direction?Math.floor(n.width/a):Math.floor(n.height/a);for(var o=[],s=0;s<r;s++)o[s]={id:s,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(n.channels&&n.channels.length<=o.length){for(var l=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach((function(i){n.channels[t].queue[i].forEach((function(r){r.el&&(o[t].queue[i].push(r),r.resized||(r.pauseMove(n.containerPos,e),"paused"!==r.danmu.bulletBtn.main.status&&r.startMove(n.containerPos),r.resized=!0))}))})),n.channels[t].queue.bottom.forEach((function(i){if(i.el){if(o[t+o.length-n.channels.length].queue.bottom.push(i),i.channel_id[0]+i.channel_id[1]-1===t){var r=[].concat(i.channel_id);i.channel_id=[r[0]-n.channels.length+o.length,r[1]],i.top=i.channel_id[0]*a,n.danmu.config.area&&n.danmu.config.area.start&&(i.top+=n.containerHeight*n.danmu.config.area.start),i.topInit()}i.resized||(i.pauseMove(n.containerPos,e),"paused"!==i.danmu.bulletBtn.main.status&&i.startMove(n.containerPos),i.resized=!0)}}))},u=0;u<n.channels.length;u++)l(u);for(var c=function(e){["scroll","top","bottom"].forEach((function(t){o[e].queue[t].forEach((function(e){e.resized=!1}))}))},d=0;d<o.length;d++)c(d);n.channels=o,"b2t"===n.direction?n.channelWidth=a:n.channelHeight=a}else if(n.channels&&n.channels.length>o.length){for(var p=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach((function(i){if("top"===i&&t>Math.floor(o.length/2));else if("bottom"===i&&t<=Math.floor(o.length/2));else{var r="bottom"===i?t-o.length+n.channels.length:t;n.channels[r].queue[i].forEach((function(s,l){if(s.el){if(o[t].queue[i].push(s),"bottom"===i&&s.channel_id[0]+s.channel_id[1]-1===r){var u=[].concat(s.channel_id);s.channel_id=[u[0]-n.channels.length+o.length,u[1]],s.top=s.channel_id[0]*a,n.danmu.config.area&&n.danmu.config.area.start&&(s.top+=n.containerHeight*n.danmu.config.area.start),s.topInit()}s.pauseMove(n.containerPos,e),"paused"!==s.danmu.bulletBtn.main.status&&s.startMove(n.containerPos),s.resized||(s.resized=!0)}n.channels[r].queue[i].splice(l,1)}))}}))},f=0;f<o.length;f++)p(f);for(var h=function(e){["scroll","top","bottom"].forEach((function(t){n.channels[e].queue[t].forEach((function(e){e.pauseMove(n.containerPos),e.remove()}))}))},g=o.length;g<n.channels.length;g++)h(g);for(var y=function(e){["scroll","top","bottom"].forEach((function(t){o[e].queue[t].forEach((function(e){e.resized=!1}))}))},m=0;m<o.length;m++)y(m);n.channels=o,"b2t"===n.direction?n.channelWidth=a:n.channelHeight=a}n.resizeing=!1}),10))}},{key:"addBullet",value:function(e){var t=this,n=this.danmu,i=this.channels,r=void 0,a=void 0,o=void 0;if("b2t"===t.direction?(a=this.channelWidth,o=Math.ceil(e.width/a)):(r=this.channelHeight,o=Math.ceil(e.height/r)),o>i.length)return{result:!1,message:"exceed channels.length, occupy="+o+",channelsSize="+i.length};for(var s=!0,l=void 0,u=-1,c=0,d=i.length;c<d;c++)if(i[c].queue[e.mode].some((function(t){return t.id===e.id})))return{result:!1,message:"exsited, channelOrder="+c+",danmu_id="+e.id};if("scroll"===e.mode)for(var p=0,f=i.length-o;p<=f;p++){s=!0;for(var h=p;h<p+o;h++){if((l=i[h]).operating.scroll){s=!1;break}if((l.bookId.scroll||e.prior)&&l.bookId.scroll!==e.id){s=!1;break}l.operating.scroll=!0;var g=l.queue.scroll[0];if(g){var y=g.el.getBoundingClientRect();if("b2t"===t.direction){if(y.bottom>t.containerPos.bottom){s=!1,l.operating.scroll=!1;break}}else if(y.right>t.containerPos.right){s=!1,l.operating.scroll=!1;break}var m,v=void 0,b=void 0,x=void 0,w=void 0;if("b2t"===t.direction?(b=(y.top-t.containerPos.top+y.height)/(v=(t.containerPos.height+y.height)/g.duration),x=t.containerPos.height,w=(t.containerPos.height+e.height)/e.duration):(b=(y.left-t.containerPos.left+y.width)/(v=(t.containerPos.width+y.width)/g.duration),x=t.containerPos.width,w=(t.containerPos.width+e.width)/e.duration),m=x/w,n.config.bOffset||(n.config.bOffset=0),v<w&&b+n.config.bOffset>m){s=!1,l.operating.scroll=!1;break}}l.operating.scroll=!1}if(s){u=p;break}}else if("top"===e.mode)for(var _=0,k=i.length-o;_<=k;_++){s=!0;for(var E=_;E<_+o;E++){if(E>Math.floor(i.length/2)){s=!1;break}if((l=i[E]).operating[e.mode]){s=!1;break}if((l.bookId[e.mode]||e.prior)&&l.bookId[e.mode]!==e.id){s=!1;break}if(l.operating[e.mode]=!0,l.queue[e.mode].length>0){s=!1,l.operating[e.mode]=!1;break}l.operating[e.mode]=!1}if(s){u=_;break}}else if("bottom"===e.mode)for(var T=i.length-o;T>=0;T--){s=!0;for(var S=T;S<T+o;S++){if(S<=Math.floor(i.length/2)){s=!1;break}if((l=i[S]).operating[e.mode]){s=!1;break}if((l.bookId[e.mode]||e.prior)&&l.bookId[e.mode]!==e.id){s=!1;break}if(l.operating[e.mode]=!0,l.queue[e.mode].length>0){s=!1,l.operating[e.mode]=!1;break}l.operating[e.mode]=!1}if(s){u=T;break}}if(-1!==u){for(var C=u,A=u+o;C<A;C++)(l=i[C]).operating[e.mode]=!0,l.queue[e.mode].unshift(e),e.prior&&delete l.bookId[e.mode],l.operating[e.mode]=!1;return e.prior&&(delete e.bookChannelId,n.player&&n.bulletBtn.main.data.some((function(t){return t.id===e.id&&(delete t.bookChannelId,!0)}))),e.channel_id=[u,o],"b2t"===t.direction?(e.top=u*a,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerWidth*t.danmu.config.area.start)):(e.top=u*r,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerHeight*t.danmu.config.area.start)),{result:e,message:"success"}}if(e.options.realTime){var D=0,O=null;if(t.danmu.bulletBtn.main.queue.forEach((function(e,n){e.el&&e.el.getBoundingClientRect().right>t.containerPos.right&&e.start>=D&&(D=e.start,O=e)})),O){e.channel_id=O.channel_id;for(var R=O.channel_id[0],L=O.channel_id[0]+O.channel_id[1];R<L;R++)(l=i[R]).operating[e.mode]=!0,l.queue[e.mode].unshift(e),e.prior&&delete l.bookId[e.mode],l.operating[e.mode]=!1;return e.top=O.top,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerHeight*t.danmu.config.area.start),{result:e,message:"success"}}}if(e.prior)if(e.bookChannelId)n.player&&n.bulletBtn.main.data.some((function(t){return t.id===e.id&&(t.start+=2e3,!0)}));else{u=-1;for(var P=0,M=i.length-o;P<=M;P++){s=!0;for(var B=P;B<P+o;B++)if(i[B].bookId[e.mode]){s=!1;break}if(s){u=P;break}}if(-1!==u){for(var U=u;U<u+o;U++)i[U].bookId[e.mode]=e.id;n.player&&n.bulletBtn.main.data.some((function(t){return t.id===e.id&&(t.start+=2e3,t.bookChannelId=[u,o],!0)}))}}return{result:!1,message:"no surplus will right"}}},{key:"removeBullet",value:function(e){for(var t=this.channels,n=e.channel_id,i=void 0,r=n[0],a=n[0]+n[1];r<a;r++)if(i=t[r]){i.operating[e.mode]=!0;var o=-1;i.queue[e.mode].some((function(t,n){return t.id===e.id&&(o=n,!0)})),o>-1&&i.queue[e.mode].splice(o,1),i.operating[e.mode]=!1}e.options.loop&&this.danmu.bulletBtn.main.playedData.push(e.options)}},{key:"resetArea",value:function(){var e=this.danmu.container,t=this,n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var i,r=t.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);i="b2t"===t.direction?Math.floor(t.width/r):Math.floor(t.height/r);for(var a=[],o=0;o<i;o++)a[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(t.channels&&t.channels.length<=a.length){for(var s=function(e){a[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach((function(n){t.channels[e].queue[n].forEach((function(i){i.el&&(a[e].queue[n].push(i),i.resized||(i.pauseMove(t.containerPos,!1),i.startMove(t.containerPos),i.resized=!0))}))})),t.channels[e].queue.bottom.forEach((function(n){if(n.el){if(a[e+a.length-t.channels.length].queue.bottom.push(n),n.channel_id[0]+n.channel_id[1]-1===e){var i=[].concat(n.channel_id);n.channel_id=[i[0]-t.channels.length+a.length,i[1]],n.top=n.channel_id[0]*r,t.danmu.config.area&&t.danmu.config.area.start&&(n.top+=t.containerHeight*t.danmu.config.area.start),n.topInit()}n.resized||(n.pauseMove(t.containerPos,!1),n.startMove(t.containerPos),n.resized=!0)}}))},l=0;l<t.channels.length;l++)s(l);for(var u=function(e){["scroll","top","bottom"].forEach((function(t){a[e].queue[t].forEach((function(e){e.resized=!1}))}))},c=0;c<a.length;c++)u(c);t.channels=a,"b2t"===t.direction?t.channelWidth=r:t.channelHeight=r}else if(t.channels&&t.channels.length>a.length){for(var d=function(e){a[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach((function(n){if("top"===n&&e>Math.floor(a.length/2));else if("bottom"===n&&e<=Math.floor(a.length/2));else{var i="bottom"===n?e-a.length+t.channels.length:e;t.channels[i].queue[n].forEach((function(o,s){if(o.el){if(a[e].queue[n].push(o),"bottom"===n&&o.channel_id[0]+o.channel_id[1]-1===i){var l=[].concat(o.channel_id);o.channel_id=[l[0]-t.channels.length+a.length,l[1]],o.top=o.channel_id[0]*r,t.danmu.config.area&&t.danmu.config.area.start&&(o.top+=t.containerHeight*t.danmu.config.area.start),o.topInit()}o.resized||(o.pauseMove(t.containerPos,!1),o.startMove(t.containerPos),o.resized=!0)}t.channels[i].queue[n].splice(s,1)}))}}))},p=0;p<a.length;p++)d(p);for(var f=function(e){["scroll","top","bottom"].forEach((function(t){a[e].queue[t].forEach((function(e){e.resized=!1}))}))},h=0;h<a.length;h++)f(h);t.channels=a,"b2t"===t.direction?t.channelWidth=r:t.channelHeight=r}}},{key:"reset",value:function(){var e=this.danmu.container,t=this;t.danmu.bulletBtn&&t.danmu.bulletBtn.main?t.danmu.bulletBtn.main.queue.forEach((function(e){e.pauseMove(t.containerPos),e.remove()})):t.channels&&t.channels.length>0&&["scroll","top","bottom"].forEach((function(e){for(var n=0;n<t.channels.length;n++)t.channels[n].queue[e].forEach((function(e){e.pauseMove(t.containerPos),e.remove()}))})),setTimeout((function(){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var i,r=t.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);i="b2t"===t.direction?Math.floor(t.width/r):Math.floor(t.height/r);for(var a=[],o=0;o<i;o++)a[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};t.channels=a,"b2t"===t.direction?t.channelWidth=r:t.channelHeight=r}),200)}},{key:"resetWithCb",value:function(e,t){var n=this.danmu.container,i=this;i.channels&&i.channels.length>0&&["scroll","top","bottom"].forEach((function(e){for(var t=0;t<i.channels.length;t++)i.channels[t].queue[e].forEach((function(e){e.pauseMove(i.containerPos),e.remove()}))}));var r=n.getBoundingClientRect();i.width=r.width,i.height=r.height,i.danmu.config.area&&i.danmu.config.area.start>=0&&i.danmu.config.area.end>=i.danmu.config.area.start&&("b2t"===i.direction?i.width=i.width*(i.danmu.config.area.end-i.danmu.config.area.start):i.height=i.height*(i.danmu.config.area.end-i.danmu.config.area.start)),i.container=n;var a,o=i.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);a="b2t"===i.direction?Math.floor(i.width/o):Math.floor(i.height/o);for(var s=[],l=0;l<a;l++)s[l]={id:l,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};i.channels=s,i.channelHeight=o,e&&e(!0,t)}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(i=n(0))&&i.__esModule?i:{default:i},o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.options=n,this.duration=n.duration,this.moveV=n.moveV,this.id=n.id,this.container=t.container,this.start=n.start,this.prior=n.prior,this.color=n.color,this.bookChannelId=n.bookChannelId,this.direction=t.direction;var i=this;this.danmu.on("changeDirection",(function(e){i.direction=e}));var r=void 0;if(this.domObj=a.default.domObj,n.el&&1===n.el.nodeType)(r=this.domObj.use()).appendChild(a.default.copyDom(n.el));else if((r=this.domObj.use()).textContent=n.txt,n.style){var o=n.style;Object.keys(o).forEach((function(e){r.style[e]=o[e]}))}"top"===n.mode||"bottom"===n.mode?this.mode=n.mode:this.mode="scroll",this.el=r,n.like&&n.like.el&&this.setLikeDom(n.like.el,n.like.style),this.status="waiting";var s=this.container.getBoundingClientRect(),l=Math.floor(Math.random()*(s.width/10>100?200:s.width/10));n.realTime&&(l=0),this.el.style.left=s.width+l+"px",this.containerPos=s}return r(e,[{key:"attach",value:function(){if(this.container.appendChild(this.el),this.elPos=this.el.getBoundingClientRect(),"b2t"===this.direction?(this.width=this.elPos.height,this.height=this.elPos.width):(this.width=this.elPos.width,this.height=this.elPos.height),this.moveV){var e=this.containerPos;this.duration=(e.width+this.width)/this.moveV*1e3}this.danmu.config.mouseControl&&this.el.addEventListener("mouseover",this.mouseoverFun.bind(this))}},{key:"mouseoverFun",value:function(e){this.danmu.mouseControl&&this.danmu.config.mouseControlPause||"waiting"===this.status||"end"===this.status||this.danmu.emit("bullet_hover",{bullet:this,event:e})}},{key:"detach",value:function(){var e=this;e.container&&e.el&&e.domObj.unuse(e.el),e.danmu.off("changeDirection",(function(t){e.direction=t}))}},{key:"topInit",value:function(){if("b2t"===this.direction){var e=this.containerPos;this.el.style.transformOrigin="left top",this.el.style.transform="translateX(-"+this.top+"px) translateY("+e.height+"px) translateZ(0px) rotate(90deg)",this.el.style.transition="transform 0s linear 0s"}else this.el.style.top=this.top+"px"}},{key:"pauseMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if("paused"!==this.status&&("forcedPause"!==n.status&&(this.status="paused"),clearTimeout(n.removeTimer),this.el))if(this.el.style.willChange="auto","scroll"===this.mode){if(t){var i=((new Date).getTime()-n.moveTime)/1e3,r=i*this.moveV,a=0;a=n.moveMoreS-r>=0?"b2t"===this.direction?(n.moveMoreS-r)/n.moveContainerHeight*e.height:(n.moveMoreS-r)/n.moveContainerWidth*e.width:n.moveMoreS-r,"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+a+"px) translateZ(0px) rotate(90deg)":this.el.style.left=a+"px"}else"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+(this.el.getBoundingClientRect().top-e.top)+"px) translateZ(0px) rotate(90deg)":this.el.style.left=this.el.getBoundingClientRect().left-e.left+"px";"b2t"===this.direction||(this.el.style.transform="translateX(0px) translateY(0px) translateZ(0px)"),this.el.style.transition="transform 0s linear 0s"}else this.pastDuration&&this.startTime?this.pastDuration=this.pastDuration+(new Date).getTime()-this.startTime:this.pastDuration=1}},{key:"startMove",value:function(e,t){var n=this;if(n.hasMove||(n.danmu.emit("bullet_start",n),n.hasMove=!0),("forcedPause"!==n.status||t)&&this.el&&"start"!==this.status)if(this.status="start",this.el.style.willChange="transform","scroll"===this.mode)if("b2t"===this.direction){this.moveV=(e.height+this.height)/this.duration*1e3;var i=(n.el.getBoundingClientRect().bottom-e.top)/this.moveV;this.el.style.transition="transform "+i+"s linear 0s",setTimeout((function(){n.el&&(n.el.style.transform="translateX(-"+n.top+"px) translateY(-"+n.height+"px) translateZ(0px) rotate(90deg)",n.moveTime=(new Date).getTime(),n.moveMoreS=n.el.getBoundingClientRect().top-e.top,n.moveContainerHeight=e.height,n.removeTimer=setTimeout(o,1e3*i))}),20)}else{this.moveV=(e.width+this.width)/this.duration*1e3;var r=(n.el.getBoundingClientRect().right-e.left)/this.moveV;this.el.style.transition="transform "+r+"s linear 0s",setTimeout((function(){n.el&&(n.el.style.transform="translateX(-"+(n.el.getBoundingClientRect().right-e.left)+"px) translateY(0px) translateZ(0px)",n.moveTime=(new Date).getTime(),n.moveMoreS=n.el.getBoundingClientRect().left-e.left,n.moveContainerWidth=e.width,n.removeTimer=setTimeout(o,1e3*r))}),20)}else{this.el.style.left="50%",this.el.style.margin="0 0 0 -"+this.width/2+"px",this.pastDuration||(this.pastDuration=1);var a=this.duration>=this.pastDuration?this.duration-this.pastDuration:0;this.removeTimer=setTimeout(o,a),this.startTime=(new Date).getTime()}function o(){if(n.el)if("scroll"===n.mode){var e=n.containerPos,t=n.el.getBoundingClientRect();"b2t"===n.direction?t&&t.bottom<=e.top+100?(n.status="end",n.remove()):(n.pauseMove(e),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(e)):t&&t.right<=e.left+100?(n.status="end",n.remove()):(n.pauseMove(e),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(e))}else n.status="end",n.remove()}}},{key:"remove",value:function(){var e=this;this.removeTimer&&clearTimeout(this.removeTimer),e.el&&e.el.parentNode&&(e.el.style.willChange="auto",this.danmu.off("changeDirection",(function(t){e.direction=t})),this.domObj.unuse(e.el),e.el.parentNode.removeChild(e.el),e.el=null,e.danmu.emit("bullet_remove",{bullet:e}))}},{key:"setFontSize",value:function(e){this.el&&(this.el.style.fontSize=e)}},{key:"setLikeDom",value:function(e,t){if(e&&(Object.keys(t).forEach((function(n){e.style[n]=t[n]})),e.className="danmu-like",this.el)){var n=this.el.querySelector(".danmu-like");n&&this.el.removeChild(n),this.el.innerHTML=""+this.el.innerHTML+e.outerHTML}return e}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){var i=n(31);"string"==typeof i&&(i=[[e.i,i,""]]),n(33)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(32)(!1)).push([e.i,".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var a=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[i].concat(o).concat([a]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var i,r,a={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),l=function(e){return document.querySelector(e)},u=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=l.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,d=0,p=[],f=n(34);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=a[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(x(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(x(i.parts[o],t));a[i.id]={id:i.id,refs:1,parts:s}}}}function g(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}function y(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=o(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=u(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),y(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function x(e,t){var n,i,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var o=d++;n=c||(c=v(t)),i=k.bind(null,n,o,!1),r=k.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),y(e,t),t}(t),i=T.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),i=E.bind(null,n),r=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":o(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==o(t.attrs)?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=g(e,t);return h(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var o=n[r];(s=a[o.id]).refs--,i.push(s)}for(e&&h(g(e,t),t),r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var w,_=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function k(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=_(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function E(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function T(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=f(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(i=[],void 0===(r="function"==typeof(n=a)?n.apply(t,i):n)||(e.exports=r))}).call(this,n(97)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40">\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M36.5,18.73a1.19,1.19,0,0,0,1-1.14V16.33a1.2,1.2,0,0,0-1-1.13l-.61-.08a1.75,1.75,0,0,1-1.3-.86l-.21-.36-.2-.36A1.72,1.72,0,0,1,34,12l.23-.58a1.18,1.18,0,0,0-.5-1.42l-1.1-.62a1.18,1.18,0,0,0-1.47.3l-.39.51a1.82,1.82,0,0,1-1.41.72c-.44,0-1.88-.27-2.22-.7l-.39-.49a1.18,1.18,0,0,0-1.48-.28l-1.09.64a1.19,1.19,0,0,0-.47,1.43l.25.59a1.87,1.87,0,0,1-.08,1.58c-.26.37-1.17,1.5-1.71,1.58l-.63.09a1.19,1.19,0,0,0-1,1.14l0,1.27a1.17,1.17,0,0,0,1,1.12l.61.08a1.74,1.74,0,0,1,1.3.87l.21.36.2.35A1.69,1.69,0,0,1,24,22.08l-.23.59a1.19,1.19,0,0,0,.5,1.42l1.1.62a1.19,1.19,0,0,0,1.48-.31l.38-.5a1.83,1.83,0,0,1,1.41-.72c.44,0,1.88.25,2.22.69l.39.49a1.18,1.18,0,0,0,1.48.28L33.86,24a1.19,1.19,0,0,0,.47-1.43L34.09,22a1.84,1.84,0,0,1,.07-1.58c.26-.37,1.17-1.5,1.72-1.58ZM31,18.94a2.76,2.76,0,0,1-4.65-1.2A2.71,2.71,0,0,1,27,15.13a2.76,2.76,0,0,1,4.64,1.2A2.7,2.7,0,0,1,31,18.94Z"/>\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M32,0H3.59A3.59,3.59,0,0,0,0,3.59v17A3.59,3.59,0,0,0,3.59,24.2H19.72a12.59,12.59,0,0,1-.81-1.2A11.73,11.73,0,0,1,35.54,7.28V3.59A3.59,3.59,0,0,0,32,0ZM13,14.18H4.29a1.52,1.52,0,0,1,0-3H13a1.52,1.52,0,0,1,0,3ZM16.45,8H4.29a1.51,1.51,0,0,1,0-3H16.45a1.51,1.51,0,1,1,0,3Z"/>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_pip",(function(){var e=this,t=a.default.util;if(e.config.pip){var n=e.lang.PIP,i=t.createDom("xg-pip",'<p class="name"><span>'+n+"</span></p>",{tabindex:9},"xgplayer-pip");e.once("ready",(function(){e.controls.appendChild(i)})),["click","touchend"].forEach((function(t){i.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("pipBtnClick")}))}))}}))},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(101));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_playNext",(function(){var e=this,t=i.default.util,n=e.config.playNext;if(n&&n.urlList){var a=t.createDom("xg-playnext",'<xg-icon class="xgplayer-icon">'+r.default+"</xg-icon>",{},"xgplayer-playnext"),o=e.lang.PLAYNEXT_TIPS,s=t.createDom("xg-tips",'<span class="xgplayer-tip-playnext">'+o+"</span>",{},"xgplayer-tips");a.appendChild(s),e.once("ready",(function(){e.controls.appendChild(a)})),["click","touchend"].forEach((function(t){a.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),i.default.util.addClass(e.root,"xgplayer-is-enter"),e.emit("playNextBtnClick")}))}));var l=function(){i.default.util.addClass(e.root,"xgplayer-playnext-inactive")};e.on("urlListEnd",l),e.once("destroy",(function t(){e.off("urlListEnd",l),e.off("destroy",t)}))}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(103));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_rotate",(function(){var e=this,t=i.default.util;if(e.config.rotate){var n=t.createDom("xg-rotate",'<xg-icon class="xgplayer-icon">'+r.default+"</xg-icon>",{},"xgplayer-rotate"),a=e.lang.ROTATE_TIPS,o=t.createDom("xg-tips",'<span class="xgplayer-tip-rotate">'+a+"</span>",{},"xgplayer-tips");n.appendChild(o),e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("rotateBtnClick")}))}))}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t,n){"use strict";var i=a(n(0)),r=a(n(105));function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("s_reload",(function(){var e=this,t=i.default.util;if(e.config.reload){var n=t.createDom("xg-reload",'<xg-icon class="xgplayer-icon">'+r.default+"</xg-icon>",{},"xgplayer-reload"),a=e.lang.RELOAD_TIPS,o=t.createDom("xg-tips",'<span class="xgplayer-tip-reload">'+a+"</span>",{},"xgplayer-tips");n.appendChild(o),e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("reloadBtnClick")}))}))}}))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#FFF" fill-opacity="1" fill-rule="nonzero" d="M18.17 19.988a7.182 7.182 0 0 1-4.256 1.318 7.806 7.806 0 0 1-.595-.03c-.08-.008-.16-.021-.242-.031a8.004 8.004 0 0 1-.458-.071c-.094-.018-.185-.042-.276-.063a7.743 7.743 0 0 1-.439-.113c-.068-.022-.136-.047-.205-.07a7.03 7.03 0 0 1-.492-.181c-.037-.015-.072-.032-.108-.049a7.295 7.295 0 0 1-.554-.269l-.025-.012a7.347 7.347 0 0 1-2.111-1.753c-.03-.036-.057-.074-.086-.11a7.305 7.305 0 0 1-1.594-4.557h1.686a.123.123 0 0 0 .108-.064.119.119 0 0 0-.006-.125L5.684 9.532a.123.123 0 0 0-.103-.056.123.123 0 0 0-.102.056l-2.834 4.276a.121.121 0 0 0-.005.125c.022.04.064.064.107.064h1.687c0 2.025.627 3.902 1.693 5.454.013.021.022.044.037.066.11.159.233.305.352.455.043.057.085.116.13.171.175.213.36.413.55.61.02.018.036.038.054.055a9.447 9.447 0 0 0 2.91 1.996c.058.026.115.054.175.079.202.084.41.158.619.228.098.034.196.069.296.1.183.054.37.1.558.145.125.029.249.06.376.085.052.01.102.027.155.035.177.032.355.05.533.071.064.007.128.018.19.026.32.03.639.052.956.052a9.46 9.46 0 0 0 5.47-1.746 1.16 1.16 0 0 0 .282-1.608 1.143 1.143 0 0 0-1.6-.283zm5.397-5.991a9.604 9.604 0 0 0-1.685-5.441c-.016-.027-.026-.054-.043-.078-.132-.19-.276-.366-.419-.543-.017-.022-.032-.044-.05-.065a9.467 9.467 0 0 0-3.571-2.7l-.114-.051a11.2 11.2 0 0 0-.673-.248c-.082-.027-.163-.057-.247-.082a9.188 9.188 0 0 0-.6-.156c-.113-.026-.224-.055-.337-.077-.057-.011-.109-.028-.164-.037-.151-.027-.304-.039-.455-.058-.104-.013-.208-.03-.313-.04a10.05 10.05 0 0 0-.759-.039c-.045 0-.09-.007-.136-.007l-.025.003a9.45 9.45 0 0 0-5.46 1.737 1.16 1.16 0 0 0-.284 1.608c.363.523 1.08.65 1.6.284a7.182 7.182 0 0 1 4.222-1.32c.217.002.429.013.639.033.065.007.129.017.193.025.173.021.344.046.513.08.075.014.149.033.221.05.166.037.331.077.494.127l.152.051c.185.061.366.127.545.201l.054.025a7.308 7.308 0 0 1 2.741 2.067l.013.018a7.302 7.302 0 0 1 1.652 4.633h-1.686a.123.123 0 0 0-.108.064.12.12 0 0 0 .006.124l2.834 4.277c.022.033.06.054.103.054.042 0 .08-.021.102-.054l2.833-4.277a.12.12 0 0 0 .005-.124.123.123 0 0 0-.108-.064h-1.685z"/>\n</svg>\n'},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_screenShot",(function(){var e=this,t=a.default.util;if(e.config.screenShot){var n=e.lang.SCREENSHOT,i=t.createDom("xg-screenshot",'<p class="name"><span>'+n+"</span></p>",{tabindex:11},"xgplayer-screenshot");e.once("ready",(function(){e.controls.appendChild(i)})),["click","touchend"].forEach((function(t){i.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("screenShotBtnClick")}))}))}}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_textTrack",(function(){var e=this,t=e.root,n=a.default.util,i=(a.default.sniffer,e.controls,n.createDom("xg-texttrack","",{tabindex:7},"xgplayer-texttrack")),r=e.config.textTrack;r&&Array.isArray(r)&&r.length>0&&(n.addClass(e.root,"xgplayer-is-texttrack"),e.once("canplay",(function(){var a=this,o=["<ul>"];o.push("<li class='"+(this.textTrackShowDefault?"":"selected")+"'}'>关闭</li>"),r.forEach((function(e){o.push("<li class='"+(e.default&&a.textTrackShowDefault?"selected":"")+"'>"+e.label+"</li>")}));var s=e.lang.TEXTTRACK;o.push('</ul><p class="name">'+s+"</p>");var l=t.querySelector(".xgplayer-texttrack");if(l){l.innerHTML=o.join("");var u=l.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||u.addEventListener("mouseenter",(function(e){e.preventDefault(),e.stopPropagation(),n.addClass(t,"xgplayer-texttrack-active"),l.focus()}))}else{i.innerHTML=o.join("");var c=i.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||c.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-texttrack-active"),i.focus()})),e.controls.appendChild(i)}}))),["touchend","click"].forEach((function(t){i.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation();var a=t.target||t.srcElement;if(a&&"li"===a.tagName.toLocaleLowerCase()){Array.prototype.forEach.call(a.parentNode.childNodes,(function(e){n.removeClass(e,"selected")})),n.addClass(a,"selected");var o=e.root.getElementsByTagName("Track");"关闭"===a.innerHTML?(o[0].track.mode="hidden",o[0].src="",n.removeClass(e.root,"xgplayer-texttrack-active")):(o[0].style.display="block",n.addClass(e.root,"xgplayer-texttrack-active"),o[0].track.mode="showing",r.some((function(e){if(e.label===a.innerHTML)return o[0].src=e.src,e.kind&&(o[0].kind=e.kind),o[0].label=e.label,e.srclang&&(o[0].srclang=e.srclang),!0})),e.emit("textTrackChange",a.innerHTML))}else"click"!==e.config.textTrackActive||!a||"p"!==a.tagName.toLocaleLowerCase()&&"em"!==a.tagName.toLocaleLowerCase()||(n.addClass(e.root,"xgplayer-texttrack-active"),i.focus())}),!1)})),e.on("play",(function(){var i=t.querySelector(".xgplayer-texttrack ul"),a=t.getElementsByTagName("Track");e.hls&&i&&a&&(a[0].src="",Array.prototype.forEach.call(i.childNodes,(function(e){n.hasClass(e,"selected")&&("关闭"===e.innerHTML?(a[0].track.mode="hidden",a[0].src=""):(a[0].track.mode="hidden",r.some((function(t){if(t.label!==e.innerHTML)return a[0].src=t.src,t.kind&&(a[0].kind=t.kind),a[0].label=t.label,t.srclang&&(a[0].srclang=t.srclang),!0})),r.some((function(t){if(t.label===e.innerHTML)return setTimeout((function(){a[0].src=t.src,t.kind&&(a[0].kind=t.kind),a[0].label=t.label,t.srclang&&(a[0].srclang=t.srclang),a[0].track.mode="showing"})),!0}))))})),n.removeClass(e.root,"xgplayer-texttrack-active"))})),i.addEventListener("mouseleave",(function(t){t.preventDefault(),t.stopPropagation(),n.removeClass(e.root,"xgplayer-texttrack-active")}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_error",(function(){var e=this,t=e.root,n=a.default.util,i=n.createDom("xg-error",'<span class="xgplayer-error-text">请<span class="xgplayer-error-refresh">刷新</span>试试</span>',{},"xgplayer-error");e.once("ready",(function(){t.appendChild(i)}));var r=i.querySelector(".xgplayer-error-text"),o=null;function s(){e.config.lang&&"zh-cn"===e.config.lang?r.innerHTML=e.config.errorTips||'请<span class="xgplayer-error-refresh">刷新</span>试试':r.innerHTML=e.config.errorTips||'please try to <span class="xgplayer-error-refresh">refresh</span>',n.addClass(e.root,"xgplayer-is-error"),(o=i.querySelector(".xgplayer-error-refresh"))&&["touchend","click"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.autoplay=!0,e.once("playing",(function(){n.removeClass(e.root,"xgplayer-is-error")})),e.src=e.config.url}))}))}e.on("error",s),e.once("destroy",(function t(){e.off("error",s),e.off("destroy",t)}))}))},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};a.default.install("s_memoryPlay",(function(){var e=this,t=a.default.util,n=e.config.lastPlayTime||0,i=e.config.lastPlayTimeHideDelay||3,r=null;if(!(n<=0)){(r=t.createDom("xg-memoryplay",'<div class="xgplayer-memoryplay-spot"><div class="xgplayer-progress-tip">您上次观看到 <span class="xgplayer-lasttime">'+t.format(n)+'</span> ，为您自动续播 <span class="btn-close"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg></span></div></div>',{},"xgplayer-memoryplay")).addEventListener("mouseover",(function(e){e.stopPropagation()}));var o=function(){r&&r.parentNode.removeChild(r),r=null};r.querySelector(".xgplayer-progress-tip .btn-close").addEventListener("click",o),e.once("play",(function(){e.root.appendChild(r),e.emit("memoryPlayStart",n),i>0&&setTimeout((function(){o()}),1e3*i)})),e.once("ended",o)}}))}])},module.exports=factory()},UvjS:function(e,t,n){n("bKD1"),$((function(){$(".course-menu-item").tap((function(){var e=$(this).attr("data-page");$("."+e).show().siblings().hide(),$(this).addClass("active").siblings().removeClass("active")})),$("body").on("tap",".promo-code-check-button",(function(){var e=$('input[name="promo_code"]').val();if(""!==e){var t=$(this).attr("data-url"),n=$('meta[name="csrf-token"]').attr("content");$.post(t,{promo_code:e,_token:n},(function(e){if(0===e.code){var t=e.data.discount,n=$(".total-price").attr("data-total")-t;n=n>0?n:0,$(".promo-code-info").text("此码有效，已抵扣"+t+"元").show(),$(".promo-code-price-text").text(t),$(".total-price").text(n),$('input[name="promo_code_id"]').val(e.data.id)}else $(".promo-code-info").text(e.message).show(),$(".promo-code-price-text").text(0),$(".total-price").text($(".total-price").attr("data-total")),$('input[name="promo_code_id"]').val("")}),"json")}})).on("tap",".captcha",(function(){var e=$(this).attr("src"),t=Date.now();e=-1!==e.indexOf("?")?e.split("?")[0]+"?t="+t:e+"?t="+t,$(this).attr("src",e),$('input[name="captcha"]').val("")})).on("tap",".send-sms-captcha",(function(){var e=this;if(!0!==window.SMS_LOCK){var t=0,n=$('input[name="captcha"]').val(),i=$('input[name="mobile"]').val();if(""!==n&&""!==i){var r=$('meta[name="csrf-token"]').attr("content");$.post("/sms/send",{mobile:i,captcha:n,method:$('input[name="sms_captcha_key"]').val(),_token:r},(function(n){if(0!==n.code)return window.SMS_LOCK=!1,flashError(n.message),void $(".captcha").tap();window.SMS_LOCK=!0,t=120;var i=setInterval((function(){if(t<=1)return $(e).text("发送验证码"),clearInterval(i),void(window.SMS_LOCK=!1);t-=1,$(e).text(t+"s"),window.SMS_LOCK=!0}),1e3)}),"json")}else flashWarning("请输入手机号和图形验证码")}})).on("tap",".role-item",(function(){$(this).addClass("active").siblings().removeClass("active"),$(".role-subscribe-button").attr("href",$(this).attr("data-url"))})).on("tap",".payment-item",(function(){$(this).addClass("active").siblings().removeClass("active"),$('input[name="payment_sign"]').val($(this).attr("data-payment"))})).on("tap",".pay-button",(function(){$(".create-order-form").submit()})).on("submit",".create-order-form",(function(){if(0===$('input[name="payment_sign"]').val().length)return flashWarning("请选择支付方式"),!1})).on("tap",".mobile-login-button",(function(){var e=$(this).attr("data-url"),t=$('.mobile-login-form input[name="mobile"]').val(),n=$('.mobile-login-form input[name="sms_captcha"]').val(),i=$('.mobile-login-form input[name="sms_captcha_key"]').val(),r=$('meta[name="csrf-token"]').attr("content");$.post(e,{_token:r,mobile:t,sms_captcha:n,sms_captcha_key:i},(function(e){if(0!==e.code)return flashError(e.message),$('.mobile-login-form input[name="sms_captcha"]').val(""),void $(".captcha").tap();window.location=e.data.redirect_url}),"json")})).on("tap",".comment-button",(function(){var e=$(this).attr("data-input"),t=parseInt($(this).attr("data-login")),n=$(this).attr("data-url"),i=$(this).attr("data-login-url"),r=$("textarea[name=".concat(e,"]")).val(),a=$('meta[name="csrf-token"]').attr("content");0!==t?r.length<6?flashWarning("评论内容最少6个字"):$.post(n,{_token:a,content:r},(function(e){0!==e.code?flashError(e.message):(flashSuccess("评论提交成功"),setTimeout((function(){window.location.reload()}),600))}),"json"):window.location=i})).on("tap",".course-info-menu .menu-item",(function(){$(".course-content-tab-item").hide(),$("."+$(this).attr("data-dom")).show(),$(this).addClass("active").siblings().removeClass("active")})).on("tap",".show-chapter-videos-box",(function(){var e=$(this).attr("data-dom");$("."+e).toggle();var t=$(this).find("i");$(t).hasClass("fa-angle-down")?$(t).removeClass("fa-angle-down").addClass("fa-angle-up"):$(t).removeClass("fa-angle-up").addClass("fa-angle-down")})).on("tap",".invite-balance-withdraw-button",(function(){var e=$('input[name="total"]').val(),t=$('select[name="channel[name]"]').val(),n=$('input[name="channel[username]"]').val(),i=$('input[name="channel[account]"]').val();if(""===t||""===n||""===i)return window.flashError("请输入信息"),!1;$(this).disabled=!0;var r={_token:$('meta[name="csrf-token"]').attr("content"),total:e,channel:{name:t,username:n,account:i}};$.post($(this).attr("data-action"),r,(function(e){0!==e.code?($(this).disabled=!1,window.flashError(e.message)):(flashSuccess("提现提交成功"),setTimeout((function(){window.location.reload()}),1e3))}),"json")})).on("tap",".invite-balance-withdraw-box-toggle",(function(){$(".balance-withdraw-submit-box-shadow").toggle()})).on("tap",".back-button",(function(){window.history.length<=2?window.location.href=$(this).attr("data-url"):window.history.back()})).on("tap",".like-button",(function(){var e=this;if(0!==parseInt($(this).attr("data-login"))){var t=$(this).attr("data-url"),n=$('meta[name="csrf-token"]').attr("content");$.post(t,{_token:n},(function(t){0!==t.code?flashError(t.message):$(e).hasClass("active")?$(e).removeClass("active"):$(e).addClass("active")}),"json")}else window.location.href=$(this).attr("data-login-url")})).on("tap",".show-course-comment-box",(function(){0!==parseInt($(this).attr("data-login"))?$(".course-comment-input-box-shadow").show():window.location.href=$(this).attr("data-login-url")})).on("tap",".close-course-comment-box",(function(){$(".course-comment-input-box-shadow").hide()})).on("tap",".upload-image-button",(function(e){var t="#"+$(this).attr("data-file-id"),n=$(this).attr("data-input"),i=$(this).attr("data-view-id"),r=$(this).attr("data-url");$(t).off("change");var a=["image/jpg","image/jpeg","image/png","image/gif"];$(t).change((function(e){if(0!==e.target.files.length){var t=e.target.files[0];if(-1!==a.indexOf(t.type))if(t.size>2097152)flashWarning("图片大小不能超过2mb");else{var o=$('meta[name="csrf-token"]').attr("content"),s=new FormData;s.append("file",t),s.append("_token",o),$.ajax({url:r,type:"POST",dataType:"json",cache:!1,data:s,processData:!1,contentType:!1,success:function(e){if(0!==e.code)flashError(e.message);else{var t=e.data.url;$("input[name="+n+"]").val(t);var r="."+i;$(r).find("img").length>0?$(r).find("img").attr("src",t):$(r).append('<img src="'.concat(t,'" width="100" height="100" />'))}},error:function(){flashError("上传图片出错")}})}else flashWarning("仅支持jpg,jpeg,png,gif图片格式")}else flashWarning("请选择图片")})),$(t).click(),e.preventDefault()})).on("tap",".save-profile-button",(function(){for(var e=["real_name","age","birthday","profession","address","graduated_school","diploma","id_number","id_frontend_thumb","id_backend_thumb","id_hand_thumb"],t={},n=0;n<e.length;n++){var i=e[n];t[i]=$('input[name="'.concat(i,'"]')).val()}t.gender=$('input[name="gender"]:checked').val(),t._token=$('meta[name="csrf-token"]').attr("content");var r=$(this).attr("data-url");$.post(r,t,(function(){flashSuccess("保存成功"),setTimeout((function(){window.location.reload()}),500)}))}))}))},bKD1:function(e,t,n){"use strict";n.r(t);var i=n("PSD3"),r=n.n(i),a=n("U5Kh"),o=n.n(a),s=n("k3aE"),l=n.n(s),u=function(){var e=this,t=o.a.util,n=e.root,i=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};if(void 0!==e.config.marquee&&void 0!==e.config.marquee.value){var r=function(){var r=Math.random().toString(36).slice(-6),a=t.createDom("xg-"+r,e.config.marquee.value,{},"");a.style.color="#00000",a.style.position="absolute",a.style["z-index"]=i(100,1111);var o=n.offsetHeight;o=o>50?o-30:o;var s=n.offsetWidth;s=s>50?s-30:s,a.style.top=i(0,o)+"px",a.style.right=i(0,s)+"px",n.appendChild(a),setTimeout((function(){a.remove()}),2e3)};r(),setInterval((function(){r()}),2100)}};o.a.install("marquee",u),l.a.install("marquee",u),window.Player=o.a,window.HlsPlayer=l.a,window.flashSuccess=function(e){r.a.fire("成功",e,"success")},window.flashWarning=function(e){r.a.fire("警告",e,"warning")},window.flashError=function(e){r.a.fire("失败",e,"error")}},k3aE:function(e,t,n){e.exports=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":Y(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":Y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){}function l(){l.init.call(this)}function u(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function c(e,t,n){if(t)e.call(n);else for(var i=e.length,r=v(e,i),a=0;a<i;++a)r[a].call(n)}function d(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,a=v(e,r),o=0;o<r;++o)a[o].call(n,i)}function p(e,t,n,i,r){if(t)e.call(n,i,r);else for(var a=e.length,o=v(e,a),s=0;s<a;++s)o[s].call(n,i,r)}function f(e,t,n,i,r,a){if(t)e.call(n,i,r,a);else for(var o=e.length,s=v(e,o),l=0;l<o;++l)s[l].call(n,i,r,a)}function h(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,a=v(e,r),o=0;o<r;++o)a[o].apply(n,i)}function g(e,t,n,i){var r,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=new s,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),!o.warned&&(r=u(e))&&r>0&&o.length>r){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,function(e){"function"==typeof console.warn?console.warn(e):console.log(e)}(l)}}else o=a[t]=n,++e._eventsCount;return e}function y(e,t,n){function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}var r=!1;return i.listener=n,i}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function w(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _(e,t){return e(t={exports:{}},t.exports),t.exports}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var E={fixedFloat:function(e,t){return Number.parseFloat(Number(e).toFixed(t))}},T=function(){var e=!1,t=!1;try{var n=new(window.AudioContext||window.webkitAudioContext);n.close(),n=null,e=!0}catch(e){}try{for(var i=document.createElement("canvas"),r=["webgl","experimental-webgl","moz-webgl","webkit-3d"],a=0;a<r.length;a++){var o=i.getContext(r[a]);if(o){o=null,i=null,t=!0;break}}}catch(e){}var s=void 0;if("customElements"in window&&window.customElements.define){var l=window.customElements.get("mobile-video");s=l&&l.isSupported()}return e&&t&&s},S=Object.freeze({__proto__:null,debounce:function(e,t){var n=Date.now(),i=null,r=!0;return function(){for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=Date.now();r&&(n=Date.now(),r=!1,e.apply(void 0,o)),l-n>t?(n=l,e.apply(void 0,o)):(i&&window.clearTimeout(i),i=setTimeout((function(){e.apply(void 0,o)}),t))}},caculate:E,softSolutionProbe:T}),C={VISIBILITY_CHANGE:"VISIBILITY_CHANGE"},A={SEEK:"SEEK"},D={LADER_START:"LOADER_START",LOADER_DATALOADED:"LOADER_DATALOADED",LOADER_COMPLETE:"LOADER_COMPLETE",LOADER_RESPONSE_HEADERS:"LOADER_RESPONSE_HEADERS",LOADER_ERROR:"LOADER_ERROR",LOADER_RETRY:"LOADER_RETRY"},O={DEMUX_START:"DEMUX_START",DEMUX_COMPLETE:"DEMUX_COMPLETE",DEMUX_ERROR:"DEMUX_ERROR",METADATA_PARSED:"METADATA_PARSED",SEI_PARSED:"SEI_PARSED",VIDEO_METADATA_CHANGE:"VIDEO_METADATA_CHANGE",AUDIO_METADATA_CHANGE:"AUDIO_METADATA_CHANGE",MEDIA_INFO:"MEDIA_INFO",ISKEYFRAME:"ISKEYFRAME"},R={REMUX_METADATA:"REMUX_METADATA",REMUX_MEDIA:"REMUX_MEDIA",MEDIA_SEGMENT:"MEDIA_SEGMENT",REMUX_ERROR:"REMUX_ERROR",INIT_SEGMENT:"INIT_SEGMENT",DETECT_CHANGE_STREAM:"DETECT_CHANGE_STREAM",DETECT_CHANGE_STREAM_DISCONTINUE:"DETECT_CHANGE_STREAM_DISCONTINUE",DETECT_AUDIO_GAP:"DETECT_AUDIO_GAP",DETECT_LARGE_GAP:"DETECT_LARGE_GAP",DETECT_AUDIO_OVERLAP:"DETECT_AUDIO_OVERLAP",RANDOM_ACCESS_POINT:"RANDOM_ACCESS_POINT",DETECT_FRAG_ID_DISCONTINUE:"DETECT_FRAG_ID_DISCONTINUE"},L={SOURCE_UPDATE_END:"SOURCE_UPDATE_END",MSE_ERROR:"MSE_ERROR",MSE_WRONG_TRACK_ADD:"MSE_WRONG_TRACK_ADD"},P={RETRY_TIME_EXCEEDED:"RETRY_TIME_EXCEEDED"},M=Object.assign({},D,O,R,L,P,A,C),B=[],U=[];for(var I in M)M.hasOwnProperty(I)&&B.push(M[I]);for(var j in M)M.hasOwnProperty(j)&&U.push(M[j]);var z={ALLEVENTS:M,HLS_EVENTS:P,REMUX_EVENTS:R,DEMUX_EVENTS:O,MSE_EVENTS:L,LOADER_EVENTS:D,FlvAllowedEvents:B,HlsAllowedEvents:U,CRYTO_EVENTS:{START_DECRYPT:"START_DECRYPT",DECRYPTED:"DECRYPTED"},PLAYER_EVENTS:A,BROWSER_EVENTS:C},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0,this.fragLength=0,this._lastget=void 0,this.end=!1,this._audoclear=t.autoclear||!1,this.logger=t.logger,this.downloadedUrls=[]}return F(e,[{key:"push",value:function(e,t,n,i,r){this._ts[e]||(this._ts[e]={duration:t,downloaded:!1,downloading:!1,start:this.duration,discontinue:!!n,id:i,cc:r},this._list[this.duration]=e,this.duration+=t,this.fragLength+=1)}},{key:"deleteFrag",value:function(e){this._ts[e]&&(this._ts[e].start>this._lastget.time&&(this._lastget={duration:this._ts[e].duration,time:this._ts[e].start,downloaded:!1,downloading:!1,url:e,id:this._ts[e].id}),delete this._list[this._ts[e].start],delete this._ts[e],this.fragLength-=1)}},{key:"pushM3U8",value:function(e,t){if(!e)throw new Error("No m3u8 data received.");if(this.version=e.version,this.targetduration=e.targetduration,e.encrypt&&!this.encrypt&&(this.encrypt=e.encrypt),this.end=e.end||!1,e.sequence||(e.sequence=0),!(e.sequence>this.sequence))throw new Error("Old m3u8 file received, "+e.sequence);var n=e.frags.length;this.logger&&this.logger.log("PLAYLIST","new playlist ["+e.sequence+", "+(e.sequence+n)+"]"),this.sequence=e.sequence;for(var i=[],r=0;r<n;r++){var a=e.frags[r];!this._ts[a.url]&&this.downloadedUrls.indexOf(a.url)<0&&(i.push(a.url),this.push(a.url,a.duration,a.discontinue,a.id,a.cc))}if(i.length<1)throw new Error("Can not read ts file list.");if(t)for(var o=this.getTsList(),s=0;s<o.length;s++)i.indexOf(o[s])<0&&this.deleteFrag(o[s])}},{key:"getTsList",value:function(){return Object.keys(this._ts)}},{key:"downloaded",value:function(e,t){var n=this._ts[e];n&&(n.downloaded=t)}},{key:"downloading",value:function(e,t){var n=this._ts[e];n&&(n.downloading=t)}},{key:"getTsByName",value:function(e){return this._ts[e]}},{key:"getTs",value:function(e){var t=Object.keys(this._list),n=void 0;if(void 0===e&&(e=this._lastget?this._lastget.time+this._lastget.duration:0),!(t.length<1||e>=this.duration)){t=t.sort((function(e,t){return parseFloat(e)-parseFloat(t)}));for(var i=0;i<t.length&&e>=parseInt(t[i]);i++){var r=this._list[t[i]];n={url:r,downloaded:this._ts[r].downloaded,downloading:this._ts[r].downloading,time:parseInt(t[i]),duration:parseInt(this._ts[r].duration),id:this._ts[r].id,cc:this._ts[r].cc},this.autoclear&&(delete this._ts[this._lastget.url],delete this._list[this._lastget.time]),this._lastget=n}return n&&this.downloadedUrls.push(n.url),n}}},{key:"getLastDownloadedTs",value:function(){for(var e=Object.keys(this._list).sort((function(e,t){return Number(e)-Number(t)})),t=void 0,n=0;n<e.length;n++){var i=this._list[e[n]],r=this._ts[i].downloaded,a=this._ts[i].downloading;if(!r)break;t={url:i,downloaded:r,downloading:a,time:parseInt(e[n]),duration:parseInt(this._ts[i].duration)}}return t}},{key:"clear",value:function(){this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0}},{key:"clearDownloaded",value:function(){for(var e=Object.keys(this._ts),t=0,n=e.length;t<n;t++){var i=this._ts[e[t]];i.downloaded=!1,i.downloading=!1}}},{key:"destroy",value:function(){this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0,this.fragLength=0,this._lastget=void 0,this._audoclear=!1}},{key:"resetSequence",value:function(){this.sequence=-1}},{key:"list",get:function(){return this._list}},{key:"baseURL",set:function(e){this.baseURL!==e&&(this.clear(),this._baseURL=e)},get:function(){return this._baseURL}}]),e}(),q=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),H=function e(){t(this,e),this.mimetype="",this.init=null,this.data=[],this.bufferDuration=0},V=function(){function e(){t(this,e),this.sources={}}return q(e,[{key:"getSource",value:function(e){return this.sources[e]}},{key:"createSource",value:function(e){return this.sources[e]=new H,this.sources[e]}},{key:"clear",value:function(){this.sources={}}},{key:"destroy",value:function(){this.sources={}}}]),e}(),G=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),W=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof ArrayBuffer))throw new Error("data is invalid");this.buffer=t,this.dataview=new DataView(t),this.dataview.position=0}return G(e,[{key:"back",value:function(e){this.position-=e}},{key:"skip",value:function(t){for(var n=Math.floor(t/4),i=t%4,r=0;r<n;r++)e.readByte(this.dataview,4);i>0&&e.readByte(this.dataview,i)}},{key:"readUint8",value:function(){return e.readByte(this.dataview,1)}},{key:"readUint16",value:function(){return e.readByte(this.dataview,2)}},{key:"readUint24",value:function(){return e.readByte(this.dataview,3)}},{key:"readUint32",value:function(){return e.readByte(this.dataview,4)}},{key:"readUint64",value:function(){return e.readByte(this.dataview,8)}},{key:"readInt8",value:function(){return e.readByte(this.dataview,1,!0)}},{key:"readInt16",value:function(){return e.readByte(this.dataview,2,!0)}},{key:"readInt32",value:function(){return e.readByte(this.dataview,4,!0)}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}},{key:"length",get:function(){return this.buffer.byteLength}},{key:"position",set:function(e){this.dataview.position=e},get:function(){return this.dataview.position}}],[{key:"readByte",value:function(e,t,n){var i=void 0;switch(t){case 1:i=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:i=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");i=e.getUint8(e.position)<<16,i|=e.getUint8(e.position+1)<<8,i|=e.getUint8(e.position+2);break;case 4:i=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");i=e.getUint32(e.position)<<32,i|=e.getUint32(e.position+4);break;default:i=""}return e.position+=t,i}}]),e}(),Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$=function(){function e(){r(this,e),this.id=-1,this.sequenceNumber=0,this.samples=[],this.droppedSamples=[],this.length=0}return X(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0}},{key:"distroy",value:function(){this.reset(),this.id=-1}}]),e}(),K=function(e){function t(){r(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.TAG="AudioTrack",e.type="audio",e}return i(t,e),t}($),Z=function(e){function t(){r(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.TAG="VideoTrack",e.type="video",e.dropped=0,e}return i(t,e),X(t,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}}]),t}($),J=(X((function e(){r(this,e),this.audioTrack=null,this.videoTrack=null}),[{key:"destroy",value:function(){this.audioTrack=null,this.videoTrack=null}}]),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Q=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.length=t||0,this.historyLen=t||0,this.array=[],this.offset=0}return J(e,[{key:"push",value:function(e){this.array.push(e),this.length+=e.byteLength,this.historyLen+=e.byteLength}},{key:"shift",value:function(e){if(this.array.length<1)return new Uint8Array(0);if(void 0===e)return this._shiftBuffer();if(this.offset+e===this.array[0].length){var t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){var n=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,n}for(var i=new Uint8Array(e),r=0;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){var a=this.array[0].slice(this.offset,this.offset+e);i.set(a,r),this.offset+=e,this.length-=e,e=0;break}var o=this.array[0].length-this.offset;i.set(this.array[0].slice(this.offset,this.array[0].length),r),this.array.shift(),this.offset=0,r+=o,this.length-=o,e-=o}return i}},{key:"clear",value:function(){this.array=[],this.length=0,this.offset=0}},{key:"destroy",value:function(){this.clear(),this.historyLen=0}},{key:"_shiftBuffer",value:function(){return this.length-=this.array[0].length,this.offset=0,this.array.shift()}},{key:"toInt",value:function(e,t){for(var n=0,i=this.offset+e;i<this.offset+t+e;)i<this.array[0].length?n=256*n+this.array[0][i]:this.array[1]&&(n=256*n+this.array[1][i-this.array[0].length]),i++;return n}}]),e}(),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),te=function(){function e(t){a(this,e);var n={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};return t?Object.assign({},n,t):n}return ee(e,[{key:"destroy",value:function(){this.init=null}}]),e}(),ne=function(){function e(t){a(this,e);var n={avcc:null,sps:new Uint8Array(0),pps:new Uint8Array(0),chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,parRatio:{height:1,width:1},timescale:1e3,type:"video"};return t?Object.assign({},n,t):n}return ee(e,[{key:"destroy",value:function(){this.init=null,this.sps=null,this.pps=null}}]),e}(),ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),re=function(){function e(t){o(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return ie(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,data:new Uint8Array}}}]),e}(),ae=function(){function e(t){o(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return ie(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,isKeyframe:!1,originDts:null,data:new Uint8Array}}}]),e}(),oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),se=function(e){for(var t in e)if(e.hasOwnProperty(t)&&null===e[t])return!1;return!0},le=N,ue=V,ce=W,de=$,pe=Q,fe=K,he=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mimeType=null,this.duration=null,this.hasVideo=null,this.video={codec:null,width:null,height:null,profile:null,level:null,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},chromaFormat:null,parRatio:{width:1,height:1}},this.hasAudio=null,this.audio={codec:null,sampleRate:null,sampleRateIndex:null,channelCount:null}}return oe(e,[{key:"isComplete",value:function(){return e.isBaseInfoReady(this)&&e.isVideoReady(this)&&e.isAudioReady(this)}}],[{key:"isBaseInfoReady",value:function(e){return se(e)}},{key:"isVideoReady",value:function(e){return!e.hasVideo||se(e.video)}},{key:"isAudioReady",value:function(e){return!e.hasAudio||se(e.video)}}]),e}(),ge=Z,ye=te,me=ne,ve=re,be=ae;s.prototype=Object.create(null),l.EventEmitter=l,l.usingDomains=!1,l.prototype.domain=void 0,l.prototype._events=void 0,l.prototype._maxListeners=void 0,l.defaultMaxListeners=10,l.init=function(){this.domain=null,l.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new s,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(e){var t,n,i,r,a,o,s,l="error"===e;if(o=this._events)l=l&&null==o.error;else if(!l)return!1;if(s=this.domain,l){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=o[e]))return!1;var g="function"==typeof n;switch(i=arguments.length){case 1:c(n,g,this);break;case 2:d(n,g,this,arguments[1]);break;case 3:p(n,g,this,arguments[1],arguments[2]);break;case 4:f(n,g,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];h(n,g,this,r)}return!0},l.prototype.addListener=function(e,t){return g(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return g(this,e,t,!0)},l.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,y(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,y(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,i,r,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new s:(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new s,this;delete i[e]}else!function(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}(n,r);i.removeListener&&this.emit("removeListener",e,o||t)}return this},l.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new s,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new s:delete n[e]),this;if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new s,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},l.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},_e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];b(this,e),this._emitter=new l,this._emitter.off||(this._emitter.off=this._emitter.removeListener),this.mediaInfo=new he,this._instanceMap={},this._clsMap={},this._inited=!1,this.allowedEvents=t,this._hooks={}}return _e(e,[{key:"getInstance",value:function(e){return this._instanceMap[e]||null}},{key:"initInstance",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n[0],a=n[1],o=n[2],s=n[3];if(this._clsMap[e]){var l=new this._clsMap[e](r,a,o,s);return this._instanceMap[e]=l,l.init&&l.init(),l}throw new Error(e+"未在context中注册")}},{key:"init",value:function(e){if(!this._inited){for(var t in this._clsMap)this._clsMap.hasOwnProperty(t)&&!this._instanceMap[t]&&this.initInstance(t,e);this._inited=!0}}},{key:"registry",value:function(e,t){var n=this,i=this._emitter,r=this._isMessageNameValid.bind(this),a=this,o=function(t){function n(t,i,r){b(this,n);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":xe(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i,r));return o.listeners={},o.onceListeners={},o.TAG=e,o._context=a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":xe(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),_e(n,[{key:"on",value:function(t,n){return r(t),this.listeners[t]?this.listeners[t].push(n):this.listeners[t]=[n],i.on(t+"__TO__"+e,n),i.on(t,n)}},{key:"before",value:function(e,t){r(e),a._hooks[e]?a._hooks[e].push(t):a._hooks[e]=[t]}},{key:"once",value:function(t,n){return r(t),this.onceListeners[t]?this.onceListeners[t].push(n):this.onceListeners[t]=[n],i.once(t+"__TO__"+e,n),i.once(t,n)}},{key:"emit",value:function(e){r(e);for(var t=a._hooks?a._hooks[e]:null,n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];if(t)for(var l=0,u=t.length;l<u;l++)t[l].apply(void 0,o);return i.emit.apply(i,[e].concat(o))}},{key:"emitTo",value:function(e,t){r(t);for(var n=arguments.length,a=Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return i.emit.apply(i,[t+"__TO__"+e].concat(a))}},{key:"off",value:function(e,t){return r(e),i.off(e,t)}},{key:"removeListeners",value:function(){var t=Object.prototype.hasOwnProperty.bind(this.listeners);for(var n in this.listeners)if(t(n))for(var r=this.listeners[n]||[],a=0;a<r.length;a++){var o=r[a];i.off(n,o),i.off(n+"__TO__"+e,o)}for(var s in this.onceListeners)if(t(s))for(var l=this.onceListeners[s]||[],u=0;u<l.length;u++){var c=l[u];i.off(s,c),i.off(s+"__TO__"+e,c)}}},{key:"destroy",value:function(){if(this.removeListeners(),this.listeners={},delete a._instanceMap[e],we(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this))return we(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}(t);return this._clsMap[e]=o,function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return n.initInstance.apply(n,[e].concat(i))}}},{key:"seek",value:function(e){this._emitter.emit(z.PLAYER_EVENTS.SEEK,e)}},{key:"destroyInstances",value:function(){var e=this;Object.keys(this._instanceMap).forEach((function(t){e._instanceMap[t].destroy&&e._instanceMap[t].destroy()}))}},{key:"destroy",value:function(){this._emitter.removeAllListeners(),this._emitter=null,this.allowedEvents=[],this._clsMap=null,this._context=null,this._hooks=null,this.destroyInstances()}},{key:"_isMessageNameValid",value:function(e){if(!this.allowedEvents.indexOf(e)<0)throw new Error("unregistered message name: "+e)}}]),e}(),Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Te=z.CRYTO_EVENTS,Se=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.inputBuffer=t.inputbuffer,this.outputBuffer=t.outputbuffer,this.key=t.key,this.iv=t.iv,this.method=t.method,this.crypto=window.crypto||window.msCrypto}return Ee(e,[{key:"init",value:function(){this.on(Te.START_DECRYPT,this.decript.bind(this))}},{key:"decript",value:function(){var e=this;this.aeskey?this.decriptData():this.crypto.subtle.importKey("raw",this.key.buffer,{name:"AES-CBC"},!1,["encrypt","decrypt"]).then((function(t){e.aeskey=t,e.decriptData()}))}},{key:"decriptData",value:function(){var e=this,t=this._context.getInstance(this.inputBuffer),n=this._context.getInstance(this.outputBuffer),i=t.shift();i&&this.crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv.buffer},this.aeskey,i).then((function(t){n.push(new Uint8Array(t)),e.emit(Te.DECRYPTED),e.decriptData(i)}))}}]),e}(),Ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ae=z.MSE_EVENTS,De=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),n&&(this._context=n,this.emit=n._emitter.emit.bind(n._emitter)),this.TAG="MSE",this.configs=Object.assign({},t),this.container=this.configs.container,this.format=this.configs.format,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=this.configs.preloadTime||1,this.onSourceOpen=this.onSourceOpen.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onUpdateEnd=this.onUpdateEnd.bind(this),this.onWaiting=this.onWaiting.bind(this),this.opened=!1}return Ce(e,[{key:"init",value:function(){this.mediaSource=new self.MediaSource,this.mediaSource.addEventListener("sourceopen",this.onSourceOpen),this._url=null,this.container.addEventListener("timeupdate",this.onTimeUpdate),this.container.addEventListener("waiting",this.onWaiting)}},{key:"resetContext",value:function(t,n){if(this._context=t,this.emit=t._emitter.emit.bind(t._emitter),!n)for(var i=0;i<Object.keys(this.sourceBuffers).length;i++){var r=this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];r.updating||e.clearBuffer(r)}}},{key:"onTimeUpdate",value:function(){this.emit("TIME_UPDATE",this.container)}},{key:"onWaiting",value:function(){this.emit("WAITING",this.container)}},{key:"onSourceOpen",value:function(){this.opened=!0,this.addSourceBuffers()}},{key:"onUpdateEnd",value:function(){this.emit(Ae.SOURCE_UPDATE_END),this.doAppend()}},{key:"addSourceBuffers",value:function(){if(this.mediaSource&&"open"===this.mediaSource.readyState&&this.opened){var e=this._context.getInstance("PRE_SOURCE_BUFFER"),t=this._context.getInstance("TRACKS"),n=void 0;if(e&&t){e=e.sources;for(var i=!1,r=0,a=Object.keys(e).length;r<a;r++){var o=Object.keys(e)[r];i=!1,"audio"===o?n=t.audioTrack:"video"===o&&(n=t.videoTrack),n&&null!==e[o].init&&e[o].data.length&&(i=!0)}if(i){if(Object.keys(this.sourceBuffers).length>1)return;for(var s=0,l=Object.keys(e).length;s<l;s++){var u=Object.keys(e)[s];if(!this.sourceBuffers[u]){var c=e[u],d="video"===u?"video/mp4;codecs="+c.mimetype:"audio/mp4;codecs="+c.mimetype;try{var p=this.mediaSource.addSourceBuffer(d);this.sourceBuffers[u]=p,p.addEventListener("updateend",this.onUpdateEnd)}catch(e){if(22===e.code&&Object.keys(this.sourceBuffers).length>0)return this.emit(Ae.MSE_WRONG_TRACK_ADD,u);this.emit(Ae.MSE_ERROR,this.TAG,new Error(e.message))}}}Object.keys(this.sourceBuffers).length===this.sourceBufferLen&&this.doAppend()}}}}},{key:"doAppend",value:function(){if(this.mediaSource&&"closed"!==this.mediaSource.readyState){this._doCleanupSourceBuffer();var e=this._context.getInstance("PRE_SOURCE_BUFFER");if(e&&!(Object.keys(this.sourceBuffers).length<this.sourceBufferLen))for(var t=0;t<Object.keys(this.sourceBuffers).length;t++){var n=Object.keys(this.sourceBuffers)[t],i=this.sourceBuffers[n];if(!i.updating){var r=e.sources[n];if(this["no"+n])r.data=[],r.init.buffer=null;else if(r&&!r.inited)try{i.appendBuffer(r.init.buffer.buffer),r.inited=!0}catch(e){}else if(r){var a=r.data.shift();if(a)try{i.appendBuffer(a.buffer.buffer)}catch(e){r.data.unshift(a)}}}}}}},{key:"endOfStream",value:function(){if("open"===this.mediaSource.readyState)try{this.mediaSource.endOfStream()}catch(e){}}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{for(var n=0;n<Object.keys(this.sourceBuffers).length;n++){var i=this.sourceBuffers[Object.keys(this.sourceBuffers)[n]];i.updating||e>t&&i.remove(t,e)}}catch(e){}}},{key:"_doCleanupSourceBuffer",value:function(){for(var e=this.container.currentTime,t={video:[],audio:[]},n=0;n<Object.keys(this.sourceBuffers).length;n++){for(var i=Object.keys(this.sourceBuffers)[n],r=this.sourceBuffers[i],a=r.buffered,o=!1,s=0;s<a.length;s++){var l=a.start(s),u=a.end(s);if(l<=e&&e<u+3){if(e-l>=180){o=!0;var c=e-180;t[i].push({start:l,end:c})}}else u<e&&e-l>=180&&(o=!0,t[i].push({start:l,end:u}))}o&&!r.updating&&this._doRemoveRanges(t)}}},{key:"_doRemoveRanges",value:function(e){for(var t in e)if(this.sourceBuffers[t]&&!this.sourceBuffers[t].updating)for(var n=this.sourceBuffers[t],i=e[t];i.length&&!n.updating;){var r=i.shift();try{r&&r.end>r.start&&n.remove(r.start,r.end)}catch(e){}}}},{key:"cleanBuffers",value:function(){for(var t=this,n=[],i=0;i<Object.keys(this.sourceBuffers).length;i++)!function(i){var r,a=t.sourceBuffers[Object.keys(t.sourceBuffers)[i]];r=a.updating?new Promise((function(t){a.addEventListener("updateend",(function n(){var i=3;setTimeout((function n(){a.updating?i>0?(setTimeout(n,200),i--):t():(e.clearBuffer(a),a.addEventListener("updateend",(function(){t()})))}),200),a.removeEventListener("updateend",n)}))})):new Promise((function(t){e.clearBuffer(a),a.addEventListener("updateend",(function(){t()}))})),n.push(r)}(i);return Promise.all(n)}},{key:"removeBuffers",value:function(){for(var t=this,n=[],i=0;i<Object.keys(this.sourceBuffers).length;i++)!function(i){var r,a=t.sourceBuffers[Object.keys(t.sourceBuffers)[i]];a.removeEventListener("updateend",t.onUpdateEnd),r=a.updating?new Promise((function(t){a.addEventListener("updateend",(function n(){var i=3;setTimeout((function n(){a.updating?i>0?(setTimeout(n,200),i--):t():(e.clearBuffer(a),a.addEventListener("updateend",(function(){t()})))}),200),a.removeEventListener("updateend",n)}))})):new Promise((function(t){e.clearBuffer(a),a.addEventListener("updateend",(function(){t()}))})),n.push(r)}(i);return Promise.all(n)}},{key:"destroy",value:function(){var e=this;return this.container?(this.container.removeEventListener("timeupdate",this.onTimeUpdate),this.container.removeEventListener("waiting",this.onWaiting),this.mediaSource.removeEventListener("sourceopen",this.onSourceOpen),this.removeBuffers().then((function(){for(var t=Object.keys(e.sourceBuffers),n=0;n<t.length;n++){var i=e.sourceBuffers[t[n]];delete e.sourceBuffers[t[n]],"open"===e.mediaSource.readyState&&e.mediaSource.removeSourceBuffer(i)}e.endOfStream(),window.URL.revokeObjectURL(e.url),e.url=null,e.configs={},e.container=null,e.mediaSource=null,e.sourceBuffers={},e.preloadTime=1,e.onSourceOpen=null,e.onTimeUpdate=null,e.onUpdateEnd=null,e.onWaiting=null,e.noaudio=void 0,e.novideo=void 0}))):Promise.resolve()}},{key:"sourceBufferLen",get:function(){return this._context.mediaInfo?(!!this._context.mediaInfo.hasVideo&&!this.novideo)+(!!this._context.mediaInfo.hasAudio&&!this.noaudio):this.noaudio||this.novideo?1:2}},{key:"url",set:function(e){this._url=e},get:function(){return this._url||(this._url=window.URL.createObjectURL(this.mediaSource)),this._url}}],[{key:"clearBuffer",value:function(e){try{for(var t=e.buffered,n=.1,i=0,r=t.length;i<r;i++)n=t.end(i);e.remove(0,n)}catch(e){}}}]),e}(),Oe=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),Re={get device(){var e=Re.os;return e.isPc?"pc":e.isTablet?"tablet":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isAndroid:i,isPc:!o&&!i&&!n,isSymbian:n,isWindowsPhone:t,isFireFox:r}},get isLe(){return Oe}},Le=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Pe=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._lastSamplingBytes=0,this._now=Date.now}return Le(e,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._intervalBytes=0,this._lastSamplingBytes=0}},{key:"addBytes",value:function(e){var t=this._now()-this._lastCheckpoint;0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e):t<5e3?this._intervalBytes+=e:(this._lastSamplingBytes=this._intervalBytes/(t/1e3),this._intervalBytes=e,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024}},{key:"lastSamplingKBps",get:function(){return this.addBytes(0),0!==this._lastSamplingBytes?this._lastSamplingBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}}]),e}(),Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be="function"==typeof Symbol&&"symbol"===Me(Symbol.iterator)?function(e){return void 0===e?"undefined":Me(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":Me(e)},Ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ie=z.LOADER_EVENTS,je=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.configs=Object.assign({},t),this.url=null,this.status=0,this.error=null,this._reader=null,this._canceled=!1,this._destroyed=!1,this.readtype=this.configs.readtype,this.buffer=this.configs.buffer||"LOADER_BUFFER",this._loaderTaskNo=0,this._speed=new Pe,window.AbortController&&(this.abortControllerEnabled=!0)}return Ue(e,[{key:"init",value:function(){this.on(Ie.LADER_START,this.load.bind(this))}},{key:"fetch",value:function(e){function t(t,n,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){var i=this,r=null;return this.abortControllerEnabled&&(this.abortController=new window.AbortController),Object.assign(t,{signal:this.abortController?this.abortController.signal:void 0}),Promise.race([fetch(e,t),new Promise((function(e,t){r=setTimeout((function(){t({code:999,message:"fetch timeout"}),i.abortController&&i.abortController.abort()}),n||1e4)}))]).then((function(e){return r&&(clearTimeout(r),r=null),e}))}))},{key:"internalLoad",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!this._destroyed)return this.loading=!0,this.fetch(this.url,t).then((function(o){if(!r._destroyed&&r.emit(Ie.LOADER_RESPONSE_HEADERS,r.TAG,o.headers),o.ok)return r.status=o.status,Promise.resolve().then((function(){r._onFetchResponse(o)})),Promise.resolve(o);n-- >0?r._retryTimer=setTimeout((function(){return r.emit(Ie.LOADER_RETRY,r.TAG,{response:o,reason:"response not ok",retryTime:i-n}),r.internalLoad(e,t,n,i,a)}),a):(r.loading=!1,r.emit(Ie.LOADER_ERROR,r.TAG,{code:o.status||21,message:o.status+" ("+o.statusText+")"}))})).catch((function(o){if(r.loading=!1,!r._destroyed)if(n-- >0)r._retryTimer=setTimeout((function(){return r.emit(Ie.LOADER_RETRY,r.TAG,{error:o,reason:"fetch error",retryTime:i-n}),r.internalLoad(e,t,n,i,a)}),a);else{if(o&&"AbortError"===o.name)return;r.emit(Ie.LOADER_ERROR,r.TAG,Object.assign({code:21},o))}}))}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=arguments[3];n=void 0===n?3:n,this.url=e,this._canceled=!1;var r=this.getParams(t);return this.internalLoad(e,r,n,n,i)}},{key:"_onFetchResponse",value:function(e){var t=this,n=this,i=this._context.getInstance(this.buffer),r=++this._loaderTaskNo;if(!0===e.ok)switch(this.readtype){case 2:e.json().then((function(e){n.loading=!1,n._canceled||n._destroyed||(i?(i.push(e),n.emit(Ie.LOADER_COMPLETE,i)):n.emit(Ie.LOADER_COMPLETE,e))}));break;case 1:e.text().then((function(e){n.loading=!1,n._canceled||n._destroyed||(i?(i.push(e),n.emit(Ie.LOADER_COMPLETE,i)):n.emit(Ie.LOADER_COMPLETE,e))}));break;case 3:e.arrayBuffer().then((function(e){n.loading=!1,n._canceled||n._destroyed||(i?(i.push(new Uint8Array(e)),t._speed.addBytes(e.byteLength),n.emit(Ie.LOADER_COMPLETE,i)):n.emit(Ie.LOADER_COMPLETE,e))}));break;case 0:default:return this._onReader(e.body.getReader(),r)}}},{key:"_onReader",value:function(e,t){var n=this,i=this._context.getInstance(this.buffer);if(!i&&this._reader||this._destroyed)try{this._reader.cancel()}catch(e){}this._reader=e,!1!==this.loading&&(this._noDataTimer=setTimeout((function(){!1!==n.loading&&n.emit(Ie.LOADER_COMPLETE)}),3e3),this._reader&&this._reader.read().then((function(r){if(clearTimeout(n._noDataTimer),!n._canceled&&!n._destroyed)return r.done?(n.loading=!1,n.status=0,void Promise.resolve().then((function(){n.emit(Ie.LOADER_COMPLETE,i)}))):(i.push(r.value),n._speed.addBytes(r.value.byteLength),Promise.resolve().then((function(){n.emit(Ie.LOADER_DATALOADED,i)})),n._onReader(e,t));if(n._reader)try{n._reader.cancel()}catch(e){}})).catch((function(e){throw clearTimeout(n._noDataTimer),n.loading=!1,n.emit(Ie.LOADER_ERROR,n.TAG,e),e})))}},{key:"getParams",value:function(e){var t=Object.assign({},e),n=new Headers,i={method:"GET",headers:n,mode:"cors",cache:"default"};if("object"===Be(this.configs.headers)){var r=this.configs.headers;for(var a in r)r.hasOwnProperty(a)&&n.append(a,r[a])}if("object"===Be(t.headers)){var o=t.headers;for(var s in o)o.hasOwnProperty(s)&&n.append(s,o[s])}return!1===t.cors&&(i.mode="same-origin"),t.withCredentials&&(i.credentials="include"),i}},{key:"cancel",value:function(){if(this._reader){try{this._reader.cancel()}catch(e){}this._reader=null,this.loading=!1}clearTimeout(this._noDataTimer),this._canceled=!0,this.abortController&&this.abortController.abort()}},{key:"destroy",value:function(){this._destroyed=!0,clearTimeout(this._retryTimer),clearTimeout(this._noDataTimer),this.cancel(),this._speed.reset()}},{key:"currentSpeed",get:function(){return this._speed.lastSamplingKBps}}],[{key:"type",get:function(){return"loader"}}]),e}(),ze=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Fe=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{var n=/xgd=(\d)/.exec(document.cookie);this._status=!!n,this._level=n&&n[1]}catch(e){this._status=!1}["group","groupEnd","log","warn","error"].forEach((function(e){t[e]=function(n,i,r,a,o,s,l,u,c,d){var p;if(t._status){var f=n,h=[i,r,a,o,s,l,u,c,d].filter((function(e){return void 0!==e}));(p=console)[e].apply(p,["["+f+"]:"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(h)))}}}))}return ze(e,[{key:"enable",get:function(){return this._status}},{key:"long",get:function(){return"2"===this._level}}]),e}()),Ne=S,qe=ke,He=Se,Ve=De,Ge=Re,We=z,Ye=je,Xe=Fe,$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ke=We.LOADER_EVENTS,Ze=We.REMUX_EVENTS,Je=We.DEMUX_EVENTS,Qe=We.HLS_EVENTS,et=We.CRYTO_EVENTS,tt=We.MSE_EVENTS,nt=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,it=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.configs=Object.assign({},t),this.url="",this.baseurl="",this.sequence=0,this._playlist=null,this.retrytimes=this.configs.retrytimes||3,this.preloadTime=this.configs.preloadTime,this.container=this.configs.container,this._m3u8lasttime=0,this._timmer=setInterval(this._checkStatus.bind(this),300),this._lastCheck=0,this._player=this.configs.player,this.m3u8Text=null}return $e(e,[{key:"init",value:function(){var e=this._player.hlsOps,t=e.XgBuffer,n=e.Tracks,i=e.Playlist,r=e.PreSource,a=e.Compatibility,o=e.FetchLoader,s=e.TsDemuxer,l=e.Mp4Remuxer,u=e.Mse;this._context.registry("M3U8_BUFFER",t),this._context.registry("TS_BUFFER",t),this._context.registry("TRACKS",n),this._playlist=this._context.registry("PLAYLIST",i)({autoclear:!0}),this._context.registry("PRE_SOURCE_BUFFER",r),this._context.registry("COMPATIBILITY",a),this._m3u8loader=this._context.registry("M3U8_LOADER",o)({buffer:"M3U8_BUFFER",readtype:1}),this._tsloader=this._context.registry("TS_LOADER",o)({buffer:"TS_BUFFER",readtype:3}),this._context.registry("TS_DEMUXER",s)({inputbuffer:"TS_BUFFER"}),this._context.registry("MP4_REMUXER",l),this.mse=this._context.registry("MSE",u)({container:this.container}),this.initEvents()}},{key:"initEvents",value:function(){this.on(Ke.LOADER_COMPLETE,this._onLoadComplete.bind(this)),this.on(Ke.LOADER_RETRY,this._handleFetchRetry.bind(this)),this.on(Ze.INIT_SEGMENT,this.mse.addSourceBuffers.bind(this.mse)),this.on(Ze.MEDIA_SEGMENT,this.mse.doAppend.bind(this.mse)),this.on(Je.METADATA_PARSED,this._onMetadataParsed.bind(this)),this.on(Je.SEI_PARSED,this._handleSEIParsed.bind(this)),this.on(Je.DEMUX_COMPLETE,this._onDemuxComplete.bind(this)),this.on(Ke.LOADER_ERROR,this._onLoadError.bind(this)),this.on(Je.DEMUX_ERROR,this._onDemuxError.bind(this)),this.on(Ze.REMUX_ERROR,this._onRemuxError.bind(this)),this.on(tt.MSE_ERROR,this._handleMseError.bind(this))}},{key:"_onError",value:function(e,t,n,i){var r={code:n.code,errorType:e,errorDetails:"["+t+"]: "+(n?n.message:""),errorFatal:i};this._player.emit("HLS_ERROR",r)}},{key:"_onDemuxComplete",value:function(){this.emit(Ze.REMUX_MEDIA,"ts")}},{key:"_onMetadataParsed",value:function(e){"video"===e&&(this._context.mediaInfo.hasVideo=!0),"audio"===e&&(this._context.mediaInfo.hasAudio=!0),this.emit(Ze.REMUX_METADATA,e)}},{key:"_onLoadError",value:function(e,t){!this._tsloader.loading&&!this._m3u8loader.loading&&this.retrytimes>=1?(this.retrytimes--,this._onError(Ke.LOADER_ERROR,e,t,!1)):this.retrytimes<=1&&(this._player.emit("error",{code:t.code,errorType:"network",ex:"["+e+"]: "+t.message,errd:{}}),this._onError(Ke.LOADER_ERROR,e,t,!0),this.emit(Qe.RETRY_TIME_EXCEEDED),this.mse.endOfStream())}},{key:"_onDemuxError",value:function(e,t,n){void 0===n&&(n=!0),this._player.emit("error",{code:t.code,errorType:"network",ex:"["+e+"]: "+(t?t.message:""),errd:{}}),this._onError(Ke.LOADER_ERROR,e,t,n)}},{key:"_onRemuxError",value:function(e,t,n){void 0===n&&(n=!0),this._onError(Ze.REMUX_ERROR,e,t,n)}},{key:"_handleMseError",value:function(e,t,n){void 0===n&&(n=!1),this._onError(tt.MSE_ERROR,e,t,n)}},{key:"_handleSEIParsed",value:function(e){this._player.emit("SEI_PARSED",e)}},{key:"_onLoadComplete",value:function(e){if("M3U8_BUFFER"===e.TAG){var t=void 0;try{this.m3u8Text=e.shift();var n=nt.exec(this.m3u8Text);n&&n[2]?this.load(n[2]):t=this._player.hlsOps.M3U8Parser.parse(this.m3u8Text,this.baseurl)}catch(e){this._onError("M3U8_PARSER_ERROR","M3U8_PARSER",e,!1)}if(!t)return void(this.retrytimes>0?(this.retrytimes--,this._preload()):(this.emit(Qe.RETRY_TIME_EXCEEDED),this.mse.endOfStream()));try{this._playlist.pushM3U8(t,!0)}catch(e){this._onError("M3U8_PARSER_ERROR","PLAYLIST",e,!1)}if(this._playlist.encrypt&&this._playlist.encrypt.uri&&!this._playlist.encrypt.key){var i=this._player.hlsOps.XgBuffer;this._context.registry("DECRYPT_BUFFER",i)(),this._context.registry("KEY_BUFFER",i)(),this._tsloader.buffer="DECRYPT_BUFFER",this._keyLoader=this._context.registry("KEY_LOADER",Ye)({buffer:"KEY_BUFFER",readtype:3});var r=this._player.config.retry||{},a=r.count,o=r.delay;this.emitTo("KEY_LOADER",Ke.LADER_START,this._playlist.encrypt.uri,{},a,o)}else this._m3u8Loaded(t)}else"TS_BUFFER"===e.TAG?(this.retrytimes=this.configs.retrytimes||3,this._playlist.downloaded(this._tsloader.url,!0),this.emit(Je.DEMUX_START)):"DECRYPT_BUFFER"===e.TAG?(this.retrytimes=this.configs.retrytimes||3,this._playlist.downloaded(this._tsloader.url,!0),this.emitTo("CRYPTO",et.START_DECRYPT)):"KEY_BUFFER"===e.TAG&&(this.retrytimes=this.configs.retrytimes||3,this._playlist.encrypt.key=e.shift(),this._crypto=this._context.registry("CRYPTO",He)({key:this._playlist.encrypt.key,iv:this._playlist.encrypt.ivb,method:this._playlist.encrypt.method,inputbuffer:"DECRYPT_BUFFER",outputbuffer:"TS_BUFFER"}),this._crypto.on(et.DECRYPTED,this._onDcripted.bind(this)))}},{key:"_handleFetchRetry",value:function(e,t){this._player.emit("retry",Object.assign({tag:e},t))}},{key:"_onDcripted",value:function(){this.emit(Je.DEMUX_START)}},{key:"_m3u8Loaded",value:function(e){this.preloadTime||(this.preloadTime=this._playlist.targetduration?this._playlist.targetduration:5),this._playlist.fragLength>0&&this._playlist.sequence<e.sequence?this.retrytimes=this.configs.retrytimes||3:this.retrytimes>0?(this.retrytimes--,this._preload()):(this.emit(Qe.RETRY_TIME_EXCEEDED),this.mse.endOfStream())}},{key:"_checkStatus",value:function(){if(!(this.retrytimes<1&&Date.now()-this._lastCheck<4e3))if(this.retrytimes<1&&clearInterval(this._timmer),this._lastCheck=(new Date).getTime(),this.container.buffered.length<1)this._preload();else{var e=this.container.currentTime,t=this.container.buffered.start(this.container.buffered.length-1);this.container.readyState<=2&&(e<t?(this.container.currentTime=t,e=t):this._preload());var n=this.container.buffered.end(this.container.buffered.length-1);e<n-2*this.preloadTime&&(this.container.currentTime=n-this.preloadTime),e>n-this.preloadTime&&this._preload()}}},{key:"_preload",value:function(){if(!this._tsloader.loading&&!this._m3u8loader.loading){var e=this._playlist.getTs(),t=this._player.config.retry||{},n=t.count,i=t.delay;if(!e||e.downloaded||e.downloading){var r=this.preloadTime?this.preloadTime:0,a=(new Date).getTime();(!e||e.downloaded)&&(a-this._m3u8lasttime)/1e3>r&&(this._m3u8lasttime=a,this.emitTo("M3U8_LOADER",Ke.LADER_START,this.url,{},n,i))}else this._playlist.downloading(e.url,!0),this.emitTo("TS_LOADER",Ke.LADER_START,e.url,{},n,i)}}},{key:"load",value:function(e){this.baseurl=this._player.hlsOps.M3U8Parser.parseURL(e),this.url=e,this._preload()}},{key:"destroy",value:function(){clearInterval(this._timmer),this.off(Ke.LOADER_COMPLETE,this._onLoadComplete),this.off(Ze.INIT_SEGMENT,this.mse.addSourceBuffers),this.off(Ze.MEDIA_SEGMENT,this.mse.doAppend),this.off(Je.METADATA_PARSED,this._onMetadataParsed),this.off(Je.DEMUX_COMPLETE,this._onDemuxComplete),this.mse=null,this.m3u8Text=null}}]),e}(),rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return rt(e,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}(),ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return ot(e,null,[{key:"isHeader",value:function(t,n){return!!(n+1<t.length&&e.isHeaderPattern(t,n))}},{key:"getFrameDuration",value:function(e){return 9216e4/e}},{key:"isHeaderPattern",value:function(e,t){return 255===e[t]&&240==(246&e[t+1])}},{key:"getHeaderLength",value:function(e,t){return 1&e[t+1]?7:9}},{key:"getFullFrameLength",value:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}},{key:"parseFrameHeader",value:function(t,n,i,r,a){var o,s=void 0,l=t.length;if(o=e.getHeaderLength(t,n),s=e.getFullFrameLength(t,n),(s-=o)>0&&n+o+s<=l)return{headerLength:o,frameLength:s,stamp:i+r*a}}},{key:"appendFrame",value:function(t,n,i,r,a){var o=e.getFrameDuration(t.meta.sampleRate),s=e.parseFrameHeader(n,i,r,a,o);if(s){var l=s.stamp,u=s.headerLength,c=s.frameLength;return{sample:{unit:n.subarray(i+u,i+u+c),pts:l,dts:l},length:c+u}}}}]),e}(),lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ut=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return lt(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){var t=Math.min(this._currentWordBitsLeft,e),n=this._currentWord>>>32-t;if(e>32)throw new Error("Cannot read more than 32 bits at a time");return this._currentWordBitsLeft-=t,this._currentWordBitsLeft>0?this._currentWord<<=t:this._totalBytes-this._bufferIndex>0&&this._fillCurrentWord(),(t=e-t)>0&&this._currentWordBitsLeft?n<<t|this.readBits(t):n}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}},{key:"readSliceType",value:function(){return this.readByte(),this.readUEG(),this.readUEG()}}]),e}(),ct=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return ct(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),i=new ut(n);i.readByte();var r=i.readByte();i.readByte();var a=i.readByte();i.readUEG();var o=e.getProfileString(r),s=e.getLevelString(a),l=1,u=420,c=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(l=i.readUEG())&&i.readBits(1),l<=3&&(u=[0,420,422,444][l]),c=i.readUEG()+8,i.readUEG(),i.readBits(1),i.readBool()))for(var d=3!==l?8:12,p=0;p<d;p++)i.readBool()&&(p<6?e._skipScalingList(i,16):e._skipScalingList(i,64));i.readUEG();var f=i.readUEG();if(0===f)i.readUEG();else if(1===f){i.readBits(1),i.readSEG(),i.readSEG();for(var h=i.readUEG(),g=0;g<h;g++)i.readSEG()}i.readUEG(),i.readBits(1);var y=i.readUEG(),m=i.readUEG(),v=i.readBits(1);0===v&&i.readBits(1),i.readBits(1);var b=0,x=0,w=0,_=0;i.readBool()&&(b=i.readUEG(),x=i.readUEG(),w=i.readUEG(),_=i.readUEG());var k=1,E=1,T=0,S=!0,C=0,A=0;if(i.readBool()){if(i.readBool()){var D=i.readByte();D>0&&D<16?(k=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][D-1],E=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][D-1]):255===D&&(k=i.readByte()<<8|i.readByte(),E=i.readByte()<<8|i.readByte())}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){var O=i.readBits(32),R=i.readBits(32);S=i.readBool(),T=(C=R)/(A=2*O)}}var L=1;1===k&&1===E||(L=k/E);var P=0,M=0;0===l?(P=1,M=2-v):(P=3===l?1:2,M=(1===l?2:1)*(2-v));var B=16*(y+1),U=16*(m+1)*(2-v);B-=(b+x)*P,U-=(w+_)*M;var I=Math.ceil(B*L);return i.destroy(),i=null,{profile_string:o,level_string:s,bit_depth:c,chroma_format:u,chroma_format_string:e.getChromaFormatString(u),frame_rate:{fixed:S,fps:T,fps_den:A,fps_num:C},par_ratio:{width:k,height:E},codec_size:{width:B,height:U},present_size:{width:I,height:U}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+e.readSEG()+256)%256),n=0===i?n:i}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;var n=t.frameRate.fps_den,i=t.frameRate.fps_num;return t.refSampleDuration=Math.floor(t.timescale*(n/i)),t}}]),e}(),pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return pt(e,null,[{key:"EBSP2RBSP",value:function(e){return e.filter((function(t,n){return n<2||!(0===e[n-2]&&0===e[n-1]&&3===t)}))}},{key:"EBSP2SODB",value:function(e){var t=e[e.byteLength-1];return t&&128===t?e.slice(0,e.byteLength-1):e}}]),e}(),ht=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),gt=function(e){for(var t="",n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return t},yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return ht(e,null,[{key:"_resolveNalu",value:function(e){return e.length>=1?ft.EBSP2SODB(ft.EBSP2RBSP(e.slice(1))):null}},{key:"parse",value:function(t){var n=e._resolveNalu(t),i=e.switchPayloadType(n),r=i.payloadType,a=i.offset,o=n.slice(a);switch(r){case 5:return e.user_data_unregistered(o);default:return{code:r,content:o}}}},{key:"switchPayloadType",value:function(e){for(var t=new DataView(e.buffer),n=0,i=0;255===t.getUint8(i);)i++,n+=255;return{payloadType:n+=t.getUint8(i++),offset:i}}},{key:"getPayloadLength",value:function(e){for(var t=new DataView(e.buffer),n=0,i=0;255===t.getUint8(i);)i++,n+=255;return{payloadLength:n+=t.getUint8(i++),offset:i}}},{key:"user_data_unregistered",value:function(t){var n=e.getPayloadLength(t),i=n.payloadLength,r=n.offset;if(i<16)return{uuid:"",content:null};var a=t.slice(r);return{code:5,uuid:gt(a.slice(0,16)),content:gt(a.slice(16,i))}}}]),e}(),mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return mt(e,null,[{key:"getNalunits",value:function(t){if(t.length-t.position<4)return[];var n=t.dataview,i=t.position;return 1===n.getInt32(i)||0===n.getInt16(i)&&1===n.getInt8(i+2)?e.getAnnexbNals(t):e.getAvccNals(t)}},{key:"getAnnexbNals",value:function(t){for(var n=[],i=e.getHeaderPositionAnnexB(t),r=i.pos,a=r;r<t.length-4;){var o=t.buffer.slice(r,r+i.headerLength);i.pos===t.position&&t.skip(i.headerLength),a=(i=e.getHeaderPositionAnnexB(t)).pos;var s={header:o,body:new Uint8Array(t.buffer.slice(r+o.byteLength,a))};e.analyseNal(s),s.type<=9&&0!==s.type&&n.push(s),t.skip(a-t.position),r=a}return n}},{key:"getAvccNals",value:function(t){for(var n=[];t.position<t.length-4;){var i=t.dataview.getInt32(t.dataview.position);if(!(t.length-t.position>=i))break;var r=t.buffer.slice(t.position,t.position+4);t.skip(4);var a=new Uint8Array(t.buffer.slice(t.position,t.position+i));t.skip(i);var o={header:r,body:a};e.analyseNal(o),o.type<=9&&0!==o.type&&n.push(o)}return n}},{key:"analyseNal",value:function(e){var t=31&e.body[0];switch(e.type=t,t){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:try{e.sei=yt.parse(e.body)}catch(e){}break;case 7:e.sps=dt.parseSPS(e.body);break;case 8:e.pps=!0}}},{key:"getHeaderPositionAnnexB",value:function(e){for(var t=e.position,n=0,i=e.length;3!==n&&4!==n&&t<i-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===i-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:t=i:(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=i)),{pos:t,headerLength:n}}},{key:"getAvcc",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;var i=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),i),i+=2,n.set(e,i),n[i+=e.byteLength]=1,i++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),i),i+=2,n.set(t,i),n}}]),e}(),bt=dt,xt=vt,wt=yt,_t=ut,kt=Object.freeze({__proto__:null,SpsParser:bt,NalUnit:xt,SEIParser:wt,Golomb:_t}),Et=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Tt=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return Et(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){var t=Math.min(this._currentWordBitsLeft,e),n=this._currentWord>>>32-t;if(e>32)throw new Error("Cannot read more than 32 bits at a time");return this._currentWordBitsLeft-=t,this._currentWordBitsLeft>0?this._currentWord<<=t:this._totalBytes-this._bufferIndex>0&&this._fillCurrentWord(),(t=e-t)>0&&this._currentWordBitsLeft?n<<t|this.readBits(t):n}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){if(0===this._currentWordBitsLeft)return 0;var e=void 0;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}(),St=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return St(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)}},{key:"parseSPS",value:function(t){var n,i,r,a,o,s,l=e._ebsp2rbsp(t),u=new Tt(l),c=0,d=0,p=0,f=0,h=0,g=0,y=0,m=0,v=0;return u.readByte(),u.readByte(),u.readBits(4),n=u.readBits(3),u.readBits(1),s=e._readProfileTierLevel(u,n),u.readUEG(),3===(i=u.readUEG())&&(c=u.readBits(1)),d=u.readUEG(),p=u.readUEG(),1===(r=u.readBits(1))&&(f=u.readUEG(),h=u.readUEG(),g=u.readUEG(),y=u.readUEG()),a=u.readUEG(),o=u.readUEG(),1===r&&(d-=(m=1!==i&&2!==i||0!==c?1:2)*h+m*f,p-=(v=1===i&&0===c?2:1)*y+v*g),u.destroy(),u=null,{width:d,height:p,general_profile_space:s.general_profile_space,general_tier_flag:s.general_tier_flag,general_profile_idc:s.general_profile_idc,general_level_idc:s.general_level_idc,chromaFormatIdc:i,bitDepthLumaMinus8:a,bitDepthChromaMinus8:o}}},{key:"_readProfileTierLevel",value:function(e,t){var n,i,r,a;n=e.readBits(2)||0,i=e.readBits(1)||0,r=e.readBits(5)||0,e.readBits(16),e.readBits(16),e.readBits(1),e.readBits(1),e.readBits(1),e.readBits(1),e.readBits(16),e.readBits(16),e.readBits(12),a=e.readBits(8)||0;for(var o=[],s=[],l=0;l<t;l++)o[l]=e.readBits(1),s[l]=e.readBits(1);t>0&&e.readBits(2*(8-t));for(var u=0;u<t;u++)0!==o[u]&&(e.readBits(2),e.readBits(1),e.readBits(5),e.readBits(16),e.readBits(16),e.readBits(4),e.readBits(16),e.readBits(16),e.readBits(12)),0!==s[u]&&e.readBits(8);return{general_profile_space:n,general_tier_flag:i,general_profile_idc:r,general_level_idc:a}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+e.readSEG()+256)%256),n=0===i?n:i}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};return e&&e.codec_size?(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height):e.width&&e.height&&(t.codecWidth=e.width,t.codecHeight=e.height,t.presentWidth=e.width,t.presentHeight=e.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t}}]),e}(),At=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return At(e,null,[{key:"EBSP2RBSP",value:function(e){return e.filter((function(t,n){return n<2||!(0===e[n-2]&&0===e[n-1]&&3===t)}))}},{key:"EBSP2SODB",value:function(e){var t=e[e.byteLength-1];return t&&128===t?e.slice(0,e.byteLength-1):e}}]),e}(),Ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Rt=function(e){for(var t="",n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return t},Lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Ot(e,null,[{key:"_resolveNalu",value:function(e){return e.length>=1?Dt.EBSP2SODB(Dt.EBSP2RBSP(e.slice(1))):null}},{key:"parse",value:function(t){var n=e._resolveNalu(t),i=e.switchPayloadType(n),r=i.payloadType,a=i.offset,o=n.slice(a);switch(r){case 5:return e.user_data_unregistered(o);default:return{code:r,content:o}}}},{key:"switchPayloadType",value:function(e){for(var t=new DataView(e.buffer),n=0,i=0;255===t.getUint8(i);)i++,n+=255;return{payloadType:n+=t.getUint8(i++),offset:i}}},{key:"getPayloadLength",value:function(e){for(var t=new DataView(e.buffer),n=0,i=0;255===t.getUint8(i);)i++,n+=255;return{payloadLength:n+=t.getUint8(i++),offset:i}}},{key:"user_data_unregistered",value:function(t){var n=e.getPayloadLength(t),i=n.payloadLength,r=n.offset;if(i<16)return{uuid:"",content:null};var a=t.slice(r);return{code:5,uuid:Rt(a.slice(0,16)),content:Rt(a.slice(16,i))}}}]),e}(),Pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Pt(e,null,[{key:"getNalunits",value:function(t){if(t.length-t.position<4)return[];var n=t.dataview,i=t.position;return 1===n.getInt32(i)||0===n.getInt16(i)&&1===n.getInt8(i+2)?e.getAnnexbNals(t):e.getHvccNals(t)}},{key:"getAnnexbNals",value:function(t){for(var n=[],i=e.getHeaderPositionAnnexB(t),r=i.pos,a=r;r<t.length-4;){var o=t.buffer.slice(r,r+i.headerLength);i.pos===t.position&&t.skip(i.headerLength),a=(i=e.getHeaderPositionAnnexB(t)).pos;var s={header:o,body:new Uint8Array(t.buffer.slice(r+o.byteLength,a))};e.analyseNal(s),s.type<=40&&n.push(s),t.skip(a-t.position),r=a}return n}},{key:"getHvccNals",value:function(t){for(var n=[];t.position<t.length-4;){var i=t.dataview.getInt32(t.dataview.position);if(!(t.length-t.position>=i))break;var r=t.buffer.slice(t.position,t.position+4);t.skip(4);var a=new Uint8Array(t.buffer.slice(t.position,t.position+i));t.skip(i);var o={header:r,body:a};try{e.analyseNal(o)}catch(e){continue}o.type<=40&&n.push(o)}return n}},{key:"analyseNal",value:function(e){var t=e.body[0]>>>1&63;switch(e.type=t,t){case 0:e.slice_trail_n=!0;break;case 1:e.slice_trail_r=!0,e.key=!0;break;case 2:e.slice_tsa_n=!0;break;case 3:e.slice_tsa_r=!0,e.key=!0;break;case 4:e.slice_stsa_n=!0;break;case 5:e.slice_stsa_r=!0,e.key=!0;break;case 6:e.slice_radl_n=!0;break;case 7:e.slice_radl_r=!0,e.key=!0;break;case 8:e.slice_rasl_n=!0;break;case 9:e.slice_rasl_r=!0,e.key=!0;break;case 16:e.slice_bla_w_lp=!0;break;case 17:e.slice_bla_w_radl=!0;break;case 18:e.slice_bla_n_lp=!0;break;case 19:e.slice_idl_w_radl=!0,e.key=!0;break;case 20:e.slice_idr_n_lp=!0,e.key=!0;break;case 21:e.slice_cra_nut=!0,e.key=!0;break;case 32:e.vps=!0;break;case 33:e.sps=Ct.parseSPS(e.body);break;case 34:e.pps=!0;break;case 35:break;case 36:e.aud=!0;break;case 37:e.eob=!0;break;case 38:e.fd=!0;break;case 39:try{e.sei=Lt.parse(e.body.slice(1))}catch(e){}break;case 40:e.sei=Lt.parse(e.body.slice(1))}}},{key:"getHeaderPositionAnnexB",value:function(e){for(var t=e.position,n=0,i=e.length;3!==n&&4!==n&&t<i-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===i-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)&&(n=4):(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=i)),{pos:t,headerLength:n}}}]),e}(),Bt=Ct,Ut=Mt,It=Object.freeze({__proto__:null,SpsParserHEVC:Bt,NalUnitHEVC:Ut}),jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),zt=We.REMUX_EVENTS,Ft=Ne.caculate,Nt=st,qt=kt,Ht=It,Vt=function(){function e(){var t=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TAG="Compatibility",this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[],this._lastSegmentId=0,this._currentSegmentId=0,this.videoLastSample=null,this.audioLastSample=null,Object.defineProperties(this,{_videoLargeGap:{set:function(e){t.___videoLargeGap=e,0!==e&&t.emit(zt.DETECT_LARGE_GAP,"video",e)},get:function(){return t.___videoLargeGap||0}},_audioLargeGap:{set:function(e){t.___audioLargeGap=e,0!==e&&t.emit(zt.DETECT_LARGE_GAP,"audio",e)},get:function(){return t.___audioLargeGap||0}}}),this.audioUnsyncTime=0}return jt(e,[{key:"init",value:function(){this.before(zt.REMUX_MEDIA,this.doFix.bind(this))}},{key:"reset",value:function(){this.nextAudioDts=null,this.nextVideoDts=null,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this._audioLargeGap=0,this._videoLargeGap=0,this.videoLastSample=null,this.audioLastSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[],this.audioUnsyncTime=0}},{key:"_isSegmentsContinuous",value:function(){return this._currentSegmentId-this._lastSegmentId==1}},{key:"doFix",value:function(){var t=void 0,n=void 0,i=void 0;this.videoTrack.samples.length&&(t=(n=this.videoTrack.samples[0]).options,Xe.long&&Xe.log(this.TAG,this.videoTrack.samples.slice())),this.audioTrack.samples.length&&(i=this.audioTrack.samples[0],Xe.long&&Xe.log(this.TAG,this.audioTrack.samples.slice())),this._currentSegmentId=t&&t.id||this._currentSegmentId+1,Xe.log(this.TAG,"lastSeg:"+this._lastSegmentId+" , currentSeg:"+this._currentSegmentId+", discontinue:"+(t&&t.discontinue)+" vSamp0:"+(n&&n.dts)+" aSamp0:"+(i&&i.dts));var r=this.getFirstSample(),a=r.isFirstAudioSamples,o=r.isFirstVideoSamples;this.recordSamplesCount(),this._firstVideoSample&&this.fixVideoRefSampleDuration(this.videoTrack.meta,this.videoTrack.samples);var s=e.detectChangeStream(this.videoTrack.samples,o),l=s.changed,u=s.changedIdxes;if(l){for(var c=!1,d=0;d<u.length;d++)this.fixChangeStreamVideo(u[d],o)&&(c=!0);c||this.doFixVideo(o)}else!this._isSegmentsContinuous()&&t&&void 0!==t.start?(Xe.log(this.TAG,"fix video for _isSegmentsContinuous()"),this.videoLastSample=null,this.doFixVideo(o,t.start),this.emit(zt.DETECT_FRAG_ID_DISCONTINUE,t.start/1e3)):this.doFixVideo(o);var p=e.detectChangeStream(this.audioTrack.samples,a),f=p.changed,h=p.changedIdxes;if(f){for(var g=!1,y=0;y<h.length;y++)this.fixChangeStreamAudio(h[y],a)&&(g=!0);if(g)return;this.doFixAudio(a)}else!this._isSegmentsContinuous()&&t&&void 0!==t.start?(Xe.log(this.TAG,"fix audio for _isSegmentsContinuous()"),this.nextAudioDts=null,this.doFixAudio(a,t.start),this.emit(zt.DETECT_FRAG_ID_DISCONTINUE,t.start/1e3)):this.doFixAudio(a);this.removeInvalidSamples(),this._lastSegmentId=this._currentSegmentId}},{key:"doFixVideo",value:function(t,n){for(var i=this.videoTrack,r=i.samples,a=i.meta,o=r.length,s=0;s<o;s++){var l=r[s];l.originDts=l.dts,l.originPts=l.pts}if(r&&o&&this._firstVideoSample){var u=r[0];if(Xe.log(this.TAG,"doFixVideo:: lastVideoDts: "+this.lastVideoDts+" ,  _videoLargeGap: "+this._videoLargeGap+" ,streamChangeStart:"+n+", lastVideoSample:[dts="+(this.videoLastSample&&this.videoLastSample.dts)+" , pts="+(this.videoLastSample&&this.videoLastSample.pts)+"] ,  firstDTS:"+u.dts+" ,firstPTS:"+u.pts+" ,lastDTS:"+r[o-1].dts+" , lastPTS: "+r[o-1].pts),!t&&null===this.videoLastSample&&u.options&&u.options.start&&void 0!==n&&(n=u.options.start),!t&&void 0===n&&this.videoLastSample&&e.detectVideoLargeGap(this.videoLastSample?this.videoLastSample.dts:0,u.dts+this._videoLargeGap)&&(this._videoLargeGap=this.videoLastSample.dts+a.refSampleDuration-u.dts),0!==this._videoLargeGap&&(e.doFixLargeGap(r,this._videoLargeGap),this._videoLargeGap!==this.preVideoGap&&(this.preVideoGap=this._videoLargeGap,this.emit(zt.DETECT_CHANGE_STREAM_DISCONTINUE,"video",{prevDts:this.videoLastSample&&this.videoLastSample.originDts,curDts:u.originDts}))),t||void 0===n||(this._videoLargeGap=n-u.dts,e.doFixLargeGap(r,this._videoLargeGap)),t&&this._firstAudioSample){var c=this._firstVideoSample.originDts,d=c-(this._firstAudioSample.originDts||this._firstAudioSample.dts);if(d>2*a.refSampleDuration&&d<10*a.refSampleDuration){for(var p=Math.floor(d/a.refSampleDuration),f=0;f<p;f++){var h=Object.assign({},u);h.dts=c-(f+1)*a.refSampleDuration,h.pts=h.dts+h.cts,r.unshift(h),this.filledVideoSamples.push({dts:h.dts,size:h.data.byteLength})}this._firstVideoSample=this.filledVideoSamples[0]||this._firstVideoSample}else Math.abs(d)>2*a.refSampleDuration&&!this._videoLargeGap&&(this._videoLargeGap=-1*d,e.doFixLargeGap(r,-1*d))}for(var g=r.length,y=1;y<g;y++){var m=r[y],v=r[y-1],b=m.dts-m.pts;Math.abs(b)<2e3&&Math.abs(m.dts-v.dts)>1e4&&(m.dts=v.dts+a.refSampleDuration,m.pts=v.pts+a.refSampleDuration)}var x=r.pop();if(r.length&&(r[r.length-1].duration=x.dts-r[r.length-1].dts),g<4){var w=r[r.length-1],_=(w=w||x).options&&w.options.duration,k=a.refSampleDuration;if(_&&k&&_/k>5)for(var E=w.pts,T=w.dts,S=0;S<3;S++){T+=k,E+=k;var C=Object.assign({},w,{dts:T,pts:E});2===S&&(C.duration=_),r.push(C)}x=null}if(this.videoLastSample){var A=this.videoLastSample;A.duration=u.dts-A.dts,r.unshift(this.videoLastSample)}this.videoLastSample=x,r[r.length-1]&&(this.lastVideoDts=r[r.length-1].dts),this.videoTrack.samples=r}}},{key:"doFixAudio",value:function(t,n){var i=this,r=this.audioTrack,a=r.samples,o=r.meta;if(a&&a.length){this.fixAudioRefSampleDuration(o);for(var s=0,l=a.length;s<l;s++){var u=a[s];u.originDts=u.dts}var c=a.length,d=at.getSilentFrame(o.codec,o.channelCount),p=Math.floor(o.refSampleDuration),f=this._firstAudioSample,h=a[0];if(Xe.log(this.TAG,"doFixAudio:: audioDtsBase:"+this.audioDtsBase+" ,  _audioLargeGap: "+this._audioLargeGap+", streamChangeStart:"+n+" ,  nextAudioDts:"+this.nextAudioDts+",  audio: firstDTS:"+h.dts+" ,firstPTS:"+h.pts+" ,lastDTS:"+a[c-1].dts+" , lastPTS: "+a[c-1].pts),!t&&null===this.nextAudioDts&&h.options&&h.options.start&&void 0!==n&&(n=h.options.start),!t&&void 0===n&&this.nextAudioDts&&e.detectAudioLargeGap(this.nextAudioDts||0,h.dts+this._audioLargeGap)){var g=this.nextAudioDts-h.dts;this._audioLargeGap=Math.abs(g-this._videoLargeGap)<200?this._videoLargeGap:g}if(0!==this._audioLargeGap?(e.doFixLargeGap(a,this._audioLargeGap),this._audioLargeGap!==this.preAudioGap&&(this.preAudioGap=this._audioLargeGap,this.emit(zt.DETECT_CHANGE_STREAM_DISCONTINUE,"audio",{prevDts:this.lastAudioOriginDts,curDts:h.originDts}))):t||void 0===n&&!e.detectAudioLargeGap(this.nextAudioDts,h.dts)||(void 0!==n&&(this.nextAudioDts=n),this._audioLargeGap=this.nextAudioDts-h.dts,h.options.start&&!h.options.start.isContinue&&e.doFixLargeGap(a,this._audioLargeGap)),this._firstVideoSample&&t){var y=this._firstVideoSample.originDts||this._firstVideoSample.dts,m=f.dts-y;if(m===this._videoLargeGap);else if(m>o.refSampleDuration&&m<10*o.refSampleDuration){for(var v=Math.floor((f.dts-y)/o.refSampleDuration),b=0;b<v;b++){var x={data:d,datasize:d.byteLength,dts:f.dts-(b+1)*o.refSampleDuration,filtered:0};a.unshift(x),this.filledAudioSamples.push({dts:x.dts,size:x.data.byteLength})}this._firstAudioSample=this.filledAudioSamples[0]||this._firstAudioSample}else m<-1*o.refSampleDuration&&(this._audioLargeGap=-1*m,e.doFixLargeGap(a,-1*m))}var w=void 0,_=a[0].dts;if(this.nextAudioDts){w=_-this.nextAudioDts;var k=Math.abs(w);if(w>=p&&w<1e4&&d){for(var E=Math.ceil(w/p),T=0;T<E;T++){var S=_-(T+1)*p,C={dts:S>this.nextAudioDts?S:this.nextAudioDts,pts:S>this.nextAudioDts?S:this.nextAudioDts,datasize:d.byteLength,filtered:0,data:d};this.filledAudioSamples.push({dts:C.dts,size:C.data.byteLength}),this.audioTrack.samples.unshift(C),h=C}this.emit(zt.DETECT_AUDIO_GAP,w,E)}else k<o.refSampleDuration&&k>0?(h.dts=this.nextAudioDts,h.pts=this.nextAudioDts):w<0&&k<p&&(e.doFixLargeGap(a,-1*w),this.emit(zt.DETECT_AUDIO_OVERLAP,w))}for(var A=a[0].dts+p,D=1;D<a.length;){var O=a[D],R=O.dts-A;if(R<=-1*p)Xe.warn("drop 1 audio sample for "+R+" ms overlap"),a.splice(D,1);else if(R>=10*p){var L=Math.round(R/p);if(L>1e3)break;Xe.warn(this.TAG,"inject "+L+" audio frame for "+R+" ms gap");for(var P=0;P<L;P++){var M={data:d,datasize:d.byteLength,dts:A,originDts:A,filtered:0};a.splice(D,0,M),A+=p,D++}O.dts=O.pts=O.originDts=A,A+=p,D++}else O.dts=O.pts=O.originDts=A,A+=p,D++}var B=o.refSampleDuration-p;a.forEach((function(e,t){if(0!==t){var n=a[t-1];e.dts=e.pts=n.dts+n.duration}e.duration=p,i.audioUnsyncTime=Ft.fixedFloat(i.audioUnsyncTime+B,2),i.audioUnsyncTime>=1&&(e.duration+=1,i.audioUnsyncTime-=1)}));var U=a[a.length-1];this.lastAudioDts=U.dts;var I=U.duration;this.lastAudioSamplesLen=c,this.nextAudioDts=this.lastAudioDts+(I||p),this.lastAudioOriginDts=U.originDts,this.audioTrack.samples=e.sortAudioSamples(a)}}},{key:"fixChangeStreamVideo",value:function(e){Xe.log(this.TAG,"fixChangeStreamVideo(), changeIdx=",e);var t=this.videoTrack.samples,n=0===e?this.lastVideoDts?this.lastVideoDts:this.getStreamChangeStart(t[0]):t[e-1].dts,i=t[e].dts,r=Math.abs(n-i)<=1e4;if(this.emit(zt.DETECT_CHANGE_STREAM,"video",i),r)return t[e].options?t[e].options.isContinue=!0:t[e].options={isContinue:!0},!1;this.emit(zt.DETECT_CHANGE_STREAM_DISCONTINUE,"video",{prevDts:n,curDts:i});var a,o=t.slice(0,e),s=t.slice(e),l=t[e];return this._videoLargeGap=0,this.videoLastSample=null,this.lastVideoDts=null,a=l.options&&void 0!==l.options.start?l.options.start:n-this.videoDtsBase,this.videoTrack.samples=t.slice(0,e),this.doFixVideo(!1),this.videoTrack.samples=t.slice(e),this.doFixVideo(!1,a),this.videoTrack.samples=o.concat(s),!0}},{key:"fixChangeStreamAudio",value:function(e){Xe.log(this.TAG,"fixChangeStreamAudio(), changeIdx=",e);var t=this.audioTrack.samples,n=0===e?this.lastAudioDts:t[e-1].dts,i=t[e].dts,r=Math.abs(n-i)<=1e4;if(this.emit(zt.DETECT_CHANGE_STREAM,"audio",i),r)return t[e].options?t[e].options.isContinue=!0:t[e].options={isContinue:!0},!1;this.emit(zt.DETECT_CHANGE_STREAM_DISCONTINUE,"audio",{prevDts:n,curDts:i}),this._audioLargeGap=0;var a=this.nextAudioDts;this.nextAudioDts=null;var o=t.slice(0,e),s=t.slice(e),l=t[e],u=void 0;return l.options&&void 0!==l.options.start?u=l.options.start:(u=a,l.options.isContinue=!0),this.audioTrack.samples=o,this.doFixAudio(!1),this.audioTrack.samples=s,this.doFixAudio(!1,u),this.audioTrack.samples=o.concat(s),!0}},{key:"getFirstSample",value:function(){var t=this.videoTrack.samples,n=this.audioTrack.samples,i=!1,r=!1;return!this._firstVideoSample&&t.length&&(this._firstVideoSample=e.findFirstVideoSample(t),this.removeInvalidSamples(),i=!0),!this._firstAudioSample&&n.length&&(this._firstAudioSample=e.findFirstAudioSample(n),this.removeInvalidSamples(),r=!0),{isFirstVideoSamples:i,isFirstAudioSamples:r}}},{key:"fixVideoRefSampleDuration",value:function(t,n){if(t){var i=this.allVideoSamplesCount,r=this._firstVideoSample.dts,a=this.filledVideoSamples.length;if(e.isRefSampleDurationValid(t.refSampleDuration)){if(t.refSampleDuration&&n.length>=5){var o=(n[n.length-1].dts-n[0].dts)/(n.length-1);if(o>0&&o<1e3){var s=Math.floor(Math.abs(t.refSampleDuration-o)<=5?t.refSampleDuration:o);e.isRefSampleDurationValid(s)&&(t.refSampleDuration=s)}}}else if(n.length>=1){var l=n[n.length-1].dts,u=Math.floor((l-r)/(i+a-1));e.isRefSampleDurationValid(u)&&(t.refSampleDuration=u)}e.isRefSampleDurationValid(t.refSampleDuration)||(t.refSampleDuration=66)}}},{key:"fixAudioRefSampleDuration",value:function(e){e&&(e.refSampleDuration=1024*e.timescale/e.sampleRate)}},{key:"recordSamplesCount",value:function(){var e=this.audioTrack,t=this.videoTrack;this.allAudioSamplesCount+=e.samples.length,this.allVideoSamplesCount+=t.samples.length}},{key:"removeInvalidSamples",value:function(){var e=this.audioTrack.samples[0],t=this.videoTrack.samples[0];e&&(this.audioTrack.samples=this.audioTrack.samples.filter((function(t,n){return t===e||t.dts>=e.dts}))),t&&(this.videoTrack.samples=this.videoTrack.samples.filter((function(e,n){return e===t||e.dts>=t.dts})))}},{key:"getStreamChangeStart",value:function(e){return e.options&&e.options.start?e.options.start-this.dtsBase:1/0}},{key:"tracks",get:function(){return this._context.getInstance("TRACKS")}},{key:"audioTrack",get:function(){return this.tracks&&this.tracks.audioTrack?this.tracks.audioTrack:{samples:[],meta:{}}}},{key:"videoTrack",get:function(){return this.tracks&&this.tracks.videoTrack?this.tracks.videoTrack:{samples:[],meta:{}}}},{key:"dtsBase",get:function(){var e=this._context.getInstance("MP4_REMUXER");return e?e._dtsBase:0}},{key:"audioDtsBase",get:function(){var e=this._context.getInstance("MP4_REMUXER");return e&&null!==e._audioDtsBase?e._audioDtsBase:this.dtsBase}},{key:"videoDtsBase",get:function(){var e=this._context.getInstance("MP4_REMUXER");return e&&null!==e._videoDtsBase?e._videoDtsBase:this.dtsBase}}],[{key:"sortAudioSamples",value:function(e){return 1===e.length?e:[].concat(x(e)).sort((function(e,t){return e.dts-t.dts}))}},{key:"isRefSampleDurationValid",value:function(e){return e&&e>0&&!Number.isNaN(e)}},{key:"findFirstAudioSample",value:function(t){return t&&0!==t.length?e.sortAudioSamples(t)[0]:null}},{key:"findFirstVideoSample",value:function(e){if(!e.length)return null;for(var t=[].concat(x(e)).sort((function(e,t){return e.dts-t.dts})),n=0,i=t.length;n<i;n++)if(t[n].isKeyframe)return t[n]}},{key:"detectVideoLargeGap",value:function(e,t){if(null!==e)return e-t>=1e3||t-e>=1e3}},{key:"detectAudioLargeGap",value:function(e,t){if(null!==e)return e-t>=1e3||t-e>=1e3}},{key:"doFixLargeGap",value:function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];r.dts+=t,r.pts&&(r.pts+=t)}var a=e[0];a&&0===a.dts&&(a.dts=a.pts=1)}},{key:"detectChangeStream",value:function(e,t){for(var n=!1,i=[],r=0,a=e.length;r<a;r++){var o=e[r];!o.options||!o.options.meta||t&&0===r||(n=!0,i.push(r))}return{changed:n,changedIdxes:i}}}]),e}(),Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Yt="function"==typeof Symbol&&"symbol"===Gt(Symbol.iterator)?function(e){return void 0===e?"undefined":Gt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":Gt(e)},Xt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$t=We.DEMUX_EVENTS,Kt=qt.NalUnit,Zt=Ht.NalUnitHEVC,Jt={1:["video","MPEG-1"],2:["video","MPEG-2"],27:["video","AVC.H264"],36:["video","HVC.H265"],234:["video","VC-1"],3:["audio","MPEG-1"],4:["audio","MPEG-2"],15:["audio","MPEG-2.AAC"],17:["audio","MPEG-4.AAC"],128:["audio","LPCM"],129:["audio","AC3"],6:["audio","AC3"],130:["audio","DTS"],131:["audio","Dolby TrueHD"],132:["audio","AC3-Plus"],133:["audio","DTS-HD"],134:["audio","DTS-MA"],161:["audio","AC3-Plus-SEC"],162:["audio","DTS-HD-SEC"]},Qt=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TAG="TsDemuxer",this.configs=Object.assign({},t),this.demuxing=!1,this.pat=[],this.pmt=[],this._hasVideoMeta=!1,this._hasAudioMeta=!1,this.gopId=0}return Xt(e,[{key:"init",value:function(){this.on($t.DEMUX_START,this.demux.bind(this))}},{key:"demux",value:function(t,n){var i=this;if(t&&Xe.log(this.TAG,"do demux: id="+t.id+",demuxing="+this.demuxing),!this.demuxing){for(var r=this.inputBuffer,a={pat:[],pmt:[]},o={};r.length>=188;){for(r.length>=1&&71!==r.array[0][r.offset]&&this.emit($t.DEMUX_ERROR,this.TAG,new Error("Untrust sync code: "+r.array[0][r.offset]+", try to recover;"),!1);r.length>=1&&71!==r.array[0][r.offset];)r.shift(1);if(!(r.length<188)){var s=r.shift(188),l=new ce(s.buffer),u={};e.read(l,u,a);var c=o[u.header.pid];u.pes?(u.pes.codec=u.header.codec,u.pes.streamType=u.header.streamType,o[u.header.pid]||(o[u.header.pid]=[]),o[u.header.pid].push(u.pes),u.pes.ES.buffer=[u.pes.ES.buffer]):c&&c[c.length-1].ES.buffer.push(u.payload.stream)}}setTimeout((function(){for(var r=Object.assign({},t),a=Object.assign({},t),s=n&&i._hasVideoMeta&&!i._hasAudioMeta,l=n&&i._hasAudioMeta&&!i._hasVideoMeta,u=0;u<Object.keys(o).length;u++)for(var c=o[Object.keys(o)[u]],d=0;d<c.length;d++){var p=c[d];p.id=Object.keys(o)[u];var f=15===p.streamType||17===p.streamType;"audio"===p.type&&!s&&f?(p.ES.buffer=e.mergeAudioES(p.ES.buffer),i.pushAudioSample(p,r),r={}):"video"!==p.type||l||(p.ES.buffer=e.mergeVideoES(p.ES.buffer),"HVC.H265"===p.codec?i.pushVideoSampleHEVC(c[d],a):i.pushVideoSample(c[d],a),a={})}})),setTimeout((function(){var e=0,t=0;try{e=i._tracks.videoTrack&&i._tracks.videoTrack.samples.length?1:0,t=i._tracks.audioTrack&&i._tracks.audioTrack.samples.length?1:0}catch(e){}i.emit($t.DEMUX_COMPLETE,e,t)}))}}},{key:"pushAudioSample",value:function(t,n){var i,r=void 0;if(this._tracks){this._tracks.audioTrack||(this._tracks.audioTrack=new fe),r=this._tracks.audioTrack;var a=new ye({audioSampleRate:t.ES.frequence,sampleRate:t.ES.frequence,channelCount:t.ES.channel,codec:"mp4a.40."+t.ES.audioObjectType,originCodec:"mp4a.40."+t.ES.originAudioObjectType,originObjectType:t.ES.originAudioObjectType,config:t.ES.audioConfig,id:2,sampleRateIndex:t.ES.frequencyIndex});a.refSampleDuration=Math.floor(1024/a.audioSampleRate*a.timescale);var o=e.compaireMeta(r.meta,a,!0);this._hasAudioMeta&&o||(r.meta=a,this._hasAudioMeta=!0,n?n.meta=Object.assign({},a):n={meta:Object.assign({},a)},this.emit($t.METADATA_PARSED,"audio"));var s=0,l=[];t.ES.buffer.skip(t.pesHeaderLength+9);for(var u=!1;t.ES.buffer.position<t.ES.buffer.length;)if(Nt.isHeader(new Uint8Array(t.ES.buffer.buffer),t.ES.buffer.position)&&t.ES.buffer.position+5<t.ES.buffer.length){var c=Nt.appendFrame(r,new Uint8Array(t.ES.buffer.buffer),t.ES.buffer.position,t.pts,s);if(!c||!c.sample)break;t.ES.buffer.skip(c.length);var d=new ve({dts:c.sample.dts,pts:c.sample.pts,data:c.sample.unit,options:u?{}:n});n.meta&&(u=!0),l.push(d),s++}else t.ES.buffer.skip(1);for(var p=0;p<l.length;p++){var f=l[p];f.dts=f.pts=Math.ceil(f.pts/90)}(i=r.samples).push.apply(i,l)}}},{key:"pushVideoSample",value:function(t,n){var i=this,r=Kt.getNalunits(t.ES.buffer),a=void 0,o=new me;if(this._tracks){this._tracks.videoTrack||(this._tracks.videoTrack=new ge),a=this._tracks.videoTrack;for(var s=0,l=!1,u=!1,c=[],d=0;d<r.length;d++){var p=r[d];if(p.sps){l=p,a.sps=p.body,o.sps=p.body,o.chromaFormat=l.sps.chroma_format,o.codec="avc1.";for(var f=1;f<4;f++){var h=l.body[f].toString(16);h.length<2&&(h="0"+h),o.codec+=h}o.codecHeight=l.sps.codec_size.height,o.codecWidth=l.sps.codec_size.width,o.frameRate=l.sps.frame_rate,o.id=1,o.level=l.sps.level_string,o.presentHeight=l.sps.present_size.height,o.presentWidth=l.sps.present_size.width,o.profile=l.sps.profile_string,o.refSampleDuration=Math.floor(o.timescale*(l.sps.frame_rate.fps_den/l.sps.frame_rate.fps_num)),o.sarRatio=l.sps.sar_ratio?l.sps.sar_ratio:l.sps.par_ratio}else p.pps?(a.pps=p.body,o.pps=p.body,u=p):p.sei?c.push(p.sei):p.type<9&&(s+=4+p.body.byteLength)}if(l&&u){o.avcc=Kt.getAvcc(l.body,u.body);var g=e.compaireMeta(a.meta,o,!0);this._hasVideoMeta&&g||(n?n.meta=Object.assign({},o):n={meta:Object.assign({},o)},a.meta=o,this._hasVideoMeta=!0,this.emit($t.METADATA_PARSED,"video"))}for(var y=new Uint8Array(s),m=0,v=!1,b=0;b<r.length;b++){var x=r[b];if(!(x.type&&x.type>=9)){var w=x.body.byteLength;x.idr&&(v=!0),x.pps||x.sps||x.sei||(y.set(new Uint8Array([w>>>24&255,w>>>16&255,w>>>8&255,255&w]),m),m+=4,y.set(x.body,m),m+=w)}}var _=parseInt(t.dts/90),k=parseInt(t.pts/90);c.length&&c.forEach((function(e){e.dts=_,i.emit($t.SEI_PARSED,e)}));var E=new be({dts:_,pts:k,cts:k-_,originDts:t.dts,isKeyframe:v,data:y,nals:r,options:n,isGop:v,gopId:v?++this.gopId:this.gopId});a.samples.push(E)}}},{key:"pushVideoSampleHEVC",value:function(t,n){var i=this,r=Zt.getNalunits(t.ES.buffer);r=r.filter((function(e){return e.body&&e.body.length}));var a=void 0,o=new me;if(o.streamType=36,this._tracks){this._tracks.videoTrack||(this._tracks.videoTrack=new ge),a=this._tracks.videoTrack;for(var s=0,l=!1,u=!1,c=!1,d=[],p=!1,f=!1,h=!1,g=!1,y=0;y<r.length;y++){var m=r[y];if(m.vps){if(p)continue;p=!0}else if(m.sps){if(f)continue;f=!0}else if(m.pps){if(h)continue;h=!0}else if(m.key)20!==m.type&&19!==m.type||(g=!0);else if(0===m.type);else if(35===m.type)continue;m.sps?(u=m,a.sps=m.body,o.sps=m.body,o.presentWidth=u.sps.width,o.presentHeight=u.sps.height,o.general_profile_space=u.sps.general_profile_space,o.general_tier_flag=u.sps.general_tier_flag,o.general_profile_idc=u.sps.general_profile_idc,o.general_level_idc=u.sps.general_level_idc,o.codec="hev1.1.6.L93.B0",o.chromaFormatIdc=u.sps.chromaFormatIdc,o.bitDepthLumaMinus8=u.sps.bitDepthLumaMinus8,o.bitDepthChromaMinus8=u.sps.bitDepthChromaMinus8):m.pps?(a.pps=m.body,o.pps=m.body,c=m):m.vps?(a.vps=m.body,o.vps=m.body,l=m):m.sei&&d.push(m.sei),m.type<=40&&(s+=4+m.body.byteLength)}if(u&&c&&l){var v=e.compaireMeta(a.meta,o,!0);this._hasVideoMeta&&v||(n?n.meta=Object.assign({},o):n={meta:Object.assign({},o)},o.streamType=36,this._tracks.videoTrack.meta=o,this._hasVideoMeta=!0,this.emit($t.METADATA_PARSED,"video"))}var b=new Uint8Array(s),x=0,w=!1;p=!1,f=!1,h=!1;for(var _=0;_<r.length;_++){var k=r[_];if(!(k.type&&k.type>40)){if(k.vps){if(p)continue;p=!0}else if(k.sps){if(f)continue;f=!0}else if(k.pps){if(h)continue;h=!0}else if(k.key);else if(0===k.type);else if(35===k.type)continue;var E=k.body.byteLength;k.key&&(w=!0),b.set(new Uint8Array([E>>>24&255,E>>>16&255,E>>>8&255,255&E]),x),x+=4,b.set(k.body,x),x+=E}}var T=parseInt(t.dts/90),S=parseInt(t.pts/90);d&&d.forEach((function(e){e.dts=T,i.emit($t.SEI_PARSED,e)}));var C=new be({dts:T,pts:S,cts:S-T,originDts:t.dts,isKeyframe:w,data:b,nals:r,options:n,isGop:g,gopId:g?++this.gopId:this.gopId});a.samples.push(C)}}},{key:"destory",value:function(){this.off($t.DEMUX_START,this.demux),this.configs={},this.demuxing=!1,this.pat=[],this.pmt=[],this._hasVideoMeta=!1,this._hasAudioMeta=!1}},{key:"inputBuffer",get:function(){return this._context.getInstance(this.configs.inputbuffer)}},{key:"_tracks",get:function(){return this._context.getInstance("TRACKS")}}],[{key:"compaireArray",value:function(e,t,n){var i=0,r=0;if("Uint8Array"===n?(i=e.byteLength,r=t.byteLength):"Array"===n&&(i=e.length,r=t.length),i!==r)return!1;for(var a=0;a<i;a++)if(e[a]!==t[a])return!1;return!0}},{key:"compaireMeta",value:function(t,n,i){if(!t||!n)return!1;for(var r=0,a=Object.keys(t).length;r<a;r++){var o=t[Object.keys(t)[r]],s=n[Object.keys(t)[r]];if(!o&&!s)return!0;if(null==o&&s||o&&void 0===s)return!1;if("object"!==(void 0===o?"undefined":Yt(o))){if(i&&"duration"!==Object.keys(t)[r]&&"refSampleDuration"!==Object.keys(t)[r]&&"refSampleDurationFixed"!==Object.keys(t)[r]&&o!==s)return!1}else if(void 0!==o.byteLength){if(void 0===s.byteLength)return!1;if(!e.compaireArray(o,s,"Uint8Array"))return!1}else if(void 0!==o.length){if(void 0===s.length)return!1;if(!e.compaireArray(o,s,"Array"))return!1}else if(!e.compaireMeta(o,s))return!1}return!0}},{key:"mergeVideoES",value:function(e){for(var t=void 0,n=0,i=0,r=0;r<e.length;r++)n+=e[r].length-e[r].position;t=new Uint8Array(n);for(var a=0;a<e.length;a++){var o=e[a];t.set(new Uint8Array(o.buffer,o.position),i),i+=o.length-o.position}return new ce(t.buffer)}},{key:"mergeAudioES",value:function(e){for(var t=void 0,n=0,i=0,r=0;r<e.length;r++)n+=e[r].length;t=new Uint8Array(n);for(var a=0;a<e.length;a++){var o=e[a];t.set(new Uint8Array(o.buffer),i),i+=o.length}return new ce(t.buffer)}},{key:"read",value:function(t,n,i){e.readHeader(t,n),e.readPayload(t,n,i),"MEDIA"!==n.header.packet||1!==n.header.payload||n.unknownPIDs||(n.pes=e.PES(n))}},{key:"readPayload",value:function(t,n,i){var r=n.header.pid;switch(r){case 0:e.PAT(t,n,i);break;case 1:e.CAT(t,n,i);break;case 2:e.TSDT(t,n,i);break;case 8191:break;default:for(var a=!1,o=0,s=i.pat.length;o<s;o++)if(i.pat[o].pid===r){a=!0;break}if(a)e.PMT(t,n,i);else{for(var l=[],u=0,c=i.pmt.length;u<c;u++)if(i.pmt[u].pid===r){l.push(i.pmt[u]);break}if(l.length>0){var d=l[0].streamType;e.Media(t,n,d)}else n.unknownPIDs=!0}}}},{key:"readHeader",value:function(e,t){var n={};n.sync=e.readUint8();var i=e.readUint16();n.error=i>>>15,n.payload=i>>>14&1,n.priority=i>>>13&1,n.pid=8191&i,i=e.readUint8(),n.scrambling=i>>6&3,n.adaptation=i>>4&3,n.continuity=15&i,n.packet=0===n.pid?"PAT":"MEDIA",t.header=n}},{key:"PAT",value:function(e,t,n){var i={},r=e.readUint8();e.skip(r),r=e.readUint8(),i.tabelID=r,r=e.readUint16(),i.error=r>>>7,i.zero=r>>>6&1,i.sectionLength=4095&r,i.streamID=e.readUint16(),i.current=1&e.readUint8(),i.sectionNumber=e.readUint8(),i.lastSectionNumber=e.readUint8();for(var a=(i.sectionLength-9)/4,o=[],s=0;s<a;s++){var l=e.readUint16(),u=8191&e.readUint16();o.push({program:l,pid:u,type:0===l?"network":"mapPID"})}o.length>0&&(n.pat=n.pat.concat(o)),i.list=o,i.program=e.readUint16(),i.pid=8191&e.readUint16(),t.payload=i}},{key:"PMT",value:function(e,t,n){var i={};t.header.packet="PMT";var r=e.readUint8();e.skip(r),r=e.readUint8(),i.tableID=r,r=e.readUint16(),i.sectionLength=4095&r,i.program=e.readUint16(),i.current=1&e.readUint8(),i.order=e.readUint8(),i.lastOrder=e.readUint8(),i.PCR_PID=8191&e.readUint16(),i.programLength=4095&e.readUint16();for(var a=(i.sectionLength-13)/5,o=[],s=0;s<a;s++)o.push({streamType:e.readUint8(),pid:8191&e.readUint16(),es:4095&e.readUint16()});i.list=o,this.pmt||(this.pmt=[]),n.pmt=this.pmt.concat(o.map((function(e){return{pid:e.pid,es:e.es,streamType:e.streamType,program:i.program}}))),t.payload=i}},{key:"Media",value:function(e,t,n){var i=t.header,r={},a=Wt(Jt[n],2),o=a[0],s=a[1];if(i.streamType=n,i.type=o,i.codec=s,3===i.adaptation&&(r.adaptationLength=e.readUint8(),r.adaptationLength>0)){var l=e.readUint8();r.discontinue=l>>>7,r.access=l>>>6&1,r.priority=l>>>5&1,r.PCR=l>>>4&1,r.OPCR=l>>>3&1,r.splicePoint=l>>>2&1,r.transportPrivate=l>>>1&1,r.adaptationField=1&l;var u=e.position;if(1===r.PCR&&(r.programClockBase=e.readUint32()<<1,l=e.readUint16(),r.programClockBase|=l>>>15,r.programClockExtension=511&l),1===r.OPCR&&(r.originProgramClockBase=e.readUint32()<<1,l=e.readUint16(),r.originProgramClockBase+=l>>>15,r.originProgramClockExtension=511&l),1===r.splicePoint&&(r.spliceCountdown=e.readUint8()),1===r.transportPrivate)for(var c=e.readUint8(),d=[],p=0;p<c;p++)d.push(e.readUint8());if(1===r.adaptationField){var f=e.readUint8(),h=e.readUint8(),g=e.position,y=h>>>6&1,m=h>>>5&1;1==h>>>7&&(h=e.readUint16(),r.ltwValid=h>>>15,r.ltwOffset=61439&h),1===y&&(h=e.readUint24(),r.piecewiseRate=4194303&h),1===m&&(h=e.readInt8(),r.spliceType=h>>>4,r.dtsNextAU1=h>>>1&7,r.marker1=1&h,h=e.readUint16(),r.dtsNextAU2=h>>>1,r.marker2=1&h,h=e.readUint16(),r.dtsNextAU3=h),e.skip(f-1-(e.position-g))}var v=r.adaptationLength-1-(e.position-u);e.skip(v)}r.stream=new ce(e.buffer.slice(e.position)),t.payload=r}},{key:"PES",value:function(t){var n={},i=t.payload.stream;if(1!==i.readUint24())n.ES={},n.ES.buffer=i;else{var r=i.readUint8();r>=224&&r<=239&&(n.type="video"),r>=192&&r<=223&&(n.type="audio");var a=i.readUint16();if(n.packetLength=a,"video"!==n.type&&"audio"!==n.type)throw new Error("format is not supported");var o=i.readUint8();if(2!=o>>>6)throw new Error("error when parse pes header");o=i.readUint8(),n.ptsDTSFlag=o>>>6,n.escrFlag=o>>>5&1,n.esRateFlag=o>>>4&1,n.dsmFlag=o>>>3&1,n.additionalFlag=o>>>2&1,n.crcFlag=o>>>1&1,n.extensionFlag=1&o,n.pesHeaderLength=i.readUint8();var s=n.pesHeaderLength;if(2===n.ptsDTSFlag){var l=[];o=i.readUint8(),l.push(o>>>1&7),o=i.readUint16(),l.push(o>>>1),o=i.readUint16(),l.push(o>>>1),n.pts=l[0]<<30|l[1]<<15|l[2],s-=5,"video"===n.type&&(n.dts=n.pts)}if(3===n.ptsDTSFlag){var u=[];o=i.readUint8(),u.push(o>>>1&7),o=i.readUint16(),u.push(o>>>1),o=i.readUint16(),u.push(o>>>1),n.pts=u[0]<<30|u[1]<<15|u[2];var c=[];o=i.readUint8(),c.push(o>>>1&7),o=i.readUint16(),c.push(o>>>1),o=i.readUint16(),c.push(o>>>1),n.dts=c[0]<<30|c[1]<<15|c[2],s-=10}if(1===n.escrFlag){var d=[],p=[];o=i.readUint8(),d.push(o>>>3&7),d.push(3&o),o=i.readUint16(),d.push(o>>>13),d.push(3&o),o=i.readUint16(),d.push(o>>>13),p.push(3&o),o=i.readUint8(),p.push(o>>>1),n.escr=300*(d[0]<<30|d[1]<<28|d[2]<<15|d[3]<<13|d[4])+(p[0]<<7|p[1]),s-=6}if(1===n.esRateFlag&&(o=i.readUint24(),n.esRate=o>>>1&4194303,s-=3),1===n.dsmFlag)throw new Error("not support DSM_trick_mode");if(1===n.additionalFlag&&(o=i.readUint8(),n.additionalCopyInfo=127&o,s-=1),1===n.crcFlag&&(n.pesCRC=i.readUint16(),s-=2),1===n.extensionFlag)throw new Error("not support extension");s>0&&i.skip(s),n.dts>n.pts&&(n.dts=n.pts),n.ES=e.ES(i,n.type,t.header.streamType)}return n}},{key:"ES",value:function(t,n,i){var r={};if("video"===n)r.buffer=t;else{if("audio"!==n)throw new Error("ES "+n+" is not supported");15!==i&&17!==i||(r=e.parseADTSHeader(t)),r.buffer=t}return r}},{key:"parseADTSHeader",value:function(t){var n={},i=t.readUint16();if(i>>>4!=4095)throw new Error("aac ES parse Error");return n.id=0==(i>>>3&1)?"MPEG-4":"MPEG-2",n.layer=i>>>1&3,n.absent=1&i,i=t.readUint16(),n.audioObjectType=1+(i>>>14&3),n.profile=n.audioObjectType-1,n.frequencyIndex=i>>>10&15,n.frequence=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][n.frequencyIndex],n.channel=i>>>6&7,n.frameLength=(3&i)<<11|t.readUint16()>>>5,e.getAudioConfig(n),t.skip(1),n.buffer=t,n}},{key:"TSDT",value:function(e,t,n){t.payload={}}},{key:"CAT",value:function(e,t,n){var i={};i.tableID=e.readUint8();var r=e.readUint16();i.sectionIndicator=r>>>7,i.sectionLength=4095&r,e.skip(2),r=e.readUint8(),i.version=r>>>3,i.currentNextIndicator=1&r,i.sectionNumber=e.readUint8(),i.lastSectionNumber=e.readUint8(),this.sectionLength,i.crc32=e.readUint32(),t.payload=i}},{key:"getAudioConfig",value:function(e){var t=navigator.userAgent.toLowerCase(),n=void 0,i=void 0;e.originAudioObjectType=e.audioObjectType,/firefox/i.test(t)?e.frequencyIndex>=6?(e.audioObjectType=5,n=new Array(4),i=e.frequencyIndex-3):(e.audioObjectType=2,n=new Array(2),i=e.frequencyIndex):-1!==t.indexOf("android")?(e.audioObjectType=2,n=new Array(2),i=e.frequencyIndex):(e.audioObjectType=5,n=new Array(4),e.frequencyIndex>=6?i=e.frequencyIndex-3:(1===e.channel&&(e.audioObjectType=2,n=new Array(2)),i=e.frequencyIndex)),n[0]=e.audioObjectType<<3,n[0]|=(14&e.frequencyIndex)>>1,n[1]=(1&e.frequencyIndex)<<7,n[1]|=e.channel<<3,5===e.audioObjectType&&(n[1]|=(14&i)>>1,n[2]=(1&i)<<7,n[2]|=8,n[3]=0),e.audioConfig=n}}]),e}(),en=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),tn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return en(e,null,[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i={duration:0};if(t&&t.split){var r=t.split(/\r|\n/),a=(r=r.filter((function(e){return e}))).shift();if(!a.match("#EXTM3U"))throw new Error('Invalid m3u8 file: not "#EXTM3U"');a=r.shift();for(var o=!1,s=0;a;){var l=a.match(/#(.[A-Z|-]*):(.*)/),u=a.match(/#(.[A-Z|-]*)/);if(u&&l&&l.length>2)switch(l[1]){case"EXT-X-VERSION":i.version=parseInt(l[2]);break;case"EXT-X-MEDIA-SEQUENCE":i.sequence=parseInt(l[2]);break;case"EXT-X-TARGETDURATION":i.targetduration=parseFloat(l[2]);break;case"EXTINF":s=e.parseFrag(l,r,i,n,o,s),o=!1;break;case"EXT-X-KEY":e.parseDecrypt(l[2],i)}if(u&&u.length>1)switch(u[1]){case"EXT-X-DISCONTINUITY":o=!0;break;case"EXT-X-ENDLIST":i.end=!0}a=r[s++]}return i}}},{key:"parseFrag",value:function(t,n,i,r,a,o){i.frags||(i.frags=[]);var s={start:i.duration,duration:parseInt(1e3*parseFloat(t[2]))};if(s.duration<200)return o;i.duration+=s.duration;var l=n[o++];if((l.match(/#(.*):(.*)/)||l.match(/^#/))&&(l=n[o++]),l.length>0&&"/"===l.charAt(0)&&r.match(/.*\/\/.*\.\w+/g)&&(r=r.match(/.*\/\/.*\.\w+/g)[0]),l.match(/.*:\/\/.*/)){var u=e.isHTTPS;!e.envisHttps&&!(e.envisHttps=u(window.location.href))||u(l)||(l=l.replace("http:","https:")),s.url=l}else s.url=r+l;if(s.discontinue=a,i.frags.length){var c=i.frags[i.frags.length-1];s.id=c.id+1,s.cc=a?c.cc+1:c.cc}else s.id=i.sequence||1,s.cc=0;return i.frags.push(s),o}},{key:"parseURL",value:function(e){var t="",n=e.match(/(.*\/).*\.m3u8/);if(n&&n.length>0)for(var i=0;i<n.length;i++)n[i].match(/.*\/$/g)&&n[i].length>t.length&&(t=n[i]);return t}},{key:"parseDecrypt",value:function(e,t){t.encrypt={};var n=e.split(",");for(var i in n){var r=n[i];if(r.match(/METHOD=(.*)/)&&(t.encrypt.method=r.match(/METHOD=(.*)/)[1]),r.match(/URI="(.*)"/)&&(t.encrypt.uri=r.match(/URI="(.*)"/)[1]),r.match(/IV=0x(.*)/)){var a=r.match(/IV=0x(.*)/)[1],o=Math.ceil(a.length/2);t.encrypt.ivb=new Uint8Array(o);for(var s=o-1;s>=0;s--){var l=parseInt(a.substr(2*s,2),16);t.encrypt.ivb[s]=l}t.encrypt.iv=a}}}},{key:"isHTTPS",value:function(e){return/^https:\/\//i.test(e)}}]),e}(),nn=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)t+=l.value.length}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}var c=new e(t),d=0,p=!0,f=!1,h=void 0;try{for(var g,y=i[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var m=g.value;c.set(m,d),d+=m.length}}catch(e){f=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(f)throw h}}return c}}));w(nn);var rn=w(_((function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(nn);e.exports=t.default}))),an=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),on=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.buffer=t||new Uint8Array(0)}return an(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){e.buffer=rn(Uint8Array,e.buffer,t)}))}}],[{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}},{key:"readAsInt",value:function(e){var t="";return e.forEach((function(e){t+=function(e){return e.toString(16).padStart(2,"0")}(e)})),parseInt(t,16)}}]),e}(),sn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return sn(e,null,[{key:"size",value:function(e){return on.writeUint32(e)}},{key:"initBox",value:function(t,n){for(var i=new on,r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return i.write.apply(i,[e.size(t),e.type(n)].concat(a)),i.buffer}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"ftyp",value:function(){return e.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}},{key:"ftypHEVC",value:function(){return e.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,100,97,115,104]))}},{key:"moov",value:function(t){var n=t.type,i=t.meta,r=8,a=e.mvhd(i.duration,i.timescale),o=void 0;o="video"===n?e.videoTrak(i):e.audioTrak(i);var s=e.mvex(i.duration,i.timescale||1e3,i.id);return[a,o,s].forEach((function(e){r+=e.byteLength})),e.initBox(r,"moov",a,o,s)}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.initBox(8+i.length,"mvhd",new Uint8Array(i))}},{key:"videoTrak",value:function(t){var n=8,i=e.tkhd({id:1,duration:t.duration,timescale:t.timescale||1e3,width:t.presentWidth,height:t.presentHeight,type:"video"}),r=e.mdia({type:"video",timescale:t.timescale||1e3,duration:t.duration,avcc:t.avcc,parRatio:t.parRatio,width:t.presentWidth,height:t.presentHeight,streamType:t.streamType});return[i,r].forEach((function(e){n+=e.byteLength})),e.initBox(n,"trak",i,r)}},{key:"audioTrak",value:function(t){var n=8,i=e.tkhd({id:2,duration:t.duration,timescale:t.timescale||1e3,width:0,height:0,type:"audio"}),r=e.mdia({type:"audio",timescale:t.timescale||1e3,duration:t.duration,channelCount:t.channelCount,samplerate:t.sampleRate,config:t.config});return[i,r].forEach((function(e){n+=e.byteLength})),e.initBox(n,"trak",i,r)}},{key:"tkhd",value:function(t){var n=t.id,i=t.duration,r=t.width,a=t.height,o=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,a>>>8&255,255&a,0,0]);return e.initBox(8+o.byteLength,"tkhd",o)}},{key:"edts",value:function(t){var n=new on,i=t.duration,r=t.mediaTime;return n.write(e.size(36),e.type("edts")),n.write(e.size(28),e.type("elst")),n.write(new Uint8Array([0,0,0,1,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,1])),n.buffer}},{key:"mdia",value:function(t){var n=8,i=e.mdhd(t.timescale,t.duration),r=e.hdlr(t.type),a=e.minf(t);return[i,r,a].forEach((function(e){n+=e.byteLength})),e.initBox(n,"mdia",i,r,a)}},{key:"mdhd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments[1],i=new Uint8Array([0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,85,196,0,0]);return e.initBox(12+i.byteLength,"mdhd",e.extension(0,0),i)}},{key:"hdlr",value:function(t){var n=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(n.splice.apply(n,[8,4].concat([115,111,117,110])),n.splice.apply(n,[24,13].concat([83,111,117,110,100,72,97,110,100,108,101,114,0]))),e.initBox(8+n.length,"hdlr",new Uint8Array(n))}},{key:"minf",value:function(t){var n=8,i="video"===t.type?e.vmhd():e.smhd(),r=e.dinf(),a=e.stbl(t);return[i,r,a].forEach((function(e){n+=e.byteLength})),e.initBox(n,"minf",i,r,a)}},{key:"vmhd",value:function(){return e.initBox(20,"vmhd",new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}},{key:"smhd",value:function(){return e.initBox(16,"smhd",new Uint8Array([0,0,0,0,0,0,0,0]))}},{key:"dinf",value:function(){var t=new on;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"stbl",value:function(t){var n=8,i=e.stsd(t),r=e.stts(),a=e.stsc(),o=e.stsz(),s=e.stco();return[i,r,a,o,s].forEach((function(e){n+=e.byteLength})),e.initBox(n,"stbl",i,r,a,o,s)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?e.mp4a(t):36===t.streamType?e.hvc1(t):e.avc1(t),e.initBox(16+n.byteLength,"stsd",e.extension(0,0),new Uint8Array([0,0,0,1]),n)}},{key:"mp4a",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.samplerate>>8&255,255&t.samplerate,0,0]),i=e.esds(t.config);return e.initBox(8+n.byteLength+i.byteLength,"mp4a",n,i)}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],n=t.length,i=new on,r=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(t).concat([6,1,2]));return i.write(e.size(8+r.byteLength),e.type("esds"),r),i.buffer}},{key:"avc1",value:function(t){var n=new on,i=t.width,r=t.height,a=t.parRatio.height,o=t.parRatio.width,s=t.avcc,l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,r>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),c=new Uint8Array([a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o]);return n.write(e.size(40+l.byteLength+s.byteLength+u.byteLength),e.type("avc1"),l,e.size(8+s.byteLength),e.type("avcC"),s,e.size(20),e.type("btrt"),u,e.size(16),e.type("pasp"),c),n.buffer}},{key:"hvc1",value:function(t){var n=new on,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255,0,0,0,122,104,118,99,67,1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64]);return n.write(e.size(8+i.byteLength+10),e.type("hvc1"),i,e.size(10),e.type("fiel"),new Uint8Array([1,0])),n.buffer}},{key:"stts",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stts",t)}},{key:"stsc",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stsc",t)}},{key:"stco",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stco",t)}},{key:"stsz",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return e.initBox(20,"stsz",t)}},{key:"mvex",value:function(t){var n=arguments[2],i=new on,r=on.writeUint32(t);return i.write(e.size(56),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),r,e.trex(n)),i.buffer}},{key:"trex",value:function(t){var n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.initBox(8+n.byteLength,"trex",n)}},{key:"moof",value:function(t){var n=8,i=e.mfhd(),r=e.traf(t);return[i,r].forEach((function(e){n+=e.byteLength})),e.initBox(n,"moof",i,r)}},{key:"mfhd",value:function(){var t=on.writeUint32(e.sequence);return e.sequence+=1,e.initBox(16,"mfhd",e.extension(0,0),t)}},{key:"traf",value:function(t){var n=8,i=e.tfhd(t.id),r=e.tfdt(t.time),a=e.sdtp(t),o=e.trun(t,a.byteLength);return[i,r,o,a].forEach((function(e){n+=e.byteLength})),e.initBox(n,"traf",i,r,o,a)}},{key:"tfhd",value:function(t){var n=on.writeUint32(t);return e.initBox(16,"tfhd",e.extension(0,0),n)}},{key:"tfdt",value:function(t){return e.initBox(16,"tfdt",e.extension(0,0),on.writeUint32(t))}},{key:"trun",value:function(t,n){var i=new on,r=on.writeUint32(t.samples.length),a=on.writeUint32(92+16*t.samples.length+n);return i.write(e.size(20+16*t.samples.length),e.type("trun"),new Uint8Array([0,0,15,1]),r,a),t.samples.forEach((function(e){var t=e.flags;i.write(new Uint8Array([e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,e.size>>>24&255,e.size>>>16&255,e.size>>>8&255,255&e.size,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.isNonSync,0,0,e.cts>>>24&255,e.cts>>>16&255,e.cts>>>8&255,255&e.cts]))})),i.buffer}},{key:"sdtp",value:function(t){var n=new on;return n.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach((function(e){var t=e.flags,i=t.isLeading<<6|t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;n.write(new Uint8Array([i]))})),n.buffer}},{key:"mdat",value:function(t){var n=new on,i=8;t.samples.forEach((function(e){i+=e.size})),n.write(e.size(i),e.type("mdat"));var r=new Uint8Array(i),a=0;return r.set(n.buffer,a),a+=8,t.samples.forEach((function(e){e.buffer.forEach((function(e){r.set(e,a),a+=e.byteLength}))})),r}}]),e}();ln.type=function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])},ln.sequence=1;var un=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),cn=We.REMUX_EVENTS,dn=We.PLAYER_EVENTS,pn=Qt,fn=tn,hn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;k(this,e),this.TAG="Mp4Remuxer",this._dtsBase=1e3*t,this._audioDtsBase=null,this._videoDtsBase=null,this._isDtsBaseInited=!1;var n=Ge.browser;this._fillSilenceFrame="ie"===n,this.isFirstVideo=!0,this.isFirstAudio=!0,this.videoAllDuration=0,this.audioAllDuration=0,this.audioRemuxed=0,this.videoRemuxed=0,this.mp4Durations={keys:[]}}return un(e,[{key:"init",value:function(){this.on(cn.REMUX_MEDIA,this.remux.bind(this)),this.on(cn.REMUX_METADATA,this.onMetaDataReady.bind(this)),this.on(cn.DETECT_CHANGE_STREAM,this.resetDtsBase.bind(this)),this.on(cn.DETECT_FRAG_ID_DISCONTINUE,this.seek.bind(this)),this.on(dn.SEEK,this.seek.bind(this))}},{key:"destroy",value:function(){this._dtsBase=-1,this._isDtsBaseInited=!1,this.mp4Durations={keys:[]}}},{key:"remux",value:function(){var e=this._context.getInstance("TRACKS"),t=e.audioTrack,n=e.videoTrack;!this._isDtsBaseInited&&this.calcDtsBase(t,n),this._remuxVideo(n),this._remuxAudio(t),Xe.groupEnd()}},{key:"resetDtsBase",value:function(){this._dtsBase=0}},{key:"seek",value:function(e){Xe.log(this.TAG,"set dtsBase for seek(),time=",e),this._isDtsBaseInited?(this._isDtsBaseInited=!1,this._dtsBase=1e3*e):this._dtsBase=1e3*e,this._audioDtsBase=this._videoDtsBase=null}},{key:"onMetaDataReady",value:function(e){var t;t="audio"===e?this._context.getInstance("TRACKS").audioTrack:this._context.getInstance("TRACKS").videoTrack;var n=this._context.getInstance("PRE_SOURCE_BUFFER"),i=n.getSource(e);i||(i=n.createSource(e)),i.mimetype=t.meta.codec,i.init=this.remuxInitSegment(e,t.meta),this.emit(cn.INIT_SEGMENT,e)}},{key:"remuxInitSegment",value:function(e,t){Xe.log(this.TAG,"remuxInitSegment: type=",e);var n=new on,i=36===t.streamType?ln.ftypHEVC():ln.ftyp(),r=ln.moov({type:e,meta:t});return n.write(i,r),n}},{key:"calcDtsBase",value:function(e,t){if(!e&&t.samples.length){var n=t.samples[0],i=void 0;return n.options&&n.options.start&&(i=n.options.start),this._videoDtsBase=n.dts-(i||this._dtsBase),void(this._isDtsBaseInited=!0)}if(e&&e.samples.length||t&&t.samples.length){var r=null,a=null,o=null;if(e&&e.samples&&e.samples.length){var s=e.samples[0];r=s.dts,s.options&&s.options.start&&(o=s.options.start)}if(t&&t.samples&&t.samples.length){var l=t.samples[0];a=l.dts,l.options&&l.options.start&&(o=l.options.start)}this._videoDtsBase=(a||r)-(o||this._dtsBase),this._audioDtsBase=(r||a)-(o||this._dtsBase),this._dtsBase=Math.min(a,r),this._isDtsBaseInited=!0,Xe.log(this.TAG,"calcDtsBase"),Xe.log(this.TAG,"video first dts: "+a+" , start:"+o+" , _videoDtsBase:"+this._videoDtsBase+" , _dtsBase:"+this._dtsBase),Xe.log(this.TAG,"audio first dts: "+r+" , start:"+o+" , _audioDtsBase:"+this._audioDtsBase+", _dtsBase:"+this._dtsBase)}}},{key:"_remuxVideo",value:function(e){var t=this,n=e||{};if(e&&e.samples&&e.samples.length){var i=n.samples;if(n.meta){for(var r=-1,a=null,o=[],s={samples:[]},l=1e4;i.length&&l-- >0;){var u=i.shift(),c=u.isKeyframe,d=u.options;if(!this.isFirstVideo&&d&&d.meta){a=this.remuxInitSegment("video",d.meta),d.meta=null,i.unshift(u),d.isContinue||(this._videoDtsBase=0);break}var p=Math.max(0,u.dts-this.videoDtsBase);-1===r&&(r=p);var f=void 0,h=void 0;void 0!==u.pts&&(f=(h=u.pts-this._dtsBase)-p),void 0!==u.cts&&(h=u.cts+p,f=u.cts);var g,y={buffer:[],size:0};g=u.duration?u.duration:i.length>=1?i[0].dts-this.videoDtsBase-p:o.length>=1?o[o.length-1].duration:this.videoMeta.refSampleDuration,this.videoAllDuration+=g,Xe.long&&Xe.log(this.TAG,"video dts "+p,"pts "+h,"cts: "+f,c,"originDts "+u.originDts,"duration "+g),g>=0&&(s.samples.push(y),y.buffer.push(u.data),y.size+=u.data.byteLength,this.mp4Durations[h]&&(f=(h+=this.mp4Durations[h])-p),o.push({dts:p,cts:Math.abs(f)>2e3?g:f,pts:h,data:u.data,size:u.data.byteLength,isKeyframe:c,duration:g,flags:{isLeading:0,dependsOn:c?2:1,isDependedOn:c?1:0,hasRedundancy:0,isNonSync:c?0:1},originDts:p,type:"video"}),this.mp4Durations[h]=g,this.mp4Durations.keys.push(h)),c&&this.emit(cn.RANDOM_ACCESS_POINT,h)}if(this.mp4Durations.keys.length>1e4){var m=this.mp4Durations;this.mp4Durations={},this.mp4Durations.keys=m.keys.slice(-100),this.mp4Durations.keys.forEach((function(e){t.mp4Durations[e]=m[e]}))}o.length&&Xe.log(this.TAG,"remux to mp4 video:",[r/1e3,o[o.length-1].dts/1e3]);var v=new on;if(o.length&&n.meta){var b=ln.moof({id:n.meta.id,time:r,samples:o}),x=ln.mdat(s);v.write(b,x),this.writeToSource("video",v,o[o.length-1].pts-o[0].pts)}if(a&&(this.writeToSource("video",a),i.length))return n.samples=i,this._remuxVideo(n);this.isFirstVideo=!1,this.emit(cn.MEDIA_SEGMENT,"video"),n.samples=[],n.length=0}}}},{key:"_remuxAudio",value:function(e){var t=(e||{}).samples,n=-1,i=[],r=null,a={samples:[]};if(t&&t.length){for(var o=1e4,s=!1;t.length&&o-- >0;){var l=t.shift(),u=l.data,c=l.options;if(!this.isFirstAudio&&c&&c.meta){r=this.remuxInitSegment("audio",c.meta),c.meta=null,t.unshift(l),c.isContinue||(this._audioDtsBase=0);break}var d,p=Math.max(0,l.dts-this.audioDtsBase),f=l.originDts;s||(n=p,s=!0),d=l.duration?l.duration:this.audioMeta.refSampleDurationFixed?this.audioMeta.refSampleDurationFixed:t.length>=1?t[0].dts-this.audioDtsBase-p:i.length>=1?i[i.length-1].duration:this.audioMeta.refSampleDuration,Xe.long&&Xe.log(this.TAG,"audio dts "+p,"pts "+p,"originDts "+f,"duration "+d),this.audioAllDuration+=d;var h={dts:p,pts:p,cts:0,size:u.byteLength,duration:l.duration?l.duration:d,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,isNonSync:0},isKeyframe:!0,originDts:f,type:"audio"},g={buffer:[],size:0};d>=0&&(g.buffer.push(u),g.size+=u.byteLength,a.samples.push(g),i.push(h))}var y=new on;if(i.length&&e.meta){Xe.log(this.TAG,"remux to mp4 audio:",[n/1e3,i[i.length-1].dts/1e3]);var m=ln.moof({id:e.meta.id,time:n,samples:i}),v=ln.mdat(a);y.write(m,v),this.writeToSource("audio",y,i[i.length-1].dts-i[0].dts)}if(r&&(this.writeToSource("audio",r),t.length))return e.samples=t,this._remuxAudio(e);this.isFirstAudio=!1,this.emit(cn.MEDIA_SEGMENT,"audio",y),e.samples=[],e.length=0}}},{key:"writeToSource",value:function(e,t,n){var i=this._context.getInstance("PRE_SOURCE_BUFFER"),r=i.getSource(e);r||(r=i.createSource(e)),r.data.push(t),n&&(r.bufferDuration=n+(r.bufferDuration||0))}},{key:"initSilentAudio",value:function(t,n){var i=e.getSilentFrame(this._audioMeta.channelCount);return{dts:t,pts:t,cts:0,duration:n,unit:i,size:i.byteLength,originDts:t,type:"video"}}},{key:"destroy",value:function(){this._player=null}},{key:"videoMeta",get:function(){return this._context.getInstance("TRACKS").videoTrack.meta}},{key:"audioMeta",get:function(){return this._context.getInstance("TRACKS").audioTrack.meta}},{key:"videoDtsBase",get:function(){return null!==this._videoDtsBase?this._videoDtsBase:this._dtsBase}},{key:"audioDtsBase",get:function(){return null!==this._audioDtsBase?this._audioDtsBase:this._dtsBase}}],[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}(),gn={Mse:Ve,Tracks:de,PreSource:ue,XgBuffer:pe,FetchLoader:Ye,Compatibility:Vt,Mp4Remuxer:hn,Crypto:He,M3U8Parser:fn,TsDemuxer:pn,Playlist:le},yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),vn=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},bn=We.HlsAllowedEvents,xn=We.REMUX_EVENTS,wn=e.util,_n=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":yn(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.hlsOps={},t.hlsOps=Object.assign(t.hlsOps,gn),wn.deepCopy(t.hlsOps,e),t._played=!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":yn(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),mn(n,[{key:"_initEvents",value:function(){var e=this;this.__core__.once(xn.INIT_SEGMENT,(function(){var t=e._context.getInstance("MSE");if(!e.started){var i=wn.createDom("xg-live","正在直播",{},"xgplayer-live");wn.addClass(e.root,"xgplayer-is-live"),e.controls.appendChild(i)}e.started=!0,vn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"start",e).call(e,t.url)}))}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.url;e&&!this.started&&(this._context||(this._context=new qe(bn)),this.hlsOps||(this.hlsOps={},this.hlsOps=Object.assign(this.hlsOps,gn),wn.deepCopy(this.hlsOps,this.config),this._played=!1),this.__core__=this._context.registry("HLS_LIVE_CONTROLLER",it)({player:this,container:this.video,preloadTime:this.config.preloadTime}),this._context.init(),this.url=e,this.__core__.load(e),this._initEvents(),this.started=!0)}},{key:"play",value:function(){var e=this;if(this._played)return this.src=this.config.url,void this.once("canplay",(function(){e.video.play()}));this._played=!0,vn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"play",this).call(this)}},{key:"destroy",value:function(){var e=this;return vn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this._context&&this._context.destroy(),new Promise((function(t){e.__core__&&e.__core__.mse?e.__core__.mse.destroy().then((function(){setTimeout((function(){t()}),50)})):setTimeout((function(){t()}),50)}))}},{key:"src",set:function(e){var t=this;this.onWaiting=this.onWaiting.bind(this),this.__core__.mse.destroy().then((function(){t._context.destroy(),t._context=null,t.started=!1,t.video.currentTime=0,t.start(e)}))}}],[{key:"isSupported",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"install",value:function(t,n){return e.install(t,n)}}]),n}(e);_n.install=e.install.bind(e);var kn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),En=Ht.NalUnitHEVC,Tn=qt.NalUnit,Sn=We.LOADER_EVENTS,Cn=We.DEMUX_EVENTS,An=We.HLS_EVENTS,Dn=We.CRYTO_EVENTS,On=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Rn=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.configs=Object.assign({},t),this.url="",this.baseurl="",this.sequence=0,this._playlist=null,this.retrytimes=this.configs.retrytimes||3,this.preloadTime=this.configs.preloadTime,this.container=this.configs.container,this._m3u8lasttime=0,this._timmer=setInterval(this._checkStatus.bind(this),50),this._lastCheck=0,this._player=this.configs.player,this.m3u8Text=null}return kn(e,[{key:"init",value:function(){var e=this._player.hlsOps,t=e.XgBuffer,n=e.Tracks,i=e.Playlist,r=e.FetchLoader,a=e.TsDemuxer;this._context.registry("M3U8_BUFFER",t),this._context.registry("TS_BUFFER",t),this._context.registry("TRACKS",n),this._playlist=this._context.registry("PLAYLIST",i)({autoclear:!0}),this._m3u8loader=this._context.registry("M3U8_LOADER",r)({buffer:"M3U8_BUFFER",readtype:1}),this._tsloader=this._context.registry("TS_LOADER",r)({buffer:"TS_BUFFER",readtype:3}),this._context.registry("TS_DEMUXER",a)({inputbuffer:"TS_BUFFER"}),this.initEvents()}},{key:"initEvents",value:function(){this.on(Sn.LOADER_COMPLETE,this._onLoadComplete.bind(this)),this.on(Cn.METADATA_PARSED,this._onMetadataParsed.bind(this)),this.on(Cn.SEI_PARSED,this._handleSEIParsed.bind(this)),this.on(Cn.DEMUX_COMPLETE,this._onDemuxComplete.bind(this)),this.on(Sn.LOADER_ERROR,this._onLoadError.bind(this)),this.on(Cn.DEMUX_ERROR,this._onDemuxError.bind(this))}},{key:"_onError",value:function(e,t,n,i){var r={errorType:e,errorDetails:"["+t+"]: "+(n?n.message:""),errorFatal:i};this._player.emit("HLS_ERROR",r)}},{key:"_onDemuxComplete",value:function(){var e=this;if(this._player.video){var t=this._context.getInstance("TRACKS"),n=t.videoTrack,i=t.audioTrack;n.samples.forEach((function(t){if(!t.analyzed){t.analyzed=!0;var i=new ce(t.data.buffer),r=void 0,a=(r=e._isHEVC(n.meta)?En.getHvccNals(i):Tn.getNalunits(i)).reduce((function(e,t){return e+4+t.body.byteLength}),0),o=new Uint8Array(a),s=0;r.forEach((function(e){o.set([0,0,0,1],s),s+=4,o.set(new Uint8Array(e.body),s),s+=e.body.byteLength})),t.data=o}})),this._player.video.onDemuxComplete(n,i)}}},{key:"_onMetadataParsed",value:function(e){if("audio"===e){var t=this._context.getInstance("TRACKS").audioTrack;t&&t.meta&&this._setMetaToAudio(t.meta)}else{var n=this._context.getInstance("TRACKS").videoTrack;n&&n.meta&&this._setMetaToVideo(n.meta)}}},{key:"_setMetaToAudio",value:function(e){this._player.video&&this._player.video.setAudioMeta(e)}},{key:"_setMetaToVideo",value:function(e){this._player.video&&this._player.video.setVideoMeta(e)}},{key:"_onLoadError",value:function(e,t){!this._tsloader.loading&&!this._m3u8loader.loading&&this.retrytimes>1?(this.retrytimes--,this._onError(Sn.LOADER_ERROR,e,t,!1)):this.retrytimes<=1&&(this._onError(Sn.LOADER_ERROR,e,t,!0),this.emit(An.RETRY_TIME_EXCEEDED),this._player.video&&this._player.video.handleEnded())}},{key:"_onDemuxError",value:function(e,t,n){void 0===n&&(n=!0),this._onError(Sn.LOADER_ERROR,e,t,n)}},{key:"_handleSEIParsed",value:function(e){this._player.emit("SEI_PARSED",e)}},{key:"_onLoadComplete",value:function(e){if("M3U8_BUFFER"===e.TAG){var t=void 0;try{this.m3u8Text=e.shift();var n=On.exec(this.m3u8Text);n&&n[2]?this.load(n[2]):t=this._player.hlsOps.M3U8Parser.parse(this.m3u8Text,this.baseurl)}catch(e){this._onError("M3U8_PARSER_ERROR","M3U8_PARSER",e,!1)}if(!t)return void(this.retrytimes>0?(this.retrytimes--,this._preload()):(this.emit(An.RETRY_TIME_EXCEEDED),this._player.video&&this._player.video.handleEnded()));try{this._playlist.pushM3U8(t,!0)}catch(e){this._onError("M3U8_PARSER_ERROR","PLAYLIST",e,!1)}if(this._playlist.encrypt&&this._playlist.encrypt.uri&&!this._playlist.encrypt.key){var i=this._player.hlsOps,r=i.XgBuffer,a=i.FetchLoader;this._context.registry("DECRYPT_BUFFER",r)(),this._context.registry("KEY_BUFFER",r)(),this._tsloader.buffer="DECRYPT_BUFFER",this._keyLoader=this._context.registry("KEY_LOADER",a)({buffer:"KEY_BUFFER",readtype:3}),this.emitTo("KEY_LOADER",Sn.LADER_START,this._playlist.encrypt.uri)}else this._m3u8Loaded(t)}else if("TS_BUFFER"===e.TAG)this.retrytimes=this.configs.retrytimes||3,this._playlist.downloaded(this._tsloader.url,!0),this.emit(Cn.DEMUX_START);else if("DECRYPT_BUFFER"===e.TAG)this.retrytimes=this.configs.retrytimes||3,this._playlist.downloaded(this._tsloader.url,!0),this.emitTo("CRYPTO",Dn.START_DECRYPT);else if("KEY_BUFFER"===e.TAG){var o=this._player.hlsOps.Crypto;this.retrytimes=this.configs.retrytimes||3,this._playlist.encrypt.key=e.shift(),this._crypto=this._context.registry("CRYPTO",o)({key:this._playlist.encrypt.key,iv:this._playlist.encrypt.ivb,method:this._playlist.encrypt.method,inputbuffer:"DECRYPT_BUFFER",outputbuffer:"TS_BUFFER"}),this._crypto.on(Dn.DECRYPTED,this._onDcripted.bind(this))}}},{key:"_onDcripted",value:function(){this.emit(Cn.DEMUX_START)}},{key:"_m3u8Loaded",value:function(e){this.preloadTime||(this.preloadTime=this._playlist.targetduration?this._playlist.targetduration:5),this._playlist.fragLength>0&&this._playlist.sequence<e.sequence?this.retrytimes=this.configs.retrytimes||3:this.retrytimes>0?(this.retrytimes--,this._preload()):(this.emit(An.RETRY_TIME_EXCEEDED),this._player.video&&this._player.video.handleEnded())}},{key:"_checkStatus",value:function(){if(!(this.retrytimes<1&&(new Date).getTime()-this._lastCheck<1e4))if(this._lastCheck=(new Date).getTime(),this.container.buffered.length<1)this._preload();else{var e=this.container.currentTime;this.container.readyState<=2&&this._preload(),e>this.container.buffered.end(this.container.buffered.length-1)-this.preloadTime&&this._preload()}}},{key:"_preload",value:function(){if(!this._tsloader.loading&&!this._m3u8loader.loading){var e=this._playlist.getTs();if(!e||e.downloaded||e.downloading){var t=this.preloadTime?this.preloadTime:0,n=(new Date).getTime();(!e||e.downloaded)&&(n-this._m3u8lasttime)/1e3>t&&(this._m3u8lasttime=n,this.emitTo("M3U8_LOADER",Sn.LADER_START,this.url))}else this._playlist.downloading(e.url,!0),this.emitTo("TS_LOADER",Sn.LADER_START,e.url)}}},{key:"_isHEVC",value:function(e){return e&&"hev1.1.6.L93.B0"===e.codec}},{key:"load",value:function(e){this.baseurl=this._player.hlsOps.M3U8Parser.parseURL(e),this.url=e,this._preload()}},{key:"destroy",value:function(){clearInterval(this._timmer),this.off(Sn.LOADER_COMPLETE,this._onLoadComplete),this.off(Cn.METADATA_PARSED,this._onMetadataParsed),this.off(Cn.DEMUX_COMPLETE,this._onDemuxComplete),this.m3u8Text=null}}]),e}(),Ln={Tracks:de,XgBuffer:pe,FetchLoader:Ye,Crypto:He,M3U8Parser:fn,TsDemuxer:pn,Playlist:le},Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},Bn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Un=We.HlsAllowedEvents,In=function(t){function n(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),t.mediaType||(t.mediaType="mobile-video",t.videoConfig?t.videoConfig.preloadtime=t.preloadTime||5:t.videoConfig={preloadtime:t.preloadTime||5});var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":Pn(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.hlsOps={},i.util=e.util,i.hlsOps=Object.assign(i.hlsOps,Ln),i.util.deepCopy(i.hlsOps,t),i.playerInited||i.initPlayer(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":Pn(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Bn(n,null,[{key:"isSupported",value:function(){var e="WebAssembly"in window,t=!1;return"customElements"in window&&window.customElements.define&&(t=window.customElements.get("mobile-video")),e&&t}}]),Bn(n,[{key:"initPlayer",value:function(){this.video.width=Number.parseInt(this.hlsOps.width||600),this.video.height=Number.parseInt(this.hlsOps.height||337.5),this.video.style.outline="none",this.playerInited=!0}},{key:"_initEvents",value:function(){var e=this;this.once("canplay",(function(){e.video.play()}))}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hlsOps.url;e&&!this.started&&(this.playerInited||this.initPlayer(),this._context||(this._context=new qe(Un)),this.__core__=this._context.registry("HLS_LIVE_CONTROLLER",Rn)({player:this,container:this.video,preloadTime:this.config.preloadTime}),this._context.init(),this.url=e,this.__core__.load(e),Mn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"start",this).call(this,e),this._initEvents(),this.started=!0,this.addLiveFlag())}},{key:"play",value:function(){this.started&&(this._context.destroy(),this._context=new qe(Un),this.__core__=this._context.registry("HLS_LIVE_CONTROLLER",Rn)({player:this,container:this.video,preloadTime:this.config.preloadTime}),this._context.init(),this._initEvents(),this.__core__.load(this.url)),Mn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"play",this).call(this)}},{key:"addLiveFlag",value:function(){if(e.util.addClass(this.root,"xgplayer-is-live"),!e.util.findDom(this.root,"xg-live")){var t=e.util.createDom("xg-live","正在直播",{},"xgplayer-live");this.controls.appendChild(t)}}},{key:"destroy",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(i){Mn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",e).call(e);var r=e.video,a=e.root;Mn(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",e).call(e,t),r&&r.remove?r.remove():a&&a.removeChild(r),r&&r.destroy(),setTimeout((function(){i()}),50)}))}},{key:"src",set:function(e){this.onWaiting=this.onWaiting.bind(this),this._context.destroy(),this._context=null,this.started=!1,this.video.currentTime=0,this.start(e)}}],[{key:"install",value:function(t,n){return e.install(t,n)}}]),n}(e);In.install=e.install.bind(e);var jn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),zn=function(){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),In.isSupported()&&n.useWASM?new In(n):_n.isSupported()?new _n(n):new e(n)}return jn(t,null,[{key:"install",value:function(t,n){return e.install(t,n)}}]),t}();zn.EVENTS=We;var Fn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Nn=We.LOADER_EVENTS,qn=We.REMUX_EVENTS,Hn=We.DEMUX_EVENTS,Vn=We.CRYTO_EVENTS,Gn=We.MSE_EVENTS,Wn=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TAG="HlsVodController",this.configs=Object.assign({},t),this.url="",this.baseurl="",this.sequence=0,this._playlist=null,this.retrytimes=this.configs.retrytimes||3,this.container=this.configs.container,this.preloadTime=this.configs.preloadTime||5,this.mse=this.configs.mse,this._lastSeekTime=0,this._player=this.configs.player,this.m3u8Text=null}return Fn(e,[{key:"init",value:function(){this._context.registry("M3U8_BUFFER",pe),this._tsBuffer=this._context.registry("TS_BUFFER",pe)(),this._tracks=this._context.registry("TRACKS",de)(),this._playlist=this._context.registry("PLAYLIST",le)({autoclear:!0}),this._presource=this._context.registry("PRE_SOURCE_BUFFER",ue)(),this._compat=this._context.registry("COMPATIBILITY",Vt)(),this._context.registry("M3U8_LOADER",Ye)({buffer:"M3U8_BUFFER",readtype:1}),this._tsloader=this._context.registry("TS_LOADER",Ye)({buffer:"TS_BUFFER",readtype:3}),this._demuxer=this._context.registry("TS_DEMUXER",pn)({inputbuffer:"TS_BUFFER"}),this._context.registry("MP4_REMUXER",hn)(this._player.currentTime),this.mse||(this.mse=new Ve({container:this.container,preloadTime:this.preloadTime},this._context),this.mse.init()),this.initEvents()}},{key:"initEvents",value:function(){this._onLoaderCompete=this._onLoaderCompete.bind(this),this._onLoadError=this._onLoadError.bind(this),this._onInitSegment=this._onInitSegment.bind(this),this._handleSEIParsed=this._handleSEIParsed.bind(this),this._onMediaSegment=this._onMediaSegment.bind(this),this._onMetadataParsed=this._onMetadataParsed.bind(this),this._onDemuxComplete=this._onDemuxComplete.bind(this),this._onDemuxError=this._onDemuxError.bind(this),this._onRemuxError=this._onRemuxError.bind(this),this._handleMseError=this._handleMseError.bind(this),this._onUpdateEnd=this._onUpdateEnd.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onWaiting=this._onWaiting.bind(this),this.on(Nn.LOADER_COMPLETE,this._onLoaderCompete),this.on(Nn.LOADER_ERROR,this._onLoadError),this.on(qn.INIT_SEGMENT,this._onInitSegment),this.on(Hn.SEI_PARSED,this._handleSEIParsed),this.on(qn.MEDIA_SEGMENT,this._onMediaSegment),this.on(Hn.METADATA_PARSED,this._onMetadataParsed),this.on(Hn.DEMUX_COMPLETE,this._onDemuxComplete),this.on(Hn.DEMUX_ERROR,this._onDemuxError),this.on(qn.REMUX_ERROR,this._onRemuxError),this.on(Gn.MSE_ERROR,this._handleMseError),this.on(Gn.SOURCE_UPDATE_END,this._onUpdateEnd),this.on("TIME_UPDATE",this._onTimeUpdate),this.on(Gn.SOURCE_UPDATE_END,this._onTimeUpdate),this.on("WAITING",this._onWaiting)}},{key:"_onError",value:function(e,t,n,i){var r={errorType:e,errorDetails:"["+t+"]: "+(n?n.message:""),errorFatal:i};this._player&&this._player.emit("HLS_ERROR",r)}},{key:"_onLoadError",value:function(e,t){this._player.emit("error",{errorType:"network",ex:"["+e+"]: "+t.message,errd:{}}),this._onError(Nn.LOADER_ERROR,e,t,!0)}},{key:"_onDemuxError",value:function(e,t,n){void 0===n&&(n=!0),this._player.emit("error",{errorType:"parse",ex:"["+e+"]: "+t.message,errd:{}}),this._onError(Nn.LOADER_ERROR,e,t,n)}},{key:"_onRemuxError",value:function(e,t,n){void 0===n&&(n=!0),this._player.emit("error",{errorType:"parse",ex:"["+e+"]: "+t.message,errd:{}}),this._onError(qn.REMUX_ERROR,e,t,n)}},{key:"_handleMseError",value:function(e,t,n){void 0===n&&(n=!1),this._onError(Gn.MSE_ERROR,e,t,n)}},{key:"_onWaiting",value:function(e){var t=!0;Xe.log(this.TAG,"waiting.......",this._player.video.currentTime),this._seekToBufferStart();var n=Object.keys(this._playlist.list),i=n.length;if(i){for(var r=0;r<i;r++)1e3*this.container.currentTime<parseInt(n[r])&&(t=!1);if(t){var a=this._playlist.getTs(1e3*this.container.currentTime);a?a.downloaded&&(this._player.emit("ended"),this.mse.endOfStream()):(this._player.emit("ended"),this.mse.endOfStream())}}}},{key:"_seekToBufferStart",value:function(){var e=this._player.video,t=e.buffered,n=[0,0],i=e.currentTime;if(t)for(var r=0,a=t.length;r<a;r++)if(n[0]=t.start(r),n[1]=t.end(r),n[0]<=i&&i<=n[1])return;var o=n[0];0===i&&i<o&&Math.abs(i-o)<5&&(e.currentTime=o)}},{key:"_checkEnd",value:function(){var e=this._player.video,t=e.buffered,n=t.length;if(n){var i=t.end(n-1);Math.abs(i-e.duration)<1&&this.mse.endOfStream()}}},{key:"_onUpdateEnd",value:function(){this._checkEnd(),this._seekToBufferStart(),this._preload(this._player.currentTime)}},{key:"_onTimeUpdate",value:function(){this._seekToBufferStart(),this._preload(this._player.currentTime)}},{key:"_onDemuxComplete",value:function(){this.emit(qn.REMUX_MEDIA,"ts")}},{key:"_handleSEIParsed",value:function(e){this._player.emit("SEI_PARSED",e)}},{key:"_onMetadataParsed",value:function(e){Xe.warn(this.TAG,"meta detect or changed , ",e);var t=parseInt(this._playlist.duration);"video"===e?(this._context.mediaInfo.hasVideo=!0,this._tracks.videoTrack.meta.duration=t):"audio"===e&&(this._context.mediaInfo.hasAudio=!0,this._tracks.audioTrack.meta.duration=t),this.emit(qn.REMUX_METADATA,e)}},{key:"_onMediaSegment",value:function(){Object.keys(this.mse.sourceBuffers).length<1&&this.mse.addSourceBuffers(),this.mse.doAppend()}},{key:"_onInitSegment",value:function(){this.mse.addSourceBuffers()}},{key:"_onLoaderCompete",value:function(e){if("M3U8_BUFFER"===e.TAG){this.m3u8Text=e.shift();try{var t=fn.parse(this.m3u8Text,this.baseurl);this._playlist.pushM3U8(t)}catch(e){this._onError("M3U8_PARSER_ERROR","PLAYLIST",e,!0)}if(this._playlist.encrypt&&this._playlist.encrypt.uri&&!this._playlist.encrypt.key)this._context.registry("DECRYPT_BUFFER",pe)(),this._context.registry("KEY_BUFFER",pe)(),this._tsloader.buffer="DECRYPT_BUFFER",this._keyLoader=this._context.registry("KEY_LOADER",Ye)({buffer:"KEY_BUFFER",readtype:3}),this.emitTo("KEY_LOADER",Nn.LADER_START,this._playlist.encrypt.uri);else{this.preloadTime||(this._playlist.targetduration?(this.preloadTime=this._playlist.targetduration,this.mse.preloadTime=this._playlist.targetduration):(this.preloadTime=5,this.mse.preloadTime=5));var n=this._playlist.getTs(1e3*(this._player.currentTime+.5));n?(this._logDownSegment(n),this._playlist.downloading(n.url,!0),this.emitTo("TS_LOADER",Nn.LADER_START,n.url)):this.retrytimes>0&&(this.retrytimes--,this.emitTo("M3U8_LOADER",Nn.LADER_START,this.url))}}else if("TS_BUFFER"===e.TAG)this._playlist.downloaded(this._tsloader.url,!0),this._demuxer.demux(Object.assign({url:this._tsloader.url},this._playlist._ts[this._tsloader.url]),!0),this._preload(this.mse.container.currentTime);else if("DECRYPT_BUFFER"===e.TAG)this.retrytimes=this.configs.retrytimes||3,this._playlist.downloaded(this._tsloader.url,!0),this.emitTo("CRYPTO",Vn.START_DECRYPT,Object.assign({url:this._tsloader.url},this._playlist._ts[this._tsloader.url]));else if("KEY_BUFFER"===e.TAG){this.retrytimes=this.configs.retrytimes||3,this._playlist.encrypt.key=e.shift(),this._crypto=this._context.registry("CRYPTO",He)({key:this._playlist.encrypt.key,iv:this._playlist.encrypt.ivb,method:this._playlist.encrypt.method,inputbuffer:"DECRYPT_BUFFER",outputbuffer:"TS_BUFFER"}),this._crypto.on(Vn.DECRYPTED,this._onDcripted.bind(this));var i=this._playlist.getTs();i?(this._playlist.downloading(i.url,!0),this.emitTo("TS_LOADER",Nn.LADER_START,i.url)):this.retrytimes>0&&(this.retrytimes--,this.emitTo("M3U8_LOADER",Nn.LADER_START,this.url))}}},{key:"_onDcripted",value:function(){this.emit(Hn.DEMUX_START)}},{key:"seek",value:function(e){for(var t=this._player.video,n=0;n<t.buffered.length;n++)if(e>=t.buffered.start(n)&&e<t.buffered.end(n))return;Xe.warn(this.TAG,"seek: ",e,"tsloading:",this._tsloader.loading);var i=this._playlist.getTs(1e3*(e+.5));i&&this._tsloader.loading&&this._tsloader.url===i.url||(this._lastSeekTime=e,this._tsloader.destroy(),this._tsloader=this._context.registry("TS_LOADER",Ye)({buffer:"TS_BUFFER",readtype:3}),this._presource.sources.video&&(this._presource.sources.video.data=[]),this._presource.sources.audio&&(this._presource.sources.audio.data=[]),this._tracks.audioTrack&&(this._tracks.audioTrack.samples=[]),this._tracks.videoTrack&&(this._tracks.videoTrack.samples=[]),this._compat&&this._compat.reset(),this._tsBuffer&&(this._tsBuffer.array=[],this._tsBuffer.length=0,this._tsBuffer.offset=0),this._playlist.clearDownloaded(),this._context.seek(e),this._preload(e))}},{key:"replay",value:function(){this._compat.reset(),this._playlist.clearDownloaded()}},{key:"load",value:function(e){this.baseurl=fn.parseURL(e),this.url=e,this.emitTo("M3U8_LOADER",Nn.LADER_START,e,null,0)}},{key:"_preload",value:function(e){if(e=Math.floor(e),!this._tsloader.loading){Xe.log(this.TAG,"preload: time=",e);var t=this.mse.container,n=-1;!e&&t.buffered.length&&(e=t.buffered.start(0));for(var i=0;i<t.buffered.length;i++)e>=Math.floor(t.buffered.start(i))&&e<=Math.ceil(t.buffered.end(i))&&(n=t.buffered.end(i));if(n<0){var r=this._playlist.getTs(1e3*(e+.5));r&&r.downloaded&&(r=this._playlist.getTs(r.time+r.duration)),!r||r.downloading||r.downloaded||(this._logDownSegment(r),this._playlist.downloading(r.url,!0),this.emitTo("TS_LOADER",Nn.LADER_START,r.url))}else if(n<e+this.preloadTime){var a=this._playlist.getLastDownloadedTs()||this._playlist.getTs(1e3*n);if(!a)return;var o=a.time+a.duration,s=a.time;if(a.downloaded)for(var l=1e3;l-- >0&&(o+=10,(a=this._playlist.getTs(o))&&!(a.time>s)););!a||a.downloading||a.downloaded||(this._logDownSegment(a),this._playlist.downloading(a.url,!0),this.emitTo("TS_LOADER",Nn.LADER_START,a.url))}}}},{key:"cleanBuffer",value:function(){var e=this,t=this._player.currentTime,n=this._player.video,i=n.buffered;if(i&&i.length){var r=[0,0],a=n.currentTime;if(i)for(var o=0,s=i.length;o<s&&(r[0]=i.start(o),r[1]=i.end(o),!(r[0]<=a&&a<=r[1]));o++);var l=r[0],u=r[1];(t-l>10||i.length>1)&&(this.mse.remove(Math.max(Math.min(t-10,u-10),.1),0),this.bufferClearTimer=setTimeout((function(){e.bufferClearTimer=null}),5e3))}}},{key:"destory",value:function(){this.configs={},this.url="",this.baseurl="",this.sequence=0,this._playlist=null,this.retrytimes=3,this.container=void 0,this.preloadTime=5,this._lastSeekTime=0,this.m3u8Text=null,this.mse=null,this.off(Nn.LOADER_COMPLETE,this._onLoaderCompete),this.off(Nn.LOADER_ERROR,this._onLoadError),this.off(qn.INIT_SEGMENT,this._onInitSegment),this.off(qn.MEDIA_SEGMENT,this._onMediaSegment),this.off(Hn.METADATA_PARSED,this._onMetadataParsed),this.off(Hn.DEMUX_COMPLETE,this._onDemuxComplete),this.off("TIME_UPDATE",this._onTimeUpdate),this.off("WAITING",this._onWaiting)}},{key:"_logDownSegment",value:function(e){e&&(Xe.groupEnd(),Xe.group(this.TAG,"load "+e.id+": ["+e.time/1e3+" , "+(e.time+e.duration)/1e3+"], downloading: "+e.downloading+" , donwloaded: "+e.downloaded))}}]),e}(),Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$n=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},Kn=Ne.debounce,Zn=We.HlsAllowedEvents,Jn=We.REMUX_EVENTS,Qn=We.HLS_EVENTS,ei=We.MSE_EVENTS,ti=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":Yn(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.hlsOps={},i.util=e.util,i.util.deepCopy(i.hlsOps,t),i._handleSetCurrentTime=Kn(i._handleSetCurrentTime.bind(i),200),i.onWaiting=i.onWaiting.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":Yn(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Xn(n,[{key:"_handleSetCurrentTime",value:function(e){(e=parseFloat(e))!==this.currentTime&&(function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var s=a.set;void 0!==s&&s.call(r,i)}return i}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"currentTime",e,this),this._context&&this.__core__.seek(e))}},{key:"play",value:function(){var e=this;return this.video.play().catch((function(t){t&&20===t.code&&e.once("canplay",(function(){e.video.play()}))}))}},{key:"replay",value:function(){var e=this;this.__core__.mse.cleanBuffers().then((function(){e.__core__.replay(),$n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"replay",e).call(e)}))}},{key:"_initEvents",value:function(){var t=this;this.__core__.once(Jn.INIT_SEGMENT,(function(){var e=t.__core__.mse;$n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"start",t).call(t,e.url)})),this.__core__.once(Qn.RETRY_TIME_EXCEEDED,(function(){t.emit("error",new e.Errors("network",t.config.url))})),this.__core__.on(ei.SOURCE_UPDATE_END,(function(){t._onSourceUpdateEnd()})),this.once("canplay",(function(){t.config.autoplay&&t.play()}))}},{key:"initHlsBackupEvents",value:function(e,t){var i=this;e.once(Jn.INIT_SEGMENT,(function(){if(!i.video.src){console.log("挂载 src blob");var t=e.mse;$n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"start",i).call(i,t.url)}})),e.once(We.REMUX_EVENTS.MEDIA_SEGMENT,(function(){i.__core__=e,i.__core__.mse.cleanBuffers().then((function(){i.__core__.mse.resetContext(t),i.__core__.mse.doAppend(),i._context=t}))})),e.once(We.LOADER_EVENTS.LOADER_ERROR,(function(){t.destroy()}))}},{key:"_onSourceUpdateEnd",value:function(){if(1===this.video.readyState||2===this.video.readyState){var e=this.detectBufferGap(),t=e.gap,n=e.start,i=e.method;t&&("ceil"===i&&this.currentTime<Math[i](n)||"floor"===i&&this.currentTime>Math[i](n))&&(this.currentTime=Math[i](n))}}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.url;e&&!this.started&&(this._context||(this._context=new qe(Zn)),this.__core__=this._context.registry("HLS_VOD_CONTROLLER",Wn)({player:this,container:this.video,preloadTime:this.config.preloadTime}),this._context.init(),this.__core__.load(e),this._initEvents(),this.started=!0)}},{key:"switchURL",value:function(e){this.config.url=e;var t=new qe(Zn),n=t.registry("HLS_VOD_CONTROLLER",Wn)({player:this,container:this.video,mse:this.__core__.mse,preloadTime:this.config.preloadTime});this.newContext=t,this.newHls=n,t.init(),this._context.destroy(),this.initHlsBackupEvents(n,t),this.__core__.mse.cleanBuffers().then((function(){n.load(e)}))}},{key:"destroy",value:function(){var e=this;return new Promise((function(t){e.__core__&&e.__core__.mse?(e.__core__.mse.destroy().then((function(){e._context&&e._context.destroy(),$n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",e).call(e),t()})),setTimeout((function(){t()}),100)):($n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",e).call(e),setTimeout((function(){t()}),50))}))}},{key:"detectBufferGap",value:function(){for(var e=this.video,t={gap:!1,start:-1},n=0===this.currentTime,i=0;i<e.buffered.length;i++){var r=e.buffered.start(i),a=e.buffered.end(i);if((!e.played.length||r<=this.currentTime&&a-this.currentTime>=.5)&&!n)break;var o=r-this.currentTime,s=this.currentTime-a;if(o>.01&&(o<=2||n)){t={gap:!0,start:r,method:"ceil"};break}t=s>.1&&(s<=2||n)?{gap:!0,start:a,method:"floor"}:{gap:!1,start:-1}}return t}},{key:"currentTime",get:function(){return $n(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"currentTime",this)},set:function(e){this._handleSetCurrentTime(e)}},{key:"src",get:function(){return this.currentSrc},set:function(e){var t=this;this.onWaiting=this.onWaiting.bind(this),this.__core__.mse.destroy().then((function(){t._context.destroy(),t._context=null,t.video.src="",t.video.load(),t.started=!1,t.video.currentTime=0,t.paused?t.play():(t.pause(),t.once("canplay",(function(){t.play()}))),t.start(e)}))}}],[{key:"isSupported",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"install",value:function(t,n){return e.install(t,n)}}]),n}(e),ni=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.isLive?new zn(e):new ti(e)}return ni(t,null,[{key:"isSupported",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"install",value:function(t,n){return e.install(t,n)}}]),t}()}(n("U5Kh"))}});